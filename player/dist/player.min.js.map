{"version":3,"sources":["node_modules/plyr/dist/plyr.js","node_modules/alertifyjs/build/alertify.js","src/js/player.js"],"names":["navigator","module","exports","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","iter","toString","call","from","_iterableToArray","_nonIterableSpread","getConstructor","input","constructor","instanceOf","Boolean","isNullOrUndefined","isObject","isString","String","isNodeList","NodeList","isEmpty","keys","is","nullOrUndefined","object","number","Number","isNaN","string","boolean","function","Function","array","weakMap","WeakMap","nodeList","element","Element","textNode","Text","event","Event","keyboardEvent","KeyboardEvent","cue","window","TextTrackCue","VTTCue","track","TextTrack","kind","url","URL","startsWith","concat","hostname","e","empty","supportsPassiveListeners","supported","options","get","addEventListener","removeEventListener","toggleListener","callback","_this","this","toggle","arguments","passive","capture","events","split","forEach","type","eventListeners","on","off","once","onceCallback","_len","args","_key","apply","triggerEvent","bubbles","detail","CustomEvent","assign","plyr","dispatchEvent","wrap","elements","wrapper","targets","reverse","index","child","cloneNode","parent","parentNode","sibling","nextSibling","appendChild","insertBefore","setAttributes","attributes","entries","filter","_ref","_ref2","_ref3","_ref4","setAttribute","createElement","text","document","innerText","insertElement","removeElement","removeChild","emptyElement","childNodes","lastChild","replaceElement","newChild","oldChild","replaceChild","getAttributesFromSelector","sel","existingAttributes","existing","s","selector","trim","className","replace","stripped","parts","start","charAt","class","id","toggleHidden","hidden","hide","removeAttribute","toggleClass","force","map","method","classList","contains","hasClass","matches","querySelectorAll","includes","getElements","container","getElement","querySelector","setFocus","tabFocus","focus","preventScroll","config","classNames","transitionEndEvent","WebkitTransition","MozTransition","OTransition","transition","find","style","repaint","setTimeout","offsetHeight","range","browser","isIE","documentMode","isWebkit","documentElement","test","userAgent","isIPhone","platform","isIos","defaultCodecs","audio/ogg","audio/wav","video/webm","video/mp4","video/ogg","support","audio","video","check","provider","playsinline","canPlayInline","api","ui","rangeInput","pip","webkitSetPresentationMode","pictureInPictureEnabled","disablePictureInPicture","airplay","WebKitPlaybackTargetAvailabilityEvent","mime","inputType","_inputType$split","_inputType$split2","mediaType","isHTML5","media","canPlayType","textTracks","touch","transitions","reducedMotion","matchMedia","html5","getSources","sources","source","getAttribute","getQualityOptions","extend","player","set","_player$media","currentTime","paused","preload","readyState","src","play","load","quality","cancelRequests","blankVideo","debug","log","dedupe","item","indexOf","getDeep","path","reduce","shift","format","match","replaceAll","RegExp","toTitleCase","toUpperCase","substr","toLowerCase","toCamelCase","toPascalCase","slice","getHTML","innerHTML","resources","vimeo","youtube","i18n","{seektime}","seekTime","{title}","title","Storage","enabled","storage","store","localStorage","getItem","json","JSON","parse","setItem","stringify","removeItem","fetch","responseType","Promise","resolve","reject","request","XMLHttpRequest","responseText","response","Error","status","open","send","loadSprite","hasId","exists","getElementById","update","data","body","insertAdjacentElement","useStorage","cached","content","then","result","catch","getHours","parseInt","getMinutes","getSeconds","formatTime","time","displayHours","inverted","hours","mins","secs","controls","getIconUrl","iconUrl","location","cors","host","svg4everybody","findElements","selectors","buttons","pause","restart","rewind","fastForward","mute","settings","captions","fullscreen","progress","inputs","seek","volume","display","buffer","duration","seekTooltip","tooltip","error","warn","toggleNativeControls","createIcon","iconPath","iconPrefix","icon","createElementNS","role","focusable","use","setAttributeNS","createLabel","attr","join","createBadge","badge","menu","createButton","buttonType","label","labelPressed","iconPressed","control","button","createRange","min","max","step","autocomplete","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","updateRangeFill","createProgress","aria-hidden","suffixKey","played","suffix","createTime","bindMenuItemShortcuts","menuItem","which","preventDefault","stopPropagation","isRadioButton","showMenuPanel","nextElementSibling","firstElementChild","previousElementSibling","lastElementChild","focusFirstMenuItem","createMenuItem","_this2","list","_ref$badge","_ref$checked","checked","aria-checked","flex","children","node","listeners","bind","currentTrack","speed","parseFloat","forceHours","updateTimeDisplay","updateVolume","setRange","muted","pressed","updateProgress","current","_this3","toFixed","getElementsByTagName","nodeValue","setProgress","buffered","format$$1","percent","setProperty","updateSeekTooltip","_this4","tooltips","clientRect","getBoundingClientRect","visible","_toggle","width","pageX","left","timeUpdate","invert","invertTime","seeking","durationUpdate","Math","pow","hasDuration","displayDuration","toggleMenuButton","setting","updateSetting","pane","panels","default","getLabel","setQualityMenu","_this5","checkMenu","getBadge","sort","a","b","sorting","setCaptionsMenu","_this6","tracks","getTracks","toggled","language","unshift","setSpeedMenu","_this7","isVimeo","values","some","popup","firstItem","toggleMenu","show","isMenuItem","getMenuSize","tab","clone","position","opacity","scrollWidth","height","scrollHeight","_this8","size","restore","propertyName","setDownloadLink","download","create","_this9","aria-haspopup","aria-controls","aria-expanded","inner","home","backButton","_attributes","href","urls","isEmbed","inject","_this10","floor","random","seektime","insertMethod","addProperty","controlPressed","_this$config","labels","parseUrl","safe","parser","buildUrlParams","params","URLSearchParams","setup","isVideo","isYouTube","protocol","blob","createObjectURL","browserLanguages","languages","userLanguage","_languages","active","trackEvents","_this$captions","meta","currentTrackNode","languageExists","mode","updateCues","setLanguage","activeClass","findTrack","embed","enableTextTrack","has","sortIsDefault","sorted","every","getCurrentTrack","cues","activeCues","getCueAsHTML","cueText","changed","caption","defaults","autoplay","autopause","toggleInvert","ratio","clickToPlay","hideControls","resetOnEnd","disableContextMenu","loop","selected","keyboard","focused","global","fallback","iosNative","seekLabel","unmute","enableCaptions","disableCaptions","enterFullscreen","exitFullscreen","frameTitle","menuBack","normal","end","all","reset","disabled","advertisement","qualityBadge","2160","1440","1080","720","576","480","sdk","iframe","googleIMA","editable","embedContainer","poster","posterEnabled","ads","playing","stopped","loading","hover","isTouch","uiSupported","noTransition","google","publisherId","inactive","providers","types","noop","Console","console","onChange","first","last","keyCode","activeElement","shiftKey","toggleFallback","scrollPosition","x","scrollX","y","scrollY","scrollTo","overflow","viewport","head","property","hasProperty","cleanupViewport","part","Fullscreen","prefix","native","webkitEnterFullscreen","requestFullscreen","webkitExitFullscreen","action","cancelFullScreen","exit","enter","fullscreenElement","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","pre","loadImage","minWidth","image","Image","handler","onload","onerror","naturalWidth","addStyleHook","build","checkPlaying","ready","setTitle","setPoster","togglePoster","enable","backgroundImage","backgroundSize","toggleControls","checkLoading","clearTimeout","timers","controls$$1","recentTouchSeek","lastSeekTime","Date","now","Listeners","lastKey","focusTimer","lastKeyDown","handleKey","setTabFocus","firstTouch","code","repeat","altKey","ctrlKey","metaKey","togglePlay","increaseVolume","decreaseVolume","forward","toggleCaptions","timeStamp","wasKeyDown","delay","hasAudio","initialized","managerPromise","isAudio","ended","proxyEvents","_event$detail","defaultHandler","customHandlerKey","customHandler","hasCustomHandler","returned","proxy","inputEvent","rect","currentTarget","hasAttribute","seekTo","webkitDirectionInvertedFromDevice","_map","deltaX","deltaY","_map2","direction","sign","abs","self","loadjs_umd","devnull","bundleIdCache","bundleResultCache","bundleCallbackQueue","publish","bundleId","pathsNotFound","q","splice","executeCallbacks","depsNotFound","success","loadFile","callbackFn","numTries","isCss","doc","async","maxTries","numRetries","beforeCallbackFn","before","pathStripped","rel","onbeforeload","ev","sheet","cssText","defaultPrevented","loadjs","paths","arg1","arg2","fn","numWaiting","loadFiles","deps","bundleIds","r","subscribe","isDefined","factory","loadScript","assurePlaybackState","hasPlayed","setAspectRatio","Vimeo","_split$map","_split$map2","padding","paddingBottom","offset","transform","byline","portrait","transparent","gesture","$2","thumbnail_large","pathname","Player","disableTextTrack","stop","restorePause","setVolume","setCurrentTime","setPlaybackRate","name","currentSrc","setLoop","getVideoUrl","getVideoWidth","getVideoHeight","dimensions","getRatio","w","h","setAutopause","state","getVideoTitle","getCurrentTime","getDuration","getTextTracks","_ref$cues","strippedCues","fragment","createDocumentFragment","firstChild","getPaused","frame","seconds","_vimeo$ratio$split$ma","_vimeo$ratio$split$ma2","dimension","assurePlaybackState$1","YT","onYouTubeReadyCallbacks","onYouTubeIframeAPIReady","getTitle","videoId","getVideoData","_this$embed$getVideoD","items","snippet","currentId","posterSrc","playerVars","hl","showinfo","iv_load_policy","modestbranding","disablekb","widget_referrer","cc_load_policy","cc_lang_pref","onError","message","2","5","100","101","150","onPlaybackRateChange","playbackRate","getPlaybackRate","onReady","playVideo","pauseVideo","stopVideo","getAvailablePlaybackRates","clearInterval","buffering","setInterval","getVideoLoadedFraction","lastBuffered","onStateChange","seeked","unMute","Ads","displayContainer","manager","loader","cuePoints","safetyTimer","countdownTimer","ima","trigger","startSafetyTimer","clearSafetyTimer","setupIMA","setVpaidMode","ImaSdkSettings","VpaidMode","ENABLED","setLocale","AdDisplayContainer","requestAds","AdsLoader","AdsManagerLoadedEvent","Type","ADS_MANAGER_LOADED","onAdsManagerLoaded","AdErrorEvent","AD_ERROR","onAdError","AdsRequest","adTagUrl","tagUrl","linearAdSlotWidth","offsetWidth","linearAdSlotHeight","nonLinearAdSlotWidth","nonLinearAdSlotHeight","forceNonLinearFullSlot","setAdWillPlayMuted","getRemainingTime","AdsRenderingSettings","restoreCustomPlaybackStateOnAdBreakComplete","enablePreloading","getAdsManager","getCuePoints","cuePoint","seekElement","cuePercentage","AdEvent","onAdEvent","ad","getAd","LOADED","pollCountdown","isLinear","ALL_ADS_COMPLETED","loadAds","CONTENT_PAUSE_REQUESTED","pauseContent","CONTENT_RESUME_REQUESTED","resumeContent","STARTED","MIDPOINT","COMPLETE","IMPRESSION","CLICK","cancel","contentComplete","seekedTime","discardAdBreak","resize","ViewMode","NORMAL","initialize","init","adError","zIndex","destroy","_this11","handlers","_this12","AV_PUBLISHERID","AV_CHANNELID","AV_URL","cb","AV_WIDTH","AV_HEIGHT","AV_CDIM2","insertElements","attribute","change","_sources","_sources$","_sources$$provider","tagName","crossorigin","Plyr","failed","jQuery","original","getProviderByUrl","search","truthy","searchParams","webkitShowPlaybackTargetPicker","isHidden","hiding","eventName","soft","unload","inputIsValid","fauxDuration","realDuration","Infinity","mozHasAudio","webkitAudioDecodedByteCount","audioTracks","updateStorage","prev","curr","closest","requestPictureInPicture","exitPictureInPicture","webkitPresentationMode","pictureInPictureElement","inline","t","ENTER","ESC","F1","F12","LEFT","RIGHT","autoReset","basic","closable","closableByDimmer","frameless","maintainFocus","maximizable","modal","movable","moveBounded","pinnable","pinned","preventBodyShift","resizable","startMaximized","notifier","closeButton","glossary","ok","acccpt","deny","confirm","decline","close","maximize","theme","openDialogs","addClass","removeClass","toBeRemoved","isRightToLeft","getComputedStyle","getScrollTop","scrollTop","getScrollLeft","scrollLeft","clearContents","copy","cpy","getTime","ignoreCase","multiline","lastIndex","prop","hasOwnProperty","destruct","root","__settings","__init","__internal","el","useCapture","attachEvent","detachEvent","animation","OAnimation","msAnimation","MozAnimation","WebkitAnimation","delegate","context","createCloseEvent","eventType","dialog","usedKeys","tabindex","isSafari","templates","dimmer","commands","header","footer","primary","auxiliary","resizeHandle","classes","animationIn","animationOut","base","fixed","maximized","modeless","noSelection","noOverflow","noPadding","pin","shake","unpinned","select","hooks","buttonsDefinition","ref","internal","isOpen","timerIn","timerOut","onshow","onclosing","onclose","onfocus","onmove","onmoved","onresize","onresized","onmaximize","onmaximized","onrestore","onrestored","resetHandler","beginMoveHandler","beginResizeHandler","bringToFrontHandler","modalClickHandler","buttonsClickHandler","commandsClickHandler","transitionInHandler","transitionOutHandler","buttonTemplate","attrs","scope","opKey","onReset","beginMove","beginResize","bringToFront","handleTransitionInEvent","handleTransitionOutEvent","alertify","restoreScrollPosition","ensureNoOverflow","requiresNoOverflow","isModal","isMaximized","top","topScroll","add","clientHeight","optionUpdated","option","oldValue","newValue","setHeader","unbindModelessEvents","updateAbsPositionFix","bindModelessEvents","updateDisplayMode","updateBasicMode","updateFramelessMode","removeAbsPositionFix","addAbsPositionFix","updatePinned","bindClosableEvents","unbindClosableEvents","updateClosable","updateMaximizable","updatePinnable","bindMovableEvents","resetMove","unbindMovableEvents","updateMovable","bindResizableEvents","resetResize","unbindResizableEvents","updateResizable","updateTransition","onupdate","old","op","found","triggerClose","triggerCallback","invokeOnClose","srcElement","isPinned","unpin","marginTop","marginLeft","marginRight","cancelClick","modalClickHandlerTS","callbackTS","cancelKeyup","idx","closeEvent","keyupHandler","keydownHandler","resetTarget","lastResetElement","offsetX","offsetY","xProp","yProp","bounds","refreshTop","moveDelegate","moveElement","moveElementBounded","maxLeft","minLeft","maxTop","minTop","eventSrc","targetTouches","offsetLeft","offsetTop","offsetParent","move","endMove","startingLeft","Nan","startingWidth","handleOffset","minHeight","maxWidth","pageRelative","X","Y","pageY","clientX","clientY","isRTL","diff","resizeElement","endResize","windowResize","moveTo","resizeTo","regex","clientWidth","k","o","n","settingUpdated","HTMLElement","setContent","showModal","prepare","closeOthers","closeAll","openInstances","right","bottom","center","updatePosition","div","clickDelegate","dismiss","transitionDone","clearTimers","timer","transitionTimeout","_content","_wait","pushed","wait","clickHandler","ondismiss","clicked","transitionEndHandler","dismissOthers","dismissAll","except","dialogs","sub","get_dialog","Factory","transient","definition","register","notify","warning","main","_title","_message","_onok","onok","setMessage","returnValue","autoConfirm","task","clearAutoConfirm","startAutoConfirm","_oncancel","oncancel","defaultFocus","reverseButtons","autoOk","autoCancel","p","_value","containers","getElementsByClassName","shr","count","classname","anyContainerContains","remove","players","_loop","sourceIndex","j","classString","nextSource","currentType","hash","historySupport","history","pushState","newSource","parentElement","cite","replaceState","videoSourceMap","str","playPromise"],"mappings":"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","file":"player.min.js","sourcesContent":["typeof navigator === \"object\" && (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define('Plyr', factory) :\n  (global.Plyr = factory());\n}(this, (function () { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n\n  // ==========================================================================\n  // Type checking utils\n  // ==========================================================================\n  var getConstructor = function getConstructor(input) {\n    return input !== null && typeof input !== 'undefined' ? input.constructor : null;\n  };\n\n  var instanceOf = function instanceOf(input, constructor) {\n    return Boolean(input && constructor && input instanceof constructor);\n  };\n\n  var isNullOrUndefined = function isNullOrUndefined(input) {\n    return input === null || typeof input === 'undefined';\n  };\n\n  var isObject = function isObject(input) {\n    return getConstructor(input) === Object;\n  };\n\n  var isNumber = function isNumber(input) {\n    return getConstructor(input) === Number && !Number.isNaN(input);\n  };\n\n  var isString = function isString(input) {\n    return getConstructor(input) === String;\n  };\n\n  var isBoolean = function isBoolean(input) {\n    return getConstructor(input) === Boolean;\n  };\n\n  var isFunction = function isFunction(input) {\n    return getConstructor(input) === Function;\n  };\n\n  var isArray = function isArray(input) {\n    return Array.isArray(input);\n  };\n\n  var isWeakMap = function isWeakMap(input) {\n    return instanceOf(input, WeakMap);\n  };\n\n  var isNodeList = function isNodeList(input) {\n    return instanceOf(input, NodeList);\n  };\n\n  var isElement = function isElement(input) {\n    return instanceOf(input, Element);\n  };\n\n  var isTextNode = function isTextNode(input) {\n    return getConstructor(input) === Text;\n  };\n\n  var isEvent = function isEvent(input) {\n    return instanceOf(input, Event);\n  };\n\n  var isKeyboardEvent = function isKeyboardEvent(input) {\n    return instanceOf(input, KeyboardEvent);\n  };\n\n  var isCue = function isCue(input) {\n    return instanceOf(input, window.TextTrackCue) || instanceOf(input, window.VTTCue);\n  };\n\n  var isTrack = function isTrack(input) {\n    return instanceOf(input, TextTrack) || !isNullOrUndefined(input) && isString(input.kind);\n  };\n\n  var isEmpty = function isEmpty(input) {\n    return isNullOrUndefined(input) || (isString(input) || isArray(input) || isNodeList(input)) && !input.length || isObject(input) && !Object.keys(input).length;\n  };\n\n  var isUrl = function isUrl(input) {\n    // Accept a URL object\n    if (instanceOf(input, window.URL)) {\n      return true;\n    } // Must be string from here\n\n\n    if (!isString(input)) {\n      return false;\n    } // Add the protocol if required\n\n\n    var string = input;\n\n    if (!input.startsWith('http://') || !input.startsWith('https://')) {\n      string = \"http://\".concat(input);\n    }\n\n    try {\n      return !isEmpty(new URL(string).hostname);\n    } catch (e) {\n      return false;\n    }\n  };\n\n  var is = {\n    nullOrUndefined: isNullOrUndefined,\n    object: isObject,\n    number: isNumber,\n    string: isString,\n    boolean: isBoolean,\n    function: isFunction,\n    array: isArray,\n    weakMap: isWeakMap,\n    nodeList: isNodeList,\n    element: isElement,\n    textNode: isTextNode,\n    event: isEvent,\n    keyboardEvent: isKeyboardEvent,\n    cue: isCue,\n    track: isTrack,\n    url: isUrl,\n    empty: isEmpty\n  };\n\n  // ==========================================================================\n  // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n  // https://www.youtube.com/watch?v=NPM6172J22g\n\n  var supportsPassiveListeners = function () {\n    // Test via a getter in the options object to see if the passive property is accessed\n    var supported = false;\n\n    try {\n      var options = Object.defineProperty({}, 'passive', {\n        get: function get() {\n          supported = true;\n          return null;\n        }\n      });\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    } catch (e) {// Do nothing\n    }\n\n    return supported;\n  }(); // Toggle event listener\n\n\n  function toggleListener(element, event, callback) {\n    var _this = this;\n\n    var toggle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var passive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var capture = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n    // Bail if no element, event, or callback\n    if (!element || !('addEventListener' in element) || is.empty(event) || !is.function(callback)) {\n      return;\n    } // Allow multiple events\n\n\n    var events = event.split(' '); // Build options\n    // Default to just the capture boolean for browsers with no passive listener support\n\n    var options = capture; // If passive events listeners are supported\n\n    if (supportsPassiveListeners) {\n      options = {\n        // Whether the listener can be passive (i.e. default never prevented)\n        passive: passive,\n        // Whether the listener is a capturing listener or not\n        capture: capture\n      };\n    } // If a single node is passed, bind the event listener\n\n\n    events.forEach(function (type) {\n      if (_this && _this.eventListeners && toggle) {\n        // Cache event listener\n        _this.eventListeners.push({\n          element: element,\n          type: type,\n          callback: callback,\n          options: options\n        });\n      }\n\n      element[toggle ? 'addEventListener' : 'removeEventListener'](type, callback, options);\n    });\n  } // Bind event handler\n\n  function on(element) {\n    var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var callback = arguments.length > 2 ? arguments[2] : undefined;\n    var passive = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var capture = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    toggleListener.call(this, element, events, callback, true, passive, capture);\n  } // Unbind event handler\n\n  function off(element) {\n    var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var callback = arguments.length > 2 ? arguments[2] : undefined;\n    var passive = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var capture = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    toggleListener.call(this, element, events, callback, false, passive, capture);\n  } // Bind once-only event handler\n\n  function once(element) {\n    var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var callback = arguments.length > 2 ? arguments[2] : undefined;\n    var passive = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var capture = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n    function onceCallback() {\n      off(element, events, onceCallback, passive, capture);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      callback.apply(this, args);\n    }\n\n    toggleListener.call(this, element, events, onceCallback, true, passive, capture);\n  } // Trigger event\n\n  function triggerEvent(element) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var bubbles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var detail = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    // Bail if no element\n    if (!is.element(element) || is.empty(type)) {\n      return;\n    } // Create and dispatch the event\n\n\n    var event = new CustomEvent(type, {\n      bubbles: bubbles,\n      detail: Object.assign({}, detail, {\n        plyr: this\n      })\n    }); // Dispatch the event\n\n    element.dispatchEvent(event);\n  } // Unbind all cached event listeners\n\n  function unbindListeners() {\n    if (this && this.eventListeners) {\n      this.eventListeners.forEach(function (item) {\n        var element = item.element,\n            type = item.type,\n            callback = item.callback,\n            options = item.options;\n        element.removeEventListener(type, callback, options);\n      });\n      this.eventListeners = [];\n    }\n  } // Run method when / if player is ready\n\n  function ready() {\n    var _this2 = this;\n\n    return new Promise(function (resolve) {\n      return _this2.ready ? setTimeout(resolve, 0) : on.call(_this2, _this2.elements.container, 'ready', resolve);\n    }).then(function () {});\n  }\n\n  function wrap(elements, wrapper) {\n    // Convert `elements` to an array, if necessary.\n    var targets = elements.length ? elements : [elements]; // Loops backwards to prevent having to clone the wrapper on the\n    // first element (see `child` below).\n\n    Array.from(targets).reverse().forEach(function (element, index) {\n      var child = index > 0 ? wrapper.cloneNode(true) : wrapper; // Cache the current parent and sibling.\n\n      var parent = element.parentNode;\n      var sibling = element.nextSibling; // Wrap the element (is automatically removed from its current\n      // parent).\n\n      child.appendChild(element); // If the element had a sibling, insert the wrapper before\n      // the sibling to maintain the HTML structure; otherwise, just\n      // append it to the parent.\n\n      if (sibling) {\n        parent.insertBefore(child, sibling);\n      } else {\n        parent.appendChild(child);\n      }\n    });\n  } // Set attributes\n\n  function setAttributes(element, attributes) {\n    if (!is.element(element) || is.empty(attributes)) {\n      return;\n    } // Assume null and undefined attributes should be left out,\n    // Setting them would otherwise convert them to \"null\" and \"undefined\"\n\n\n    Object.entries(attributes).filter(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          value = _ref2[1];\n\n      return !is.nullOrUndefined(value);\n    }).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      return element.setAttribute(key, value);\n    });\n  } // Create a DocumentFragment\n\n  function createElement(type, attributes, text) {\n    // Create a new <element>\n    var element = document.createElement(type); // Set all passed attributes\n\n    if (is.object(attributes)) {\n      setAttributes(element, attributes);\n    } // Add text node\n\n\n    if (is.string(text)) {\n      element.innerText = text;\n    } // Return built element\n\n\n    return element;\n  } // Inaert an element after another\n\n  function insertAfter(element, target) {\n    if (!is.element(element) || !is.element(target)) {\n      return;\n    }\n\n    target.parentNode.insertBefore(element, target.nextSibling);\n  } // Insert a DocumentFragment\n\n  function insertElement(type, parent, attributes, text) {\n    if (!is.element(parent)) {\n      return;\n    }\n\n    parent.appendChild(createElement(type, attributes, text));\n  } // Remove element(s)\n\n  function removeElement(element) {\n    if (is.nodeList(element) || is.array(element)) {\n      Array.from(element).forEach(removeElement);\n      return;\n    }\n\n    if (!is.element(element) || !is.element(element.parentNode)) {\n      return;\n    }\n\n    element.parentNode.removeChild(element);\n  } // Remove all child elements\n\n  function emptyElement(element) {\n    if (!is.element(element)) {\n      return;\n    }\n\n    var length = element.childNodes.length;\n\n    while (length > 0) {\n      element.removeChild(element.lastChild);\n      length -= 1;\n    }\n  } // Replace element\n\n  function replaceElement(newChild, oldChild) {\n    if (!is.element(oldChild) || !is.element(oldChild.parentNode) || !is.element(newChild)) {\n      return null;\n    }\n\n    oldChild.parentNode.replaceChild(newChild, oldChild);\n    return newChild;\n  } // Get an attribute object from a string selector\n\n  function getAttributesFromSelector(sel, existingAttributes) {\n    // For example:\n    // '.test' to { class: 'test' }\n    // '#test' to { id: 'test' }\n    // '[data-test=\"test\"]' to { 'data-test': 'test' }\n    if (!is.string(sel) || is.empty(sel)) {\n      return {};\n    }\n\n    var attributes = {};\n    var existing = existingAttributes;\n    sel.split(',').forEach(function (s) {\n      // Remove whitespace\n      var selector = s.trim();\n      var className = selector.replace('.', '');\n      var stripped = selector.replace(/[[\\]]/g, ''); // Get the parts and value\n\n      var parts = stripped.split('=');\n      var key = parts[0];\n      var value = parts.length > 1 ? parts[1].replace(/[\"']/g, '') : ''; // Get the first character\n\n      var start = selector.charAt(0);\n\n      switch (start) {\n        case '.':\n          // Add to existing classname\n          if (is.object(existing) && is.string(existing.class)) {\n            existing.class += \" \".concat(className);\n          }\n\n          attributes.class = className;\n          break;\n\n        case '#':\n          // ID selector\n          attributes.id = selector.replace('#', '');\n          break;\n\n        case '[':\n          // Attribute selector\n          attributes[key] = value;\n          break;\n\n        default:\n          break;\n      }\n    });\n    return attributes;\n  } // Toggle hidden\n\n  function toggleHidden(element, hidden) {\n    if (!is.element(element)) {\n      return;\n    }\n\n    var hide = hidden;\n\n    if (!is.boolean(hide)) {\n      hide = !element.hidden;\n    }\n\n    if (hide) {\n      element.setAttribute('hidden', '');\n    } else {\n      element.removeAttribute('hidden');\n    }\n  } // Mirror Element.classList.toggle, with IE compatibility for \"force\" argument\n\n  function toggleClass(element, className, force) {\n    if (is.nodeList(element)) {\n      return Array.from(element).map(function (e) {\n        return toggleClass(e, className, force);\n      });\n    }\n\n    if (is.element(element)) {\n      var method = 'toggle';\n\n      if (typeof force !== 'undefined') {\n        method = force ? 'add' : 'remove';\n      }\n\n      element.classList[method](className);\n      return element.classList.contains(className);\n    }\n\n    return false;\n  } // Has class name\n\n  function hasClass(element, className) {\n    return is.element(element) && element.classList.contains(className);\n  } // Element matches selector\n\n  function matches(element, selector) {\n\n    function match() {\n      return Array.from(document.querySelectorAll(selector)).includes(this);\n    }\n\n    var matches = match;\n    return matches.call(element, selector);\n  } // Find all elements\n\n  function getElements(selector) {\n    return this.elements.container.querySelectorAll(selector);\n  } // Find a single element\n\n  function getElement(selector) {\n    return this.elements.container.querySelector(selector);\n  } // Trap focus inside container\n\n  function trapFocus() {\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var toggle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!is.element(element)) {\n      return;\n    }\n\n    var focusable = getElements.call(this, 'button:not(:disabled), input:not(:disabled), [tabindex]');\n    var first = focusable[0];\n    var last = focusable[focusable.length - 1];\n\n    var trap = function trap(event) {\n      // Bail if not tab key or not fullscreen\n      if (event.key !== 'Tab' || event.keyCode !== 9) {\n        return;\n      } // Get the current focused element\n\n\n      var focused = document.activeElement;\n\n      if (focused === last && !event.shiftKey) {\n        // Move focus to first element that can be tabbed if Shift isn't used\n        first.focus();\n        event.preventDefault();\n      } else if (focused === first && event.shiftKey) {\n        // Move focus to last element that can be tabbed if Shift is used\n        last.focus();\n        event.preventDefault();\n      }\n    };\n\n    toggleListener.call(this, this.elements.container, 'keydown', trap, toggle, false);\n  } // Set focus and tab focus class\n\n  function setFocus() {\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var tabFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!is.element(element)) {\n      return;\n    } // Set regular focus\n\n\n    element.focus({\n      preventScroll: true\n    }); // If we want to mimic keyboard focus via tab\n\n    if (tabFocus) {\n      toggleClass(element, this.config.classNames.tabFocus);\n    }\n  }\n\n  // ==========================================================================\n  var transitionEndEvent = function () {\n    var element = document.createElement('span');\n    var events = {\n      WebkitTransition: 'webkitTransitionEnd',\n      MozTransition: 'transitionend',\n      OTransition: 'oTransitionEnd otransitionend',\n      transition: 'transitionend'\n    };\n    var type = Object.keys(events).find(function (event) {\n      return element.style[event] !== undefined;\n    });\n    return is.string(type) ? events[type] : false;\n  }(); // Force repaint of element\n\n  function repaint(element) {\n    setTimeout(function () {\n      try {\n        toggleHidden(element, true);\n        element.offsetHeight; // eslint-disable-line\n\n        toggleHidden(element, false);\n      } catch (e) {// Do nothing\n      }\n    }, 0);\n  }\n\n  // ==========================================================================\n  // Browser sniffing\n  // Unfortunately, due to mixed support, UA sniffing is required\n  // ==========================================================================\n  var browser = {\n    isIE:\n    /* @cc_on!@ */\n    !!document.documentMode,\n    isWebkit: 'WebkitAppearance' in document.documentElement.style && !/Edge/.test(navigator.userAgent),\n    isIPhone: /(iPhone|iPod)/gi.test(navigator.platform),\n    isIos: /(iPad|iPhone|iPod)/gi.test(navigator.platform)\n  };\n\n  var defaultCodecs = {\n    'audio/ogg': 'vorbis',\n    'audio/wav': '1',\n    'video/webm': 'vp8, vorbis',\n    'video/mp4': 'avc1.42E01E, mp4a.40.2',\n    'video/ogg': 'theora'\n  }; // Check for feature support\n\n  var support = {\n    // Basic support\n    audio: 'canPlayType' in document.createElement('audio'),\n    video: 'canPlayType' in document.createElement('video'),\n    // Check for support\n    // Basic functionality vs full UI\n    check: function check(type, provider, playsinline) {\n      var canPlayInline = browser.isIPhone && playsinline && support.playsinline;\n      var api = support[type] || provider !== 'html5';\n      var ui = api && support.rangeInput && (type !== 'video' || !browser.isIPhone || canPlayInline);\n      return {\n        api: api,\n        ui: ui\n      };\n    },\n    // Picture-in-picture support\n    // Safari & Chrome only currently\n    pip: function () {\n      if (browser.isIPhone) {\n        return false;\n      } // Safari\n      // https://developer.apple.com/documentation/webkitjs/adding_picture_in_picture_to_your_safari_media_controls\n\n\n      if (is.function(createElement('video').webkitSetPresentationMode)) {\n        return true;\n      } // Chrome\n      // https://developers.google.com/web/updates/2018/10/watch-video-using-picture-in-picture\n\n\n      if (document.pictureInPictureEnabled && !createElement('video').disablePictureInPicture) {\n        return true;\n      }\n\n      return false;\n    }(),\n    // Airplay support\n    // Safari only currently\n    airplay: is.function(window.WebKitPlaybackTargetAvailabilityEvent),\n    // Inline playback support\n    // https://webkit.org/blog/6784/new-video-policies-for-ios/\n    playsinline: 'playsInline' in document.createElement('video'),\n    // Check for mime type support against a player instance\n    // Credits: http://diveintohtml5.info/everything.html\n    // Related: http://www.leanbackplayer.com/test/h5mt.html\n    mime: function mime(inputType) {\n      var _inputType$split = inputType.split('/'),\n          _inputType$split2 = _slicedToArray(_inputType$split, 1),\n          mediaType = _inputType$split2[0];\n\n      var type = inputType; // Verify we're using HTML5 and there's no media type mismatch\n\n      if (!this.isHTML5 || mediaType !== this.type) {\n        return false;\n      } // Add codec if required\n\n\n      if (Object.keys(defaultCodecs).includes(type)) {\n        type += \"; codecs=\\\"\".concat(defaultCodecs[inputType], \"\\\"\");\n      }\n\n      try {\n        return Boolean(type && this.media.canPlayType(type).replace(/no/, ''));\n      } catch (e) {\n        return false;\n      }\n    },\n    // Check for textTracks support\n    textTracks: 'textTracks' in document.createElement('video'),\n    // <input type=\"range\"> Sliders\n    rangeInput: function () {\n      var range = document.createElement('input');\n      range.type = 'range';\n      return range.type === 'range';\n    }(),\n    // Touch\n    // NOTE: Remember a device can be mouse + touch enabled so we check on first touch event\n    touch: 'ontouchstart' in document.documentElement,\n    // Detect transitions support\n    transitions: transitionEndEvent !== false,\n    // Reduced motion iOS & MacOS setting\n    // https://webkit.org/blog/7551/responsive-design-for-motion/\n    reducedMotion: 'matchMedia' in window && window.matchMedia('(prefers-reduced-motion)').matches\n  };\n\n  // ==========================================================================\n  var html5 = {\n    getSources: function getSources() {\n      var _this = this;\n\n      if (!this.isHTML5) {\n        return [];\n      }\n\n      var sources = Array.from(this.media.querySelectorAll('source')); // Filter out unsupported sources\n\n      return sources.filter(function (source) {\n        return support.mime.call(_this, source.getAttribute('type'));\n      });\n    },\n    // Get quality levels\n    getQualityOptions: function getQualityOptions() {\n      // Get sizes from <source> elements\n      return html5.getSources.call(this).map(function (source) {\n        return Number(source.getAttribute('size'));\n      }).filter(Boolean);\n    },\n    extend: function extend() {\n      if (!this.isHTML5) {\n        return;\n      }\n\n      var player = this; // Quality\n\n      Object.defineProperty(player.media, 'quality', {\n        get: function get() {\n          // Get sources\n          var sources = html5.getSources.call(player);\n          var source = sources.find(function (source) {\n            return source.getAttribute('src') === player.source;\n          }); // Return size, if match is found\n\n          return source && Number(source.getAttribute('size'));\n        },\n        set: function set(input) {\n          // Get sources\n          var sources = html5.getSources.call(player); // Get first match for requested size\n\n          var source = sources.find(function (source) {\n            return Number(source.getAttribute('size')) === input;\n          }); // No matching source found\n\n          if (!source) {\n            return;\n          } // Get current state\n\n\n          var _player$media = player.media,\n              currentTime = _player$media.currentTime,\n              paused = _player$media.paused,\n              preload = _player$media.preload,\n              readyState = _player$media.readyState; // Set new source\n\n          player.media.src = source.getAttribute('src'); // Prevent loading if preload=\"none\" and the current source isn't loaded (#1044)\n\n          if (preload !== 'none' || readyState) {\n            // Restore time\n            player.once('loadedmetadata', function () {\n              player.currentTime = currentTime; // Resume playing\n\n              if (!paused) {\n                player.play();\n              }\n            }); // Load new source\n\n            player.media.load();\n          } // Trigger change event\n\n\n          triggerEvent.call(player, player.media, 'qualitychange', false, {\n            quality: input\n          });\n        }\n      });\n    },\n    // Cancel current network requests\n    // See https://github.com/sampotts/plyr/issues/174\n    cancelRequests: function cancelRequests() {\n      if (!this.isHTML5) {\n        return;\n      } // Remove child sources\n\n\n      removeElement(html5.getSources.call(this)); // Set blank video src attribute\n      // This is to prevent a MEDIA_ERR_SRC_NOT_SUPPORTED error\n      // Info: http://stackoverflow.com/questions/32231579/how-to-properly-dispose-of-an-html5-video-and-close-socket-or-connection\n\n      this.media.setAttribute('src', this.config.blankVideo); // Load the new empty source\n      // This will cancel existing requests\n      // See https://github.com/sampotts/plyr/issues/174\n\n      this.media.load(); // Debugging\n\n      this.debug.log('Cancelled network requests');\n    }\n  };\n\n  // ==========================================================================\n\n  function dedupe(array) {\n    if (!is.array(array)) {\n      return array;\n    }\n\n    return array.filter(function (item, index) {\n      return array.indexOf(item) === index;\n    });\n  } // Get the closest value in an array\n\n  function closest(array, value) {\n    if (!is.array(array) || !array.length) {\n      return null;\n    }\n\n    return array.reduce(function (prev, curr) {\n      return Math.abs(curr - value) < Math.abs(prev - value) ? curr : prev;\n    });\n  }\n\n  function cloneDeep(object) {\n    return JSON.parse(JSON.stringify(object));\n  } // Get a nested value in an object\n\n  function getDeep(object, path) {\n    return path.split('.').reduce(function (obj, key) {\n      return obj && obj[key];\n    }, object);\n  } // Deep extend destination object with N more objects\n\n  function extend() {\n    var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n\n    if (!sources.length) {\n      return target;\n    }\n\n    var source = sources.shift();\n\n    if (!is.object(source)) {\n      return target;\n    }\n\n    Object.keys(source).forEach(function (key) {\n      if (is.object(source[key])) {\n        if (!Object.keys(target).includes(key)) {\n          Object.assign(target, _defineProperty({}, key, {}));\n        }\n\n        extend(target[key], source[key]);\n      } else {\n        Object.assign(target, _defineProperty({}, key, source[key]));\n      }\n    });\n    return extend.apply(void 0, [target].concat(sources));\n  }\n\n  // ==========================================================================\n\n  function generateId(prefix) {\n    return \"\".concat(prefix, \"-\").concat(Math.floor(Math.random() * 10000));\n  } // Format string\n\n  function format(input) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (is.empty(input)) {\n      return input;\n    }\n\n    return input.toString().replace(/{(\\d+)}/g, function (match, i) {\n      return args[i].toString();\n    });\n  } // Get percentage\n\n  function getPercentage(current, max) {\n    if (current === 0 || max === 0 || Number.isNaN(current) || Number.isNaN(max)) {\n      return 0;\n    }\n\n    return (current / max * 100).toFixed(2);\n  } // Replace all occurances of a string in a string\n\n  function replaceAll() {\n    var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var find = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var replace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    return input.replace(new RegExp(find.toString().replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1'), 'g'), replace.toString());\n  } // Convert to title case\n\n  function toTitleCase() {\n    var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return input.toString().replace(/\\w\\S*/g, function (text) {\n      return text.charAt(0).toUpperCase() + text.substr(1).toLowerCase();\n    });\n  } // Convert string to pascalCase\n\n  function toPascalCase() {\n    var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var string = input.toString(); // Convert kebab case\n\n    string = replaceAll(string, '-', ' '); // Convert snake case\n\n    string = replaceAll(string, '_', ' '); // Convert to title case\n\n    string = toTitleCase(string); // Convert to pascal case\n\n    return replaceAll(string, ' ', '');\n  } // Convert string to pascalCase\n\n  function toCamelCase() {\n    var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var string = input.toString(); // Convert to pascal case\n\n    string = toPascalCase(string); // Convert first character to lowercase\n\n    return string.charAt(0).toLowerCase() + string.slice(1);\n  } // Remove HTML from a string\n\n  function stripHTML(source) {\n    var fragment = document.createDocumentFragment();\n    var element = document.createElement('div');\n    fragment.appendChild(element);\n    element.innerHTML = source;\n    return fragment.firstChild.innerText;\n  } // Like outerHTML, but also works for DocumentFragment\n\n  function getHTML(element) {\n    var wrapper = document.createElement('div');\n    wrapper.appendChild(element);\n    return wrapper.innerHTML;\n  }\n\n  var resources = {\n    pip: 'PIP',\n    airplay: 'AirPlay',\n    html5: 'HTML5',\n    vimeo: 'Vimeo',\n    youtube: 'YouTube'\n  };\n  var i18n = {\n    get: function get() {\n      var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (is.empty(key) || is.empty(config)) {\n        return '';\n      }\n\n      var string = getDeep(config.i18n, key);\n\n      if (is.empty(string)) {\n        if (Object.keys(resources).includes(key)) {\n          return resources[key];\n        }\n\n        return '';\n      }\n\n      var replace = {\n        '{seektime}': config.seekTime,\n        '{title}': config.title\n      };\n      Object.entries(replace).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        string = replaceAll(string, key, value);\n      });\n      return string;\n    }\n  };\n\n  var Storage =\n  /*#__PURE__*/\n  function () {\n    function Storage(player) {\n      _classCallCheck(this, Storage);\n\n      this.enabled = player.config.storage.enabled;\n      this.key = player.config.storage.key;\n    } // Check for actual support (see if we can use it)\n\n\n    _createClass(Storage, [{\n      key: \"get\",\n      value: function get(key) {\n        if (!Storage.supported || !this.enabled) {\n          return null;\n        }\n\n        var store = window.localStorage.getItem(this.key);\n\n        if (is.empty(store)) {\n          return null;\n        }\n\n        var json = JSON.parse(store);\n        return is.string(key) && key.length ? json[key] : json;\n      }\n    }, {\n      key: \"set\",\n      value: function set(object) {\n        // Bail if we don't have localStorage support or it's disabled\n        if (!Storage.supported || !this.enabled) {\n          return;\n        } // Can only store objectst\n\n\n        if (!is.object(object)) {\n          return;\n        } // Get current storage\n\n\n        var storage = this.get(); // Default to empty object\n\n        if (is.empty(storage)) {\n          storage = {};\n        } // Update the working copy of the values\n\n\n        extend(storage, object); // Update storage\n\n        window.localStorage.setItem(this.key, JSON.stringify(storage));\n      }\n    }], [{\n      key: \"supported\",\n      get: function get() {\n        try {\n          if (!('localStorage' in window)) {\n            return false;\n          }\n\n          var test = '___test'; // Try to use it (it might be disabled, e.g. user is in private mode)\n          // see: https://github.com/sampotts/plyr/issues/131\n\n          window.localStorage.setItem(test, test);\n          window.localStorage.removeItem(test);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      }\n    }]);\n\n    return Storage;\n  }();\n\n  // ==========================================================================\n  // Fetch wrapper\n  // Using XHR to avoid issues with older browsers\n  // ==========================================================================\n  function fetch(url) {\n    var responseType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'text';\n    return new Promise(function (resolve, reject) {\n      try {\n        var request = new XMLHttpRequest(); // Check for CORS support\n\n        if (!('withCredentials' in request)) {\n          return;\n        }\n\n        request.addEventListener('load', function () {\n          if (responseType === 'text') {\n            try {\n              resolve(JSON.parse(request.responseText));\n            } catch (e) {\n              resolve(request.responseText);\n            }\n          } else {\n            resolve(request.response);\n          }\n        });\n        request.addEventListener('error', function () {\n          throw new Error(request.status);\n        });\n        request.open('GET', url, true); // Set the required response type\n\n        request.responseType = responseType;\n        request.send();\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  // ==========================================================================\n\n  function loadSprite(url, id) {\n    if (!is.string(url)) {\n      return;\n    }\n\n    var prefix = 'cache';\n    var hasId = is.string(id);\n    var isCached = false;\n\n    var exists = function exists() {\n      return document.getElementById(id) !== null;\n    };\n\n    var update = function update(container, data) {\n      container.innerHTML = data; // Check again incase of race condition\n\n      if (hasId && exists()) {\n        return;\n      } // Inject the SVG to the body\n\n\n      document.body.insertAdjacentElement('afterbegin', container);\n    }; // Only load once if ID set\n\n\n    if (!hasId || !exists()) {\n      var useStorage = Storage.supported; // Create container\n\n      var container = document.createElement('div');\n      container.setAttribute('hidden', '');\n\n      if (hasId) {\n        container.setAttribute('id', id);\n      } // Check in cache\n\n\n      if (useStorage) {\n        var cached = window.localStorage.getItem(\"\".concat(prefix, \"-\").concat(id));\n        isCached = cached !== null;\n\n        if (isCached) {\n          var data = JSON.parse(cached);\n          update(container, data.content);\n        }\n      } // Get the sprite\n\n\n      fetch(url).then(function (result) {\n        if (is.empty(result)) {\n          return;\n        }\n\n        if (useStorage) {\n          window.localStorage.setItem(\"\".concat(prefix, \"-\").concat(id), JSON.stringify({\n            content: result\n          }));\n        }\n\n        update(container, result);\n      }).catch(function () {});\n    }\n  }\n\n  // ==========================================================================\n\n  var getHours = function getHours(value) {\n    return parseInt(value / 60 / 60 % 60, 10);\n  };\n  var getMinutes = function getMinutes(value) {\n    return parseInt(value / 60 % 60, 10);\n  };\n  var getSeconds = function getSeconds(value) {\n    return parseInt(value % 60, 10);\n  }; // Format time to UI friendly string\n\n  function formatTime() {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var displayHours = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var inverted = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    // Bail if the value isn't a number\n    if (!is.number(time)) {\n      return formatTime(null, displayHours, inverted);\n    } // Format time component to add leading zero\n\n\n    var format = function format(value) {\n      return \"0\".concat(value).slice(-2);\n    }; // Breakdown to hours, mins, secs\n\n\n    var hours = getHours(time);\n    var mins = getMinutes(time);\n    var secs = getSeconds(time); // Do we need to display hours?\n\n    if (displayHours || hours > 0) {\n      hours = \"\".concat(hours, \":\");\n    } else {\n      hours = '';\n    } // Render\n\n\n    return \"\".concat(inverted && time > 0 ? '-' : '').concat(hours).concat(format(mins), \":\").concat(format(secs));\n  }\n\n  var controls = {\n    // Get icon URL\n    getIconUrl: function getIconUrl() {\n      var url = new URL(this.config.iconUrl, window.location);\n      var cors = url.host !== window.location.host || browser.isIE && !window.svg4everybody;\n      return {\n        url: this.config.iconUrl,\n        cors: cors\n      };\n    },\n    // Find the UI controls\n    findElements: function findElements() {\n      try {\n        this.elements.controls = getElement.call(this, this.config.selectors.controls.wrapper); // Buttons\n\n        this.elements.buttons = {\n          play: getElements.call(this, this.config.selectors.buttons.play),\n          pause: getElement.call(this, this.config.selectors.buttons.pause),\n          restart: getElement.call(this, this.config.selectors.buttons.restart),\n          rewind: getElement.call(this, this.config.selectors.buttons.rewind),\n          fastForward: getElement.call(this, this.config.selectors.buttons.fastForward),\n          mute: getElement.call(this, this.config.selectors.buttons.mute),\n          pip: getElement.call(this, this.config.selectors.buttons.pip),\n          airplay: getElement.call(this, this.config.selectors.buttons.airplay),\n          settings: getElement.call(this, this.config.selectors.buttons.settings),\n          captions: getElement.call(this, this.config.selectors.buttons.captions),\n          fullscreen: getElement.call(this, this.config.selectors.buttons.fullscreen)\n        }; // Progress\n\n        this.elements.progress = getElement.call(this, this.config.selectors.progress); // Inputs\n\n        this.elements.inputs = {\n          seek: getElement.call(this, this.config.selectors.inputs.seek),\n          volume: getElement.call(this, this.config.selectors.inputs.volume)\n        }; // Display\n\n        this.elements.display = {\n          buffer: getElement.call(this, this.config.selectors.display.buffer),\n          currentTime: getElement.call(this, this.config.selectors.display.currentTime),\n          duration: getElement.call(this, this.config.selectors.display.duration)\n        }; // Seek tooltip\n\n        if (is.element(this.elements.progress)) {\n          this.elements.display.seekTooltip = this.elements.progress.querySelector(\".\".concat(this.config.classNames.tooltip));\n        }\n\n        return true;\n      } catch (error) {\n        // Log it\n        this.debug.warn('It looks like there is a problem with your custom controls HTML', error); // Restore native video controls\n\n        this.toggleNativeControls(true);\n        return false;\n      }\n    },\n    // Create <svg> icon\n    createIcon: function createIcon(type, attributes) {\n      var namespace = 'http://www.w3.org/2000/svg';\n      var iconUrl = controls.getIconUrl.call(this);\n      var iconPath = \"\".concat(!iconUrl.cors ? iconUrl.url : '', \"#\").concat(this.config.iconPrefix); // Create <svg>\n\n      var icon = document.createElementNS(namespace, 'svg');\n      setAttributes(icon, extend(attributes, {\n        role: 'presentation',\n        focusable: 'false'\n      })); // Create the <use> to reference sprite\n\n      var use = document.createElementNS(namespace, 'use');\n      var path = \"\".concat(iconPath, \"-\").concat(type); // Set `href` attributes\n      // https://github.com/sampotts/plyr/issues/460\n      // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/xlink:href\n\n      if ('href' in use) {\n        use.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\n      } // Always set the older attribute even though it's \"deprecated\" (it'll be around for ages)\n\n\n      use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', path); // Add <use> to <svg>\n\n      icon.appendChild(use);\n      return icon;\n    },\n    // Create hidden text label\n    createLabel: function createLabel(key) {\n      var attr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var text = i18n.get(key, this.config);\n      var attributes = Object.assign({}, attr, {\n        class: [attr.class, this.config.classNames.hidden].filter(Boolean).join(' ')\n      });\n      return createElement('span', attributes, text);\n    },\n    // Create a badge\n    createBadge: function createBadge(text) {\n      if (is.empty(text)) {\n        return null;\n      }\n\n      var badge = createElement('span', {\n        class: this.config.classNames.menu.value\n      });\n      badge.appendChild(createElement('span', {\n        class: this.config.classNames.menu.badge\n      }, text));\n      return badge;\n    },\n    // Create a <button>\n    createButton: function createButton(buttonType, attr) {\n      var attributes = Object.assign({}, attr);\n      var type = toCamelCase(buttonType);\n      var props = {\n        element: 'button',\n        toggle: false,\n        label: null,\n        icon: null,\n        labelPressed: null,\n        iconPressed: null\n      };\n      ['element', 'icon', 'label'].forEach(function (key) {\n        if (Object.keys(attributes).includes(key)) {\n          props[key] = attributes[key];\n          delete attributes[key];\n        }\n      }); // Default to 'button' type to prevent form submission\n\n      if (props.element === 'button' && !Object.keys(attributes).includes('type')) {\n        attributes.type = 'button';\n      } // Set class name\n\n\n      if (Object.keys(attributes).includes('class')) {\n        if (!attributes.class.includes(this.config.classNames.control)) {\n          attributes.class += \" \".concat(this.config.classNames.control);\n        }\n      } else {\n        attributes.class = this.config.classNames.control;\n      } // Large play button\n\n\n      switch (buttonType) {\n        case 'play':\n          props.toggle = true;\n          props.label = 'play';\n          props.labelPressed = 'pause';\n          props.icon = 'play';\n          props.iconPressed = 'pause';\n          break;\n\n        case 'mute':\n          props.toggle = true;\n          props.label = 'mute';\n          props.labelPressed = 'unmute';\n          props.icon = 'volume';\n          props.iconPressed = 'muted';\n          break;\n\n        case 'captions':\n          props.toggle = true;\n          props.label = 'enableCaptions';\n          props.labelPressed = 'disableCaptions';\n          props.icon = 'captions-off';\n          props.iconPressed = 'captions-on';\n          break;\n\n        case 'fullscreen':\n          props.toggle = true;\n          props.label = 'enterFullscreen';\n          props.labelPressed = 'exitFullscreen';\n          props.icon = 'enter-fullscreen';\n          props.iconPressed = 'exit-fullscreen';\n          break;\n\n        case 'play-large':\n          attributes.class += \" \".concat(this.config.classNames.control, \"--overlaid\");\n          type = 'play';\n          props.label = 'play';\n          props.icon = 'play';\n          break;\n\n        default:\n          if (is.empty(props.label)) {\n            props.label = type;\n          }\n\n          if (is.empty(props.icon)) {\n            props.icon = buttonType;\n          }\n\n      }\n\n      var button = createElement(props.element); // Setup toggle icon and labels\n\n      if (props.toggle) {\n        // Icon\n        button.appendChild(controls.createIcon.call(this, props.iconPressed, {\n          class: 'icon--pressed'\n        }));\n        button.appendChild(controls.createIcon.call(this, props.icon, {\n          class: 'icon--not-pressed'\n        })); // Label/Tooltip\n\n        button.appendChild(controls.createLabel.call(this, props.labelPressed, {\n          class: 'label--pressed'\n        }));\n        button.appendChild(controls.createLabel.call(this, props.label, {\n          class: 'label--not-pressed'\n        }));\n      } else {\n        button.appendChild(controls.createIcon.call(this, props.icon));\n        button.appendChild(controls.createLabel.call(this, props.label));\n      } // Merge and set attributes\n\n\n      extend(attributes, getAttributesFromSelector(this.config.selectors.buttons[type], attributes));\n      setAttributes(button, attributes); // We have multiple play buttons\n\n      if (type === 'play') {\n        if (!is.array(this.elements.buttons[type])) {\n          this.elements.buttons[type] = [];\n        }\n\n        this.elements.buttons[type].push(button);\n      } else {\n        this.elements.buttons[type] = button;\n      }\n\n      return button;\n    },\n    // Create an <input type='range'>\n    createRange: function createRange(type, attributes) {\n      // Seek input\n      var input = createElement('input', extend(getAttributesFromSelector(this.config.selectors.inputs[type]), {\n        type: 'range',\n        min: 0,\n        max: 100,\n        step: 0.01,\n        value: 0,\n        autocomplete: 'off',\n        // A11y fixes for https://github.com/sampotts/plyr/issues/905\n        role: 'slider',\n        'aria-label': i18n.get(type, this.config),\n        'aria-valuemin': 0,\n        'aria-valuemax': 100,\n        'aria-valuenow': 0\n      }, attributes));\n      this.elements.inputs[type] = input; // Set the fill for webkit now\n\n      controls.updateRangeFill.call(this, input);\n      return input;\n    },\n    // Create a <progress>\n    createProgress: function createProgress(type, attributes) {\n      var progress = createElement('progress', extend(getAttributesFromSelector(this.config.selectors.display[type]), {\n        min: 0,\n        max: 100,\n        value: 0,\n        role: 'presentation',\n        'aria-hidden': true\n      }, attributes)); // Create the label inside\n\n      if (type !== 'volume') {\n        progress.appendChild(createElement('span', null, '0'));\n        var suffixKey = {\n          played: 'played',\n          buffer: 'buffered'\n        }[type];\n        var suffix = suffixKey ? i18n.get(suffixKey, this.config) : '';\n        progress.innerText = \"% \".concat(suffix.toLowerCase());\n      }\n\n      this.elements.display[type] = progress;\n      return progress;\n    },\n    // Create time display\n    createTime: function createTime(type) {\n      var attributes = getAttributesFromSelector(this.config.selectors.display[type]);\n      var container = createElement('div', extend(attributes, {\n        class: \"\".concat(this.config.classNames.display.time, \" \").concat(attributes.class ? attributes.class : '').trim(),\n        'aria-label': i18n.get(type, this.config)\n      }), '00:00'); // Reference for updates\n\n      this.elements.display[type] = container;\n      return container;\n    },\n    // Bind keyboard shortcuts for a menu item\n    // We have to bind to keyup otherwise Firefox triggers a click when a keydown event handler shifts focus\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1220143\n    bindMenuItemShortcuts: function bindMenuItemShortcuts(menuItem, type) {\n      var _this = this;\n\n      // Navigate through menus via arrow keys and space\n      on(menuItem, 'keydown keyup', function (event) {\n        // We only care about space and   \n        if (![32, 38, 39, 40].includes(event.which)) {\n          return;\n        } // Prevent play / seek\n\n\n        event.preventDefault();\n        event.stopPropagation(); // We're just here to prevent the keydown bubbling\n\n        if (event.type === 'keydown') {\n          return;\n        }\n\n        var isRadioButton = matches(menuItem, '[role=\"menuitemradio\"]'); // Show the respective menu\n\n        if (!isRadioButton && [32, 39].includes(event.which)) {\n          controls.showMenuPanel.call(_this, type, true);\n        } else {\n          var target;\n\n          if (event.which !== 32) {\n            if (event.which === 40 || isRadioButton && event.which === 39) {\n              target = menuItem.nextElementSibling;\n\n              if (!is.element(target)) {\n                target = menuItem.parentNode.firstElementChild;\n              }\n            } else {\n              target = menuItem.previousElementSibling;\n\n              if (!is.element(target)) {\n                target = menuItem.parentNode.lastElementChild;\n              }\n            }\n\n            setFocus.call(_this, target, true);\n          }\n        }\n      }, false); // Enter will fire a `click` event but we still need to manage focus\n      // So we bind to keyup which fires after and set focus here\n\n      on(menuItem, 'keyup', function (event) {\n        if (event.which !== 13) {\n          return;\n        }\n\n        controls.focusFirstMenuItem.call(_this, null, true);\n      });\n    },\n    // Create a settings menu item\n    createMenuItem: function createMenuItem(_ref) {\n      var _this2 = this;\n\n      var value = _ref.value,\n          list = _ref.list,\n          type = _ref.type,\n          title = _ref.title,\n          _ref$badge = _ref.badge,\n          badge = _ref$badge === void 0 ? null : _ref$badge,\n          _ref$checked = _ref.checked,\n          checked = _ref$checked === void 0 ? false : _ref$checked;\n      var attributes = getAttributesFromSelector(this.config.selectors.inputs[type]);\n      var menuItem = createElement('button', extend(attributes, {\n        type: 'button',\n        role: 'menuitemradio',\n        class: \"\".concat(this.config.classNames.control, \" \").concat(attributes.class ? attributes.class : '').trim(),\n        'aria-checked': checked,\n        value: value\n      }));\n      var flex = createElement('span'); // We have to set as HTML incase of special characters\n\n      flex.innerHTML = title;\n\n      if (is.element(badge)) {\n        flex.appendChild(badge);\n      }\n\n      menuItem.appendChild(flex); // Replicate radio button behaviour\n\n      Object.defineProperty(menuItem, 'checked', {\n        enumerable: true,\n        get: function get() {\n          return menuItem.getAttribute('aria-checked') === 'true';\n        },\n        set: function set(checked) {\n          // Ensure exclusivity\n          if (checked) {\n            Array.from(menuItem.parentNode.children).filter(function (node) {\n              return matches(node, '[role=\"menuitemradio\"]');\n            }).forEach(function (node) {\n              return node.setAttribute('aria-checked', 'false');\n            });\n          }\n\n          menuItem.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n      });\n      this.listeners.bind(menuItem, 'click keyup', function (event) {\n        if (is.keyboardEvent(event) && event.which !== 32) {\n          return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n        menuItem.checked = true;\n\n        switch (type) {\n          case 'language':\n            _this2.currentTrack = Number(value);\n            break;\n\n          case 'quality':\n            _this2.quality = value;\n            break;\n\n          case 'speed':\n            _this2.speed = parseFloat(value);\n            break;\n\n          default:\n            break;\n        }\n\n        controls.showMenuPanel.call(_this2, 'home', is.keyboardEvent(event));\n      }, type, false);\n      controls.bindMenuItemShortcuts.call(this, menuItem, type);\n      list.appendChild(menuItem);\n    },\n    // Format a time for display\n    formatTime: function formatTime$$1() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var inverted = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      // Bail if the value isn't a number\n      if (!is.number(time)) {\n        return time;\n      } // Always display hours if duration is over an hour\n\n\n      var forceHours = getHours(this.duration) > 0;\n      return formatTime(time, forceHours, inverted);\n    },\n    // Update the displayed time\n    updateTimeDisplay: function updateTimeDisplay() {\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var inverted = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      // Bail if there's no element to display or the value isn't a number\n      if (!is.element(target) || !is.number(time)) {\n        return;\n      } // eslint-disable-next-line no-param-reassign\n\n\n      target.innerText = controls.formatTime(time, inverted);\n    },\n    // Update volume UI and storage\n    updateVolume: function updateVolume() {\n      if (!this.supported.ui) {\n        return;\n      } // Update range\n\n\n      if (is.element(this.elements.inputs.volume)) {\n        controls.setRange.call(this, this.elements.inputs.volume, this.muted ? 0 : this.volume);\n      } // Update mute state\n\n\n      if (is.element(this.elements.buttons.mute)) {\n        this.elements.buttons.mute.pressed = this.muted || this.volume === 0;\n      }\n    },\n    // Update seek value and lower fill\n    setRange: function setRange(target) {\n      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (!is.element(target)) {\n        return;\n      } // eslint-disable-next-line\n\n\n      target.value = value; // Webkit range fill\n\n      controls.updateRangeFill.call(this, target);\n    },\n    // Update <progress> elements\n    updateProgress: function updateProgress(event) {\n      var _this3 = this;\n\n      if (!this.supported.ui || !is.event(event)) {\n        return;\n      }\n\n      var value = 0;\n\n      var setProgress = function setProgress(target, input) {\n        var value = is.number(input) ? input : 0;\n        var progress = is.element(target) ? target : _this3.elements.display.buffer; // Update value and label\n\n        if (is.element(progress)) {\n          progress.value = value; // Update text label inside\n\n          var label = progress.getElementsByTagName('span')[0];\n\n          if (is.element(label)) {\n            label.childNodes[0].nodeValue = value;\n          }\n        }\n      };\n\n      if (event) {\n        switch (event.type) {\n          // Video playing\n          case 'timeupdate':\n          case 'seeking':\n          case 'seeked':\n            value = getPercentage(this.currentTime, this.duration); // Set seek range value only if it's a 'natural' time event\n\n            if (event.type === 'timeupdate') {\n              controls.setRange.call(this, this.elements.inputs.seek, value);\n            }\n\n            break;\n          // Check buffer status\n\n          case 'playing':\n          case 'progress':\n            setProgress(this.elements.display.buffer, this.buffered * 100);\n            break;\n\n          default:\n            break;\n        }\n      }\n    },\n    // Webkit polyfill for lower fill range\n    updateRangeFill: function updateRangeFill(target) {\n      // Get range from event if event passed\n      var range = is.event(target) ? target.target : target; // Needs to be a valid <input type='range'>\n\n      if (!is.element(range) || range.getAttribute('type') !== 'range') {\n        return;\n      } // Set aria values for https://github.com/sampotts/plyr/issues/905\n\n\n      if (matches(range, this.config.selectors.inputs.seek)) {\n        range.setAttribute('aria-valuenow', this.currentTime);\n        var currentTime = controls.formatTime(this.currentTime);\n        var duration = controls.formatTime(this.duration);\n        var format$$1 = i18n.get('seekLabel', this.config);\n        range.setAttribute('aria-valuetext', format$$1.replace('{currentTime}', currentTime).replace('{duration}', duration));\n      } else if (matches(range, this.config.selectors.inputs.volume)) {\n        var percent = range.value * 100;\n        range.setAttribute('aria-valuenow', percent);\n        range.setAttribute('aria-valuetext', \"\".concat(percent.toFixed(1), \"%\"));\n      } else {\n        range.setAttribute('aria-valuenow', range.value);\n      } // WebKit only\n\n\n      if (!browser.isWebkit) {\n        return;\n      } // Set CSS custom property\n\n\n      range.style.setProperty('--value', \"\".concat(range.value / range.max * 100, \"%\"));\n    },\n    // Update hover tooltip for seeking\n    updateSeekTooltip: function updateSeekTooltip(event) {\n      var _this4 = this;\n\n      // Bail if setting not true\n      if (!this.config.tooltips.seek || !is.element(this.elements.inputs.seek) || !is.element(this.elements.display.seekTooltip) || this.duration === 0) {\n        return;\n      } // Calculate percentage\n\n\n      var percent = 0;\n      var clientRect = this.elements.progress.getBoundingClientRect();\n      var visible = \"\".concat(this.config.classNames.tooltip, \"--visible\");\n\n      var toggle = function toggle(_toggle) {\n        toggleClass(_this4.elements.display.seekTooltip, visible, _toggle);\n      }; // Hide on touch\n\n\n      if (this.touch) {\n        toggle(false);\n        return;\n      } // Determine percentage, if already visible\n\n\n      if (is.event(event)) {\n        percent = 100 / clientRect.width * (event.pageX - clientRect.left);\n      } else if (hasClass(this.elements.display.seekTooltip, visible)) {\n        percent = parseFloat(this.elements.display.seekTooltip.style.left, 10);\n      } else {\n        return;\n      } // Set bounds\n\n\n      if (percent < 0) {\n        percent = 0;\n      } else if (percent > 100) {\n        percent = 100;\n      } // Display the time a click would seek to\n\n\n      controls.updateTimeDisplay.call(this, this.elements.display.seekTooltip, this.duration / 100 * percent); // Set position\n\n      this.elements.display.seekTooltip.style.left = \"\".concat(percent, \"%\"); // Show/hide the tooltip\n      // If the event is a moues in/out and percentage is inside bounds\n\n      if (is.event(event) && ['mouseenter', 'mouseleave'].includes(event.type)) {\n        toggle(event.type === 'mouseenter');\n      }\n    },\n    // Handle time change event\n    timeUpdate: function timeUpdate(event) {\n      // Only invert if only one time element is displayed and used for both duration and currentTime\n      var invert = !is.element(this.elements.display.duration) && this.config.invertTime; // Duration\n\n      controls.updateTimeDisplay.call(this, this.elements.display.currentTime, invert ? this.duration - this.currentTime : this.currentTime, invert); // Ignore updates while seeking\n\n      if (event && event.type === 'timeupdate' && this.media.seeking) {\n        return;\n      } // Playing progress\n\n\n      controls.updateProgress.call(this, event);\n    },\n    // Show the duration on metadataloaded or durationchange events\n    durationUpdate: function durationUpdate() {\n      // Bail if no UI or durationchange event triggered after playing/seek when invertTime is false\n      if (!this.supported.ui || !this.config.invertTime && this.currentTime) {\n        return;\n      } // If duration is the 2**32 (shaka), Infinity (HLS), DASH-IF (Number.MAX_SAFE_INTEGER || Number.MAX_VALUE) indicating live we hide the currentTime and progressbar.\n      // https://github.com/video-dev/hls.js/blob/5820d29d3c4c8a46e8b75f1e3afa3e68c1a9a2db/src/controller/buffer-controller.js#L415\n      // https://github.com/google/shaka-player/blob/4d889054631f4e1cf0fbd80ddd2b71887c02e232/lib/media/streaming_engine.js#L1062\n      // https://github.com/Dash-Industry-Forum/dash.js/blob/69859f51b969645b234666800d4cb596d89c602d/src/dash/models/DashManifestModel.js#L338\n\n\n      if (this.duration >= Math.pow(2, 32)) {\n        toggleHidden(this.elements.display.currentTime, true);\n        toggleHidden(this.elements.progress, true);\n        return;\n      } // Update ARIA values\n\n\n      if (is.element(this.elements.inputs.seek)) {\n        this.elements.inputs.seek.setAttribute('aria-valuemax', this.duration);\n      } // If there's a spot to display duration\n\n\n      var hasDuration = is.element(this.elements.display.duration); // If there's only one time display, display duration there\n\n      if (!hasDuration && this.config.displayDuration && this.paused) {\n        controls.updateTimeDisplay.call(this, this.elements.display.currentTime, this.duration);\n      } // If there's a duration element, update content\n\n\n      if (hasDuration) {\n        controls.updateTimeDisplay.call(this, this.elements.display.duration, this.duration);\n      } // Update the tooltip (if visible)\n\n\n      controls.updateSeekTooltip.call(this);\n    },\n    // Hide/show a tab\n    toggleMenuButton: function toggleMenuButton(setting, toggle) {\n      toggleHidden(this.elements.settings.buttons[setting], !toggle);\n    },\n    // Update the selected setting\n    updateSetting: function updateSetting(setting, container, input) {\n      var pane = this.elements.settings.panels[setting];\n      var value = null;\n      var list = container;\n\n      if (setting === 'captions') {\n        value = this.currentTrack;\n      } else {\n        value = !is.empty(input) ? input : this[setting]; // Get default\n\n        if (is.empty(value)) {\n          value = this.config[setting].default;\n        } // Unsupported value\n\n\n        if (!is.empty(this.options[setting]) && !this.options[setting].includes(value)) {\n          this.debug.warn(\"Unsupported value of '\".concat(value, \"' for \").concat(setting));\n          return;\n        } // Disabled value\n\n\n        if (!this.config[setting].options.includes(value)) {\n          this.debug.warn(\"Disabled value of '\".concat(value, \"' for \").concat(setting));\n          return;\n        }\n      } // Get the list if we need to\n\n\n      if (!is.element(list)) {\n        list = pane && pane.querySelector('[role=\"menu\"]');\n      } // If there's no list it means it's not been rendered...\n\n\n      if (!is.element(list)) {\n        return;\n      } // Update the label\n\n\n      var label = this.elements.settings.buttons[setting].querySelector(\".\".concat(this.config.classNames.menu.value));\n      label.innerHTML = controls.getLabel.call(this, setting, value); // Find the radio option and check it\n\n      var target = list && list.querySelector(\"[value=\\\"\".concat(value, \"\\\"]\"));\n\n      if (is.element(target)) {\n        target.checked = true;\n      }\n    },\n    // Translate a value into a nice label\n    getLabel: function getLabel(setting, value) {\n      switch (setting) {\n        case 'speed':\n          return value === 1 ? i18n.get('normal', this.config) : \"\".concat(value, \"&times;\");\n\n        case 'quality':\n          if (is.number(value)) {\n            var label = i18n.get(\"qualityLabel.\".concat(value), this.config);\n\n            if (!label.length) {\n              return \"\".concat(value, \"p\");\n            }\n\n            return label;\n          }\n\n          return toTitleCase(value);\n\n        case 'captions':\n          return captions.getLabel.call(this);\n\n        default:\n          return null;\n      }\n    },\n    // Set the quality menu\n    setQualityMenu: function setQualityMenu(options) {\n      var _this5 = this;\n\n      // Menu required\n      if (!is.element(this.elements.settings.panels.quality)) {\n        return;\n      }\n\n      var type = 'quality';\n      var list = this.elements.settings.panels.quality.querySelector('[role=\"menu\"]'); // Set options if passed and filter based on uniqueness and config\n\n      if (is.array(options)) {\n        this.options.quality = dedupe(options).filter(function (quality) {\n          return _this5.config.quality.options.includes(quality);\n        });\n      } // Toggle the pane and tab\n\n\n      var toggle = !is.empty(this.options.quality) && this.options.quality.length > 1;\n      controls.toggleMenuButton.call(this, type, toggle); // Empty the menu\n\n      emptyElement(list); // Check if we need to toggle the parent\n\n      controls.checkMenu.call(this); // If we're hiding, nothing more to do\n\n      if (!toggle) {\n        return;\n      } // Get the badge HTML for HD, 4K etc\n\n\n      var getBadge = function getBadge(quality) {\n        var label = i18n.get(\"qualityBadge.\".concat(quality), _this5.config);\n\n        if (!label.length) {\n          return null;\n        }\n\n        return controls.createBadge.call(_this5, label);\n      }; // Sort options by the config and then render options\n\n\n      this.options.quality.sort(function (a, b) {\n        var sorting = _this5.config.quality.options;\n        return sorting.indexOf(a) > sorting.indexOf(b) ? 1 : -1;\n      }).forEach(function (quality) {\n        controls.createMenuItem.call(_this5, {\n          value: quality,\n          list: list,\n          type: type,\n          title: controls.getLabel.call(_this5, 'quality', quality),\n          badge: getBadge(quality)\n        });\n      });\n      controls.updateSetting.call(this, type, list);\n    },\n    // Set the looping options\n\n    /* setLoopMenu() {\n        // Menu required\n        if (!is.element(this.elements.settings.panels.loop)) {\n            return;\n        }\n         const options = ['start', 'end', 'all', 'reset'];\n        const list = this.elements.settings.panels.loop.querySelector('[role=\"menu\"]');\n         // Show the pane and tab\n        toggleHidden(this.elements.settings.buttons.loop, false);\n        toggleHidden(this.elements.settings.panels.loop, false);\n         // Toggle the pane and tab\n        const toggle = !is.empty(this.loop.options);\n        controls.toggleMenuButton.call(this, 'loop', toggle);\n         // Empty the menu\n        emptyElement(list);\n         options.forEach(option => {\n            const item = createElement('li');\n             const button = createElement(\n                'button',\n                extend(getAttributesFromSelector(this.config.selectors.buttons.loop), {\n                    type: 'button',\n                    class: this.config.classNames.control,\n                    'data-plyr-loop-action': option,\n                }),\n                i18n.get(option, this.config)\n            );\n             if (['start', 'end'].includes(option)) {\n                const badge = controls.createBadge.call(this, '00:00');\n                button.appendChild(badge);\n            }\n             item.appendChild(button);\n            list.appendChild(item);\n        });\n    }, */\n    // Get current selected caption language\n    // TODO: rework this to user the getter in the API?\n    // Set a list of available captions languages\n    setCaptionsMenu: function setCaptionsMenu() {\n      var _this6 = this;\n\n      // Menu required\n      if (!is.element(this.elements.settings.panels.captions)) {\n        return;\n      } // TODO: Captions or language? Currently it's mixed\n\n\n      var type = 'captions';\n      var list = this.elements.settings.panels.captions.querySelector('[role=\"menu\"]');\n      var tracks = captions.getTracks.call(this);\n      var toggle = Boolean(tracks.length); // Toggle the pane and tab\n\n      controls.toggleMenuButton.call(this, type, toggle); // Empty the menu\n\n      emptyElement(list); // Check if we need to toggle the parent\n\n      controls.checkMenu.call(this); // If there's no captions, bail\n\n      if (!toggle) {\n        return;\n      } // Generate options data\n\n\n      var options = tracks.map(function (track, value) {\n        return {\n          value: value,\n          checked: _this6.captions.toggled && _this6.currentTrack === value,\n          title: captions.getLabel.call(_this6, track),\n          badge: track.language && controls.createBadge.call(_this6, track.language.toUpperCase()),\n          list: list,\n          type: 'language'\n        };\n      }); // Add the \"Disabled\" option to turn off captions\n\n      options.unshift({\n        value: -1,\n        checked: !this.captions.toggled,\n        title: i18n.get('disabled', this.config),\n        list: list,\n        type: 'language'\n      }); // Generate options\n\n      options.forEach(controls.createMenuItem.bind(this));\n      controls.updateSetting.call(this, type, list);\n    },\n    // Set a list of available captions languages\n    setSpeedMenu: function setSpeedMenu(options) {\n      var _this7 = this;\n\n      // Menu required\n      if (!is.element(this.elements.settings.panels.speed)) {\n        return;\n      }\n\n      var type = 'speed';\n      var list = this.elements.settings.panels.speed.querySelector('[role=\"menu\"]'); // Set the speed options\n\n      if (is.array(options)) {\n        this.options.speed = options;\n      } else if (this.isHTML5 || this.isVimeo) {\n        this.options.speed = [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\n      } // Set options if passed and filter based on config\n\n\n      this.options.speed = this.options.speed.filter(function (speed) {\n        return _this7.config.speed.options.includes(speed);\n      }); // Toggle the pane and tab\n\n      var toggle = !is.empty(this.options.speed) && this.options.speed.length > 1;\n      controls.toggleMenuButton.call(this, type, toggle); // Empty the menu\n\n      emptyElement(list); // Check if we need to toggle the parent\n\n      controls.checkMenu.call(this); // If we're hiding, nothing more to do\n\n      if (!toggle) {\n        return;\n      } // Create items\n\n\n      this.options.speed.forEach(function (speed) {\n        controls.createMenuItem.call(_this7, {\n          value: speed,\n          list: list,\n          type: type,\n          title: controls.getLabel.call(_this7, 'speed', speed)\n        });\n      });\n      controls.updateSetting.call(this, type, list);\n    },\n    // Check if we need to hide/show the settings menu\n    checkMenu: function checkMenu() {\n      var buttons = this.elements.settings.buttons;\n      var visible = !is.empty(buttons) && Object.values(buttons).some(function (button) {\n        return !button.hidden;\n      });\n      toggleHidden(this.elements.settings.menu, !visible);\n    },\n    // Focus the first menu item in a given (or visible) menu\n    focusFirstMenuItem: function focusFirstMenuItem(pane) {\n      var tabFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (this.elements.settings.popup.hidden) {\n        return;\n      }\n\n      var target = pane;\n\n      if (!is.element(target)) {\n        target = Object.values(this.elements.settings.panels).find(function (pane) {\n          return !pane.hidden;\n        });\n      }\n\n      var firstItem = target.querySelector('[role^=\"menuitem\"]');\n      setFocus.call(this, firstItem, tabFocus);\n    },\n    // Show/hide menu\n    toggleMenu: function toggleMenu(input) {\n      var popup = this.elements.settings.popup;\n      var button = this.elements.buttons.settings; // Menu and button are required\n\n      if (!is.element(popup) || !is.element(button)) {\n        return;\n      } // True toggle by default\n\n\n      var hidden = popup.hidden;\n      var show = hidden;\n\n      if (is.boolean(input)) {\n        show = input;\n      } else if (is.keyboardEvent(input) && input.which === 27) {\n        show = false;\n      } else if (is.event(input)) {\n        var isMenuItem = popup.contains(input.target); // If the click was inside the menu or if the click\n        // wasn't the button or menu item and we're trying to\n        // show the menu (a doc click shouldn't show the menu)\n\n        if (isMenuItem || !isMenuItem && input.target !== button && show) {\n          return;\n        }\n      } // Set button attributes\n\n\n      button.setAttribute('aria-expanded', show); // Show the actual popup\n\n      toggleHidden(popup, !show); // Add class hook\n\n      toggleClass(this.elements.container, this.config.classNames.menu.open, show); // Focus the first item if key interaction\n\n      if (show && is.keyboardEvent(input)) {\n        controls.focusFirstMenuItem.call(this, null, true);\n      } else if (!show && !hidden) {\n        // If closing, re-focus the button\n        setFocus.call(this, button, is.keyboardEvent(input));\n      }\n    },\n    // Get the natural size of a menu panel\n    getMenuSize: function getMenuSize(tab) {\n      var clone = tab.cloneNode(true);\n      clone.style.position = 'absolute';\n      clone.style.opacity = 0;\n      clone.removeAttribute('hidden'); // Append to parent so we get the \"real\" size\n\n      tab.parentNode.appendChild(clone); // Get the sizes before we remove\n\n      var width = clone.scrollWidth;\n      var height = clone.scrollHeight; // Remove from the DOM\n\n      removeElement(clone);\n      return {\n        width: width,\n        height: height\n      };\n    },\n    // Show a panel in the menu\n    showMenuPanel: function showMenuPanel() {\n      var _this8 = this;\n\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var tabFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var target = document.getElementById(\"plyr-settings-\".concat(this.id, \"-\").concat(type)); // Nothing to show, bail\n\n      if (!is.element(target)) {\n        return;\n      } // Hide all other panels\n\n\n      var container = target.parentNode;\n      var current = Array.from(container.children).find(function (node) {\n        return !node.hidden;\n      }); // If we can do fancy animations, we'll animate the height/width\n\n      if (support.transitions && !support.reducedMotion) {\n        // Set the current width as a base\n        container.style.width = \"\".concat(current.scrollWidth, \"px\");\n        container.style.height = \"\".concat(current.scrollHeight, \"px\"); // Get potential sizes\n\n        var size = controls.getMenuSize.call(this, target); // Restore auto height/width\n\n        var restore = function restore(event) {\n          // We're only bothered about height and width on the container\n          if (event.target !== container || !['width', 'height'].includes(event.propertyName)) {\n            return;\n          } // Revert back to auto\n\n\n          container.style.width = '';\n          container.style.height = ''; // Only listen once\n\n          off.call(_this8, container, transitionEndEvent, restore);\n        }; // Listen for the transition finishing and restore auto height/width\n\n\n        on.call(this, container, transitionEndEvent, restore); // Set dimensions to target\n\n        container.style.width = \"\".concat(size.width, \"px\");\n        container.style.height = \"\".concat(size.height, \"px\");\n      } // Set attributes on current tab\n\n\n      toggleHidden(current, true); // Set attributes on target\n\n      toggleHidden(target, false); // Focus the first item\n\n      controls.focusFirstMenuItem.call(this, target, tabFocus);\n    },\n    // Set the download link\n    setDownloadLink: function setDownloadLink() {\n      var button = this.elements.buttons.download; // Bail if no button\n\n      if (!is.element(button)) {\n        return;\n      } // Set download link\n\n\n      button.setAttribute('href', this.download);\n    },\n    // Build the default HTML\n    // TODO: Set order based on order in the config.controls array?\n    create: function create(data) {\n      var _this9 = this;\n\n      // Create the container\n      var container = createElement('div', getAttributesFromSelector(this.config.selectors.controls.wrapper)); // Restart button\n\n      if (this.config.controls.includes('restart')) {\n        container.appendChild(controls.createButton.call(this, 'restart'));\n      } // Rewind button\n\n\n      if (this.config.controls.includes('rewind')) {\n        container.appendChild(controls.createButton.call(this, 'rewind'));\n      } // Play/Pause button\n\n\n      if (this.config.controls.includes('play')) {\n        container.appendChild(controls.createButton.call(this, 'play'));\n      } // Fast forward button\n\n\n      if (this.config.controls.includes('fast-forward')) {\n        container.appendChild(controls.createButton.call(this, 'fast-forward'));\n      } // Progress\n\n\n      if (this.config.controls.includes('progress')) {\n        var progress = createElement('div', getAttributesFromSelector(this.config.selectors.progress)); // Seek range slider\n\n        progress.appendChild(controls.createRange.call(this, 'seek', {\n          id: \"plyr-seek-\".concat(data.id)\n        })); // Buffer progress\n\n        progress.appendChild(controls.createProgress.call(this, 'buffer')); // TODO: Add loop display indicator\n        // Seek tooltip\n\n        if (this.config.tooltips.seek) {\n          var tooltip = createElement('span', {\n            class: this.config.classNames.tooltip\n          }, '00:00');\n          progress.appendChild(tooltip);\n          this.elements.display.seekTooltip = tooltip;\n        }\n\n        this.elements.progress = progress;\n        container.appendChild(this.elements.progress);\n      } // Media current time display\n\n\n      if (this.config.controls.includes('current-time')) {\n        container.appendChild(controls.createTime.call(this, 'currentTime'));\n      } // Media duration display\n\n\n      if (this.config.controls.includes('duration')) {\n        container.appendChild(controls.createTime.call(this, 'duration'));\n      } // Volume controls\n\n\n      if (this.config.controls.includes('mute') || this.config.controls.includes('volume')) {\n        var volume = createElement('div', {\n          class: 'plyr__volume'\n        }); // Toggle mute button\n\n        if (this.config.controls.includes('mute')) {\n          volume.appendChild(controls.createButton.call(this, 'mute'));\n        } // Volume range control\n\n\n        if (this.config.controls.includes('volume')) {\n          // Set the attributes\n          var attributes = {\n            max: 1,\n            step: 0.05,\n            value: this.config.volume\n          }; // Create the volume range slider\n\n          volume.appendChild(controls.createRange.call(this, 'volume', extend(attributes, {\n            id: \"plyr-volume-\".concat(data.id)\n          })));\n          this.elements.volume = volume;\n        }\n\n        container.appendChild(volume);\n      } // Toggle captions button\n\n\n      if (this.config.controls.includes('captions')) {\n        container.appendChild(controls.createButton.call(this, 'captions'));\n      } // Settings button / menu\n\n\n      if (this.config.controls.includes('settings') && !is.empty(this.config.settings)) {\n        var control = createElement('div', {\n          class: 'plyr__menu',\n          hidden: ''\n        });\n        control.appendChild(controls.createButton.call(this, 'settings', {\n          'aria-haspopup': true,\n          'aria-controls': \"plyr-settings-\".concat(data.id),\n          'aria-expanded': false\n        }));\n        var popup = createElement('div', {\n          class: 'plyr__menu__container',\n          id: \"plyr-settings-\".concat(data.id),\n          hidden: ''\n        });\n        var inner = createElement('div');\n        var home = createElement('div', {\n          id: \"plyr-settings-\".concat(data.id, \"-home\")\n        }); // Create the menu\n\n        var menu = createElement('div', {\n          role: 'menu'\n        });\n        home.appendChild(menu);\n        inner.appendChild(home);\n        this.elements.settings.panels.home = home; // Build the menu items\n\n        this.config.settings.forEach(function (type) {\n          // TODO: bundle this with the createMenuItem helper and bindings\n          var menuItem = createElement('button', extend(getAttributesFromSelector(_this9.config.selectors.buttons.settings), {\n            type: 'button',\n            class: \"\".concat(_this9.config.classNames.control, \" \").concat(_this9.config.classNames.control, \"--forward\"),\n            role: 'menuitem',\n            'aria-haspopup': true,\n            hidden: ''\n          })); // Bind menu shortcuts for keyboard users\n\n          controls.bindMenuItemShortcuts.call(_this9, menuItem, type); // Show menu on click\n\n          on(menuItem, 'click', function () {\n            controls.showMenuPanel.call(_this9, type, false);\n          });\n          var flex = createElement('span', null, i18n.get(type, _this9.config));\n          var value = createElement('span', {\n            class: _this9.config.classNames.menu.value\n          }); // Speed contains HTML entities\n\n          value.innerHTML = data[type];\n          flex.appendChild(value);\n          menuItem.appendChild(flex);\n          menu.appendChild(menuItem); // Build the panes\n\n          var pane = createElement('div', {\n            id: \"plyr-settings-\".concat(data.id, \"-\").concat(type),\n            hidden: ''\n          }); // Back button\n\n          var backButton = createElement('button', {\n            type: 'button',\n            class: \"\".concat(_this9.config.classNames.control, \" \").concat(_this9.config.classNames.control, \"--back\")\n          }); // Visible label\n\n          backButton.appendChild(createElement('span', {\n            'aria-hidden': true\n          }, i18n.get(type, _this9.config))); // Screen reader label\n\n          backButton.appendChild(createElement('span', {\n            class: _this9.config.classNames.hidden\n          }, i18n.get('menuBack', _this9.config))); // Go back via keyboard\n\n          on(pane, 'keydown', function (event) {\n            // We only care about <-\n            if (event.which !== 37) {\n              return;\n            } // Prevent seek\n\n\n            event.preventDefault();\n            event.stopPropagation(); // Show the respective menu\n\n            controls.showMenuPanel.call(_this9, 'home', true);\n          }, false); // Go back via button click\n\n          on(backButton, 'click', function () {\n            controls.showMenuPanel.call(_this9, 'home', false);\n          }); // Add to pane\n\n          pane.appendChild(backButton); // Menu\n\n          pane.appendChild(createElement('div', {\n            role: 'menu'\n          }));\n          inner.appendChild(pane);\n          _this9.elements.settings.buttons[type] = menuItem;\n          _this9.elements.settings.panels[type] = pane;\n        });\n        popup.appendChild(inner);\n        control.appendChild(popup);\n        container.appendChild(control);\n        this.elements.settings.popup = popup;\n        this.elements.settings.menu = control;\n      } // Picture in picture button\n\n\n      if (this.config.controls.includes('pip') && support.pip) {\n        container.appendChild(controls.createButton.call(this, 'pip'));\n      } // Airplay button\n\n\n      if (this.config.controls.includes('airplay') && support.airplay) {\n        container.appendChild(controls.createButton.call(this, 'airplay'));\n      } // Download button\n\n\n      if (this.config.controls.includes('download')) {\n        var _attributes = {\n          element: 'a',\n          href: this.download,\n          target: '_blank'\n        };\n        var download = this.config.urls.download;\n\n        if (!is.url(download) && this.isEmbed) {\n          extend(_attributes, {\n            icon: \"logo-\".concat(this.provider),\n            label: this.provider\n          });\n        }\n\n        container.appendChild(controls.createButton.call(this, 'download', _attributes));\n      } // Toggle fullscreen button\n\n\n      if (this.config.controls.includes('fullscreen')) {\n        container.appendChild(controls.createButton.call(this, 'fullscreen'));\n      } // Larger overlaid play button\n\n\n      if (this.config.controls.includes('play-large')) {\n        this.elements.container.appendChild(controls.createButton.call(this, 'play-large'));\n      }\n\n      this.elements.controls = container; // Set available quality levels\n\n      if (this.isHTML5) {\n        controls.setQualityMenu.call(this, html5.getQualityOptions.call(this));\n      }\n\n      controls.setSpeedMenu.call(this);\n      return container;\n    },\n    // Insert controls\n    inject: function inject() {\n      var _this10 = this;\n\n      // Sprite\n      if (this.config.loadSprite) {\n        var icon = controls.getIconUrl.call(this); // Only load external sprite using AJAX\n\n        if (icon.cors) {\n          loadSprite(icon.url, 'sprite-plyr');\n        }\n      } // Create a unique ID\n\n\n      this.id = Math.floor(Math.random() * 10000); // Null by default\n\n      var container = null;\n      this.elements.controls = null; // Set template properties\n\n      var props = {\n        id: this.id,\n        seektime: this.config.seekTime,\n        title: this.config.title\n      };\n      var update = true; // If function, run it and use output\n\n      if (is.function(this.config.controls)) {\n        this.config.controls = this.config.controls.call(this.props);\n      } // Convert falsy controls to empty array (primarily for empty strings)\n\n\n      if (!this.config.controls) {\n        this.config.controls = [];\n      }\n\n      if (is.element(this.config.controls) || is.string(this.config.controls)) {\n        // HTMLElement or Non-empty string passed as the option\n        container = this.config.controls;\n      } else {\n        // Create controls\n        container = controls.create.call(this, {\n          id: this.id,\n          seektime: this.config.seekTime,\n          speed: this.speed,\n          quality: this.quality,\n          captions: captions.getLabel.call(this) // TODO: Looping\n          // loop: 'None',\n\n        });\n        update = false;\n      } // Replace props with their value\n\n\n      var replace = function replace(input) {\n        var result = input;\n        Object.entries(props).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              key = _ref3[0],\n              value = _ref3[1];\n\n          result = replaceAll(result, \"{\".concat(key, \"}\"), value);\n        });\n        return result;\n      }; // Update markup\n\n\n      if (update) {\n        if (is.string(this.config.controls)) {\n          container = replace(container);\n        } else if (is.element(container)) {\n          container.innerHTML = replace(container.innerHTML);\n        }\n      } // Controls container\n\n\n      var target; // Inject to custom location\n\n      if (is.string(this.config.selectors.controls.container)) {\n        target = document.querySelector(this.config.selectors.controls.container);\n      } // Inject into the container by default\n\n\n      if (!is.element(target)) {\n        target = this.elements.container;\n      } // Inject controls HTML (needs to be before captions, hence \"afterbegin\")\n\n\n      var insertMethod = is.element(container) ? 'insertAdjacentElement' : 'insertAdjacentHTML';\n      target[insertMethod]('afterbegin', container); // Find the elements if need be\n\n      if (!is.element(this.elements.controls)) {\n        controls.findElements.call(this);\n      } // Add pressed property to buttons\n\n\n      if (!is.empty(this.elements.buttons)) {\n        var addProperty = function addProperty(button) {\n          var className = _this10.config.classNames.controlPressed;\n          Object.defineProperty(button, 'pressed', {\n            enumerable: true,\n            get: function get() {\n              return hasClass(button, className);\n            },\n            set: function set() {\n              var pressed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n              toggleClass(button, className, pressed);\n            }\n          });\n        }; // Toggle classname when pressed property is set\n\n\n        Object.values(this.elements.buttons).filter(Boolean).forEach(function (button) {\n          if (is.array(button) || is.nodeList(button)) {\n            Array.from(button).filter(Boolean).forEach(addProperty);\n          } else {\n            addProperty(button);\n          }\n        });\n      } // Edge sometimes doesn't finish the paint so force a redraw\n\n\n      if (window.navigator.userAgent.includes('Edge')) {\n        repaint(target);\n      } // Setup tooltips\n\n\n      if (this.config.tooltips.controls) {\n        var _this$config = this.config,\n            classNames = _this$config.classNames,\n            selectors = _this$config.selectors;\n        var selector = \"\".concat(selectors.controls.wrapper, \" \").concat(selectors.labels, \" .\").concat(classNames.hidden);\n        var labels = getElements.call(this, selector);\n        Array.from(labels).forEach(function (label) {\n          toggleClass(label, _this10.config.classNames.hidden, false);\n          toggleClass(label, _this10.config.classNames.tooltip, true);\n        });\n      }\n    }\n  };\n\n  /**\n   * Parse a string to a URL object\n   * @param {string} input - the URL to be parsed\n   * @param {boolean} safe - failsafe parsing\n   */\n\n  function parseUrl(input) {\n    var safe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var url = input;\n\n    if (safe) {\n      var parser = document.createElement('a');\n      parser.href = url;\n      url = parser.href;\n    }\n\n    try {\n      return new URL(url);\n    } catch (e) {\n      return null;\n    }\n  } // Convert object to URLSearchParams\n\n  function buildUrlParams(input) {\n    var params = new URLSearchParams();\n\n    if (is.object(input)) {\n      Object.entries(input).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        params.set(key, value);\n      });\n    }\n\n    return params;\n  }\n\n  var captions = {\n    // Setup captions\n    setup: function setup() {\n      // Requires UI support\n      if (!this.supported.ui) {\n        return;\n      } // Only Vimeo and HTML5 video supported at this point\n\n\n      if (!this.isVideo || this.isYouTube || this.isHTML5 && !support.textTracks) {\n        // Clear menu and hide\n        if (is.array(this.config.controls) && this.config.controls.includes('settings') && this.config.settings.includes('captions')) {\n          controls.setCaptionsMenu.call(this);\n        }\n\n        return;\n      } // Inject the container\n\n\n      if (!is.element(this.elements.captions)) {\n        this.elements.captions = createElement('div', getAttributesFromSelector(this.config.selectors.captions));\n        insertAfter(this.elements.captions, this.elements.wrapper);\n      } // Fix IE captions if CORS is used\n      // Fetch captions and inject as blobs instead (data URIs not supported!)\n\n\n      if (browser.isIE && window.URL) {\n        var elements = this.media.querySelectorAll('track');\n        Array.from(elements).forEach(function (track) {\n          var src = track.getAttribute('src');\n          var url = parseUrl(src);\n\n          if (url !== null && url.hostname !== window.location.href.hostname && ['http:', 'https:'].includes(url.protocol)) {\n            fetch(src, 'blob').then(function (blob) {\n              track.setAttribute('src', window.URL.createObjectURL(blob));\n            }).catch(function () {\n              removeElement(track);\n            });\n          }\n        });\n      } // Get and set initial data\n      // The \"preferred\" options are not realized unless / until the wanted language has a match\n      // * languages: Array of user's browser languages.\n      // * language:  The language preferred by user settings or config\n      // * active:    The state preferred by user settings or config\n      // * toggled:   The real captions state\n\n\n      var browserLanguages = navigator.languages || [navigator.language || navigator.userLanguage || 'en'];\n      var languages = dedupe(browserLanguages.map(function (language) {\n        return language.split('-')[0];\n      }));\n      var language = (this.storage.get('language') || this.config.captions.language || 'auto').toLowerCase(); // Use first browser language when language is 'auto'\n\n      if (language === 'auto') {\n        var _languages = _slicedToArray(languages, 1);\n\n        language = _languages[0];\n      }\n\n      var active = this.storage.get('captions');\n\n      if (!is.boolean(active)) {\n        active = this.config.captions.active;\n      }\n\n      Object.assign(this.captions, {\n        toggled: false,\n        active: active,\n        language: language,\n        languages: languages\n      }); // Watch changes to textTracks and update captions menu\n\n      if (this.isHTML5) {\n        var trackEvents = this.config.captions.update ? 'addtrack removetrack' : 'removetrack';\n        on.call(this, this.media.textTracks, trackEvents, captions.update.bind(this));\n      } // Update available languages in list next tick (the event must not be triggered before the listeners)\n\n\n      setTimeout(captions.update.bind(this), 0);\n    },\n    // Update available language options in settings based on tracks\n    update: function update() {\n      var _this = this;\n\n      var tracks = captions.getTracks.call(this, true); // Get the wanted language\n\n      var _this$captions = this.captions,\n          active = _this$captions.active,\n          language = _this$captions.language,\n          meta = _this$captions.meta,\n          currentTrackNode = _this$captions.currentTrackNode;\n      var languageExists = Boolean(tracks.find(function (track) {\n        return track.language === language;\n      })); // Handle tracks (add event listener and \"pseudo\"-default)\n\n      if (this.isHTML5 && this.isVideo) {\n        tracks.filter(function (track) {\n          return !meta.get(track);\n        }).forEach(function (track) {\n          _this.debug.log('Track added', track); // Attempt to store if the original dom element was \"default\"\n\n\n          meta.set(track, {\n            default: track.mode === 'showing'\n          }); // Turn off native caption rendering to avoid double captions\n\n          track.mode = 'hidden'; // Add event listener for cue changes\n\n          on.call(_this, track, 'cuechange', function () {\n            return captions.updateCues.call(_this);\n          });\n        });\n      } // Update language first time it matches, or if the previous matching track was removed\n\n\n      if (languageExists && this.language !== language || !tracks.includes(currentTrackNode)) {\n        captions.setLanguage.call(this, language);\n        captions.toggle.call(this, active && languageExists);\n      } // Enable or disable captions based on track length\n\n\n      toggleClass(this.elements.container, this.config.classNames.captions.enabled, !is.empty(tracks)); // Update available languages in list\n\n      if ((this.config.controls || []).includes('settings') && this.config.settings.includes('captions')) {\n        controls.setCaptionsMenu.call(this);\n      }\n    },\n    // Toggle captions display\n    // Used internally for the toggleCaptions method, with the passive option forced to false\n    toggle: function toggle(input) {\n      var passive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      // If there's no full support\n      if (!this.supported.ui) {\n        return;\n      }\n\n      var toggled = this.captions.toggled; // Current state\n\n      var activeClass = this.config.classNames.captions.active; // Get the next state\n      // If the method is called without parameter, toggle based on current value\n\n      var active = is.nullOrUndefined(input) ? !toggled : input; // Update state and trigger event\n\n      if (active !== toggled) {\n        // When passive, don't override user preferences\n        if (!passive) {\n          this.captions.active = active;\n          this.storage.set({\n            captions: active\n          });\n        } // Force language if the call isn't passive and there is no matching language to toggle to\n\n\n        if (!this.language && active && !passive) {\n          var tracks = captions.getTracks.call(this);\n          var track = captions.findTrack.call(this, [this.captions.language].concat(_toConsumableArray(this.captions.languages)), true); // Override user preferences to avoid switching languages if a matching track is added\n\n          this.captions.language = track.language; // Set caption, but don't store in localStorage as user preference\n\n          captions.set.call(this, tracks.indexOf(track));\n          return;\n        } // Toggle button if it's enabled\n\n\n        if (this.elements.buttons.captions) {\n          this.elements.buttons.captions.pressed = active;\n        } // Add class hook\n\n\n        toggleClass(this.elements.container, activeClass, active);\n        this.captions.toggled = active; // Update settings menu\n\n        controls.updateSetting.call(this, 'captions'); // Trigger event (not used internally)\n\n        triggerEvent.call(this, this.media, active ? 'captionsenabled' : 'captionsdisabled');\n      }\n    },\n    // Set captions by track index\n    // Used internally for the currentTrack setter with the passive option forced to false\n    set: function set(index) {\n      var passive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var tracks = captions.getTracks.call(this); // Disable captions if setting to -1\n\n      if (index === -1) {\n        captions.toggle.call(this, false, passive);\n        return;\n      }\n\n      if (!is.number(index)) {\n        this.debug.warn('Invalid caption argument', index);\n        return;\n      }\n\n      if (!(index in tracks)) {\n        this.debug.warn('Track not found', index);\n        return;\n      }\n\n      if (this.captions.currentTrack !== index) {\n        this.captions.currentTrack = index;\n        var track = tracks[index];\n\n        var _ref = track || {},\n            language = _ref.language; // Store reference to node for invalidation on remove\n\n\n        this.captions.currentTrackNode = track; // Update settings menu\n\n        controls.updateSetting.call(this, 'captions'); // When passive, don't override user preferences\n\n        if (!passive) {\n          this.captions.language = language;\n          this.storage.set({\n            language: language\n          });\n        } // Handle Vimeo captions\n\n\n        if (this.isVimeo) {\n          this.embed.enableTextTrack(language);\n        } // Trigger event\n\n\n        triggerEvent.call(this, this.media, 'languagechange');\n      } // Show captions\n\n\n      captions.toggle.call(this, true, passive);\n\n      if (this.isHTML5 && this.isVideo) {\n        // If we change the active track while a cue is already displayed we need to update it\n        captions.updateCues.call(this);\n      }\n    },\n    // Set captions by language\n    // Used internally for the language setter with the passive option forced to false\n    setLanguage: function setLanguage(input) {\n      var passive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (!is.string(input)) {\n        this.debug.warn('Invalid language argument', input);\n        return;\n      } // Normalize\n\n\n      var language = input.toLowerCase();\n      this.captions.language = language; // Set currentTrack\n\n      var tracks = captions.getTracks.call(this);\n      var track = captions.findTrack.call(this, [language]);\n      captions.set.call(this, tracks.indexOf(track), passive);\n    },\n    // Get current valid caption tracks\n    // If update is false it will also ignore tracks without metadata\n    // This is used to \"freeze\" the language options when captions.update is false\n    getTracks: function getTracks() {\n      var _this2 = this;\n\n      var update = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      // Handle media or textTracks missing or null\n      var tracks = Array.from((this.media || {}).textTracks || []); // For HTML5, use cache instead of current tracks when it exists (if captions.update is false)\n      // Filter out removed tracks and tracks that aren't captions/subtitles (for example metadata)\n\n      return tracks.filter(function (track) {\n        return !_this2.isHTML5 || update || _this2.captions.meta.has(track);\n      }).filter(function (track) {\n        return ['captions', 'subtitles'].includes(track.kind);\n      });\n    },\n    // Match tracks based on languages and get the first\n    findTrack: function findTrack(languages) {\n      var _this3 = this;\n\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var tracks = captions.getTracks.call(this);\n\n      var sortIsDefault = function sortIsDefault(track) {\n        return Number((_this3.captions.meta.get(track) || {}).default);\n      };\n\n      var sorted = Array.from(tracks).sort(function (a, b) {\n        return sortIsDefault(b) - sortIsDefault(a);\n      });\n      var track;\n      languages.every(function (language) {\n        track = sorted.find(function (track) {\n          return track.language === language;\n        });\n        return !track; // Break iteration if there is a match\n      }); // If no match is found but is required, get first\n\n      return track || (force ? sorted[0] : undefined);\n    },\n    // Get the current track\n    getCurrentTrack: function getCurrentTrack() {\n      return captions.getTracks.call(this)[this.currentTrack];\n    },\n    // Get UI label for track\n    getLabel: function getLabel(track) {\n      var currentTrack = track;\n\n      if (!is.track(currentTrack) && support.textTracks && this.captions.toggled) {\n        currentTrack = captions.getCurrentTrack.call(this);\n      }\n\n      if (is.track(currentTrack)) {\n        if (!is.empty(currentTrack.label)) {\n          return currentTrack.label;\n        }\n\n        if (!is.empty(currentTrack.language)) {\n          return track.language.toUpperCase();\n        }\n\n        return i18n.get('enabled', this.config);\n      }\n\n      return i18n.get('disabled', this.config);\n    },\n    // Update captions using current track's active cues\n    // Also optional array argument in case there isn't any track (ex: vimeo)\n    updateCues: function updateCues(input) {\n      // Requires UI\n      if (!this.supported.ui) {\n        return;\n      }\n\n      if (!is.element(this.elements.captions)) {\n        this.debug.warn('No captions element to render to');\n        return;\n      } // Only accept array or empty input\n\n\n      if (!is.nullOrUndefined(input) && !Array.isArray(input)) {\n        this.debug.warn('updateCues: Invalid input', input);\n        return;\n      }\n\n      var cues = input; // Get cues from track\n\n      if (!cues) {\n        var track = captions.getCurrentTrack.call(this);\n        cues = Array.from((track || {}).activeCues || []).map(function (cue) {\n          return cue.getCueAsHTML();\n        }).map(getHTML);\n      } // Set new caption text\n\n\n      var content = cues.map(function (cueText) {\n        return cueText.trim();\n      }).join('\\n');\n      var changed = content !== this.elements.captions.innerHTML;\n\n      if (changed) {\n        // Empty the container and create a new child element\n        emptyElement(this.elements.captions);\n        var caption = createElement('span', getAttributesFromSelector(this.config.selectors.caption));\n        caption.innerHTML = content;\n        this.elements.captions.appendChild(caption); // Trigger event\n\n        triggerEvent.call(this, this.media, 'cuechange');\n      }\n    }\n  };\n\n  // ==========================================================================\n  // Plyr default config\n  // ==========================================================================\n  var defaults = {\n    // Disable\n    enabled: true,\n    // Custom media title\n    title: '',\n    // Logging to console\n    debug: false,\n    // Auto play (if supported)\n    autoplay: false,\n    // Only allow one media playing at once (vimeo only)\n    autopause: true,\n    // Allow inline playback on iOS (this effects YouTube/Vimeo - HTML5 requires the attribute present)\n    // TODO: Remove iosNative fullscreen option in favour of this (logic needs work)\n    playsinline: true,\n    // Default time to skip when rewind/fast forward\n    seekTime: 10,\n    // Default volume\n    volume: 1,\n    muted: false,\n    // Pass a custom duration\n    duration: null,\n    // Display the media duration on load in the current time position\n    // If you have opted to display both duration and currentTime, this is ignored\n    displayDuration: true,\n    // Invert the current time to be a countdown\n    invertTime: true,\n    // Clicking the currentTime inverts it's value to show time left rather than elapsed\n    toggleInvert: true,\n    // Aspect ratio (for embeds)\n    ratio: '16:9',\n    // Click video container to play/pause\n    clickToPlay: true,\n    // Auto hide the controls\n    hideControls: true,\n    // Reset to start when playback ended\n    resetOnEnd: false,\n    // Disable the standard context menu\n    disableContextMenu: true,\n    // Sprite (for icons)\n    loadSprite: true,\n    iconPrefix: 'plyr',\n    iconUrl: 'https://cdn.plyr.io/3.4.7/plyr.svg',\n    // Blank video (used to prevent errors on source change)\n    blankVideo: 'https://cdn.plyr.io/static/blank.mp4',\n    // Quality default\n    quality: {\n      default: 576,\n      options: [4320, 2880, 2160, 1440, 1080, 720, 576, 480, 360, 240]\n    },\n    // Set loops\n    loop: {\n      active: false // start: null,\n      // end: null,\n\n    },\n    // Speed default and options to display\n    speed: {\n      selected: 1,\n      options: [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2]\n    },\n    // Keyboard shortcut settings\n    keyboard: {\n      focused: true,\n      global: false\n    },\n    // Display tooltips\n    tooltips: {\n      controls: false,\n      seek: true\n    },\n    // Captions settings\n    captions: {\n      active: false,\n      language: 'auto',\n      // Listen to new tracks added after Plyr is initialized.\n      // This is needed for streaming captions, but may result in unselectable options\n      update: false\n    },\n    // Fullscreen settings\n    fullscreen: {\n      enabled: true,\n      // Allow fullscreen?\n      fallback: true,\n      // Fallback for vintage browsers\n      iosNative: false // Use the native fullscreen in iOS (disables custom controls)\n\n    },\n    // Local storage\n    storage: {\n      enabled: true,\n      key: 'plyr'\n    },\n    // Default controls\n    controls: ['play-large', // 'restart',\n    // 'rewind',\n    'play', // 'fast-forward',\n    'progress', 'current-time', 'mute', 'volume', 'captions', 'settings', 'pip', 'airplay', // 'download',\n    'fullscreen'],\n    settings: ['captions', 'quality', 'speed'],\n    // Localisation\n    i18n: {\n      restart: 'Restart',\n      rewind: 'Rewind {seektime}s',\n      play: 'Play',\n      pause: 'Pause',\n      fastForward: 'Forward {seektime}s',\n      seek: 'Seek',\n      seekLabel: '{currentTime} of {duration}',\n      played: 'Played',\n      buffered: 'Buffered',\n      currentTime: 'Current time',\n      duration: 'Duration',\n      volume: 'Volume',\n      mute: 'Mute',\n      unmute: 'Unmute',\n      enableCaptions: 'Enable captions',\n      disableCaptions: 'Disable captions',\n      download: 'Download',\n      enterFullscreen: 'Enter fullscreen',\n      exitFullscreen: 'Exit fullscreen',\n      frameTitle: 'Player for {title}',\n      captions: 'Captions',\n      settings: 'Settings',\n      menuBack: 'Go back to previous menu',\n      speed: 'Speed',\n      normal: 'Normal',\n      quality: 'Quality',\n      loop: 'Loop',\n      start: 'Start',\n      end: 'End',\n      all: 'All',\n      reset: 'Reset',\n      disabled: 'Disabled',\n      enabled: 'Enabled',\n      advertisement: 'Ad',\n      qualityBadge: {\n        2160: '4K',\n        1440: 'HD',\n        1080: 'HD',\n        720: 'HD',\n        576: 'SD',\n        480: 'SD'\n      }\n    },\n    // URLs\n    urls: {\n      download: null,\n      vimeo: {\n        sdk: 'https://player.vimeo.com/api/player.js',\n        iframe: 'https://player.vimeo.com/video/{0}?{1}',\n        api: 'https://vimeo.com/api/v2/video/{0}.json'\n      },\n      youtube: {\n        sdk: 'https://www.youtube.com/iframe_api',\n        api: 'https://www.googleapis.com/youtube/v3/videos?id={0}&key={1}&fields=items(snippet(title))&part=snippet'\n      },\n      googleIMA: {\n        sdk: 'https://imasdk.googleapis.com/js/sdkloader/ima3.js'\n      }\n    },\n    // Custom control listeners\n    listeners: {\n      seek: null,\n      play: null,\n      pause: null,\n      restart: null,\n      rewind: null,\n      fastForward: null,\n      mute: null,\n      volume: null,\n      captions: null,\n      download: null,\n      fullscreen: null,\n      pip: null,\n      airplay: null,\n      speed: null,\n      quality: null,\n      loop: null,\n      language: null\n    },\n    // Events to watch and bubble\n    events: [// Events to watch on HTML5 media elements and bubble\n    // https://developer.mozilla.org/en/docs/Web/Guide/Events/Media_events\n    'ended', 'progress', 'stalled', 'playing', 'waiting', 'canplay', 'canplaythrough', 'loadstart', 'loadeddata', 'loadedmetadata', 'timeupdate', 'volumechange', 'play', 'pause', 'error', 'seeking', 'seeked', 'emptied', 'ratechange', 'cuechange', // Custom events\n    'download', 'enterfullscreen', 'exitfullscreen', 'captionsenabled', 'captionsdisabled', 'languagechange', 'controlshidden', 'controlsshown', 'ready', // YouTube\n    'statechange', // Quality\n    'qualitychange', // Ads\n    'adsloaded', 'adscontentpause', 'adscontentresume', 'adstarted', 'adsmidpoint', 'adscomplete', 'adsallcomplete', 'adsimpression', 'adsclick'],\n    // Selectors\n    // Change these to match your template if using custom HTML\n    selectors: {\n      editable: 'input, textarea, select, [contenteditable]',\n      container: '.plyr',\n      controls: {\n        container: null,\n        wrapper: '.plyr__controls'\n      },\n      labels: '[data-plyr]',\n      buttons: {\n        play: '[data-plyr=\"play\"]',\n        pause: '[data-plyr=\"pause\"]',\n        restart: '[data-plyr=\"restart\"]',\n        rewind: '[data-plyr=\"rewind\"]',\n        fastForward: '[data-plyr=\"fast-forward\"]',\n        mute: '[data-plyr=\"mute\"]',\n        captions: '[data-plyr=\"captions\"]',\n        download: '[data-plyr=\"download\"]',\n        fullscreen: '[data-plyr=\"fullscreen\"]',\n        pip: '[data-plyr=\"pip\"]',\n        airplay: '[data-plyr=\"airplay\"]',\n        settings: '[data-plyr=\"settings\"]',\n        loop: '[data-plyr=\"loop\"]'\n      },\n      inputs: {\n        seek: '[data-plyr=\"seek\"]',\n        volume: '[data-plyr=\"volume\"]',\n        speed: '[data-plyr=\"speed\"]',\n        language: '[data-plyr=\"language\"]',\n        quality: '[data-plyr=\"quality\"]'\n      },\n      display: {\n        currentTime: '.plyr__time--current',\n        duration: '.plyr__time--duration',\n        buffer: '.plyr__progress__buffer',\n        loop: '.plyr__progress__loop',\n        // Used later\n        volume: '.plyr__volume--display'\n      },\n      progress: '.plyr__progress',\n      captions: '.plyr__captions',\n      caption: '.plyr__caption',\n      menu: {\n        quality: '.js-plyr__menu__list--quality'\n      }\n    },\n    // Class hooks added to the player in different states\n    classNames: {\n      type: 'plyr--{0}',\n      provider: 'plyr--{0}',\n      video: 'plyr__video-wrapper',\n      embed: 'plyr__video-embed',\n      embedContainer: 'plyr__video-embed__container',\n      poster: 'plyr__poster',\n      posterEnabled: 'plyr__poster-enabled',\n      ads: 'plyr__ads',\n      control: 'plyr__control',\n      controlPressed: 'plyr__control--pressed',\n      playing: 'plyr--playing',\n      paused: 'plyr--paused',\n      stopped: 'plyr--stopped',\n      loading: 'plyr--loading',\n      hover: 'plyr--hover',\n      tooltip: 'plyr__tooltip',\n      cues: 'plyr__cues',\n      hidden: 'plyr__sr-only',\n      hideControls: 'plyr--hide-controls',\n      isIos: 'plyr--is-ios',\n      isTouch: 'plyr--is-touch',\n      uiSupported: 'plyr--full-ui',\n      noTransition: 'plyr--no-transition',\n      display: {\n        time: 'plyr__time'\n      },\n      menu: {\n        value: 'plyr__menu__value',\n        badge: 'plyr__badge',\n        open: 'plyr--menu-open'\n      },\n      captions: {\n        enabled: 'plyr--captions-enabled',\n        active: 'plyr--captions-active'\n      },\n      fullscreen: {\n        enabled: 'plyr--fullscreen-enabled',\n        fallback: 'plyr--fullscreen-fallback'\n      },\n      pip: {\n        supported: 'plyr--pip-supported',\n        active: 'plyr--pip-active'\n      },\n      airplay: {\n        supported: 'plyr--airplay-supported',\n        active: 'plyr--airplay-active'\n      },\n      tabFocus: 'plyr__tab-focus'\n    },\n    // Embed attributes\n    attributes: {\n      embed: {\n        provider: 'data-plyr-provider',\n        id: 'data-plyr-embed-id'\n      }\n    },\n    // API keys\n    keys: {\n      google: null\n    },\n    // Advertisements plugin\n    // Register for an account here: http://vi.ai/publisher-video-monetization/?aid=plyrio\n    ads: {\n      enabled: false,\n      publisherId: ''\n    }\n  };\n\n  // ==========================================================================\n  // Plyr states\n  // ==========================================================================\n  var pip = {\n    active: 'picture-in-picture',\n    inactive: 'inline'\n  };\n\n  // ==========================================================================\n  // Plyr supported types and providers\n  // ==========================================================================\n  var providers = {\n    html5: 'html5',\n    youtube: 'youtube',\n    vimeo: 'vimeo'\n  };\n  var types = {\n    audio: 'audio',\n    video: 'video'\n  };\n  /**\n   * Get provider by URL\n   * @param {String} url\n   */\n\n  function getProviderByUrl(url) {\n    // YouTube\n    if (/^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtu\\.?be)\\/.+$/.test(url)) {\n      return providers.youtube;\n    } // Vimeo\n\n\n    if (/^https?:\\/\\/player.vimeo.com\\/video\\/\\d{0,9}(?=\\b|\\/)/.test(url)) {\n      return providers.vimeo;\n    }\n\n    return null;\n  }\n\n  // ==========================================================================\n  // Console wrapper\n  // ==========================================================================\n  var noop = function noop() {};\n\n  var Console =\n  /*#__PURE__*/\n  function () {\n    function Console() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      _classCallCheck(this, Console);\n\n      this.enabled = window.console && enabled;\n\n      if (this.enabled) {\n        this.log('Debugging enabled');\n      }\n    }\n\n    _createClass(Console, [{\n      key: \"log\",\n      get: function get() {\n        // eslint-disable-next-line no-console\n        return this.enabled ? Function.prototype.bind.call(console.log, console) : noop;\n      }\n    }, {\n      key: \"warn\",\n      get: function get() {\n        // eslint-disable-next-line no-console\n        return this.enabled ? Function.prototype.bind.call(console.warn, console) : noop;\n      }\n    }, {\n      key: \"error\",\n      get: function get() {\n        // eslint-disable-next-line no-console\n        return this.enabled ? Function.prototype.bind.call(console.error, console) : noop;\n      }\n    }]);\n\n    return Console;\n  }();\n\n  function onChange() {\n    if (!this.enabled) {\n      return;\n    } // Update toggle button\n\n\n    var button = this.player.elements.buttons.fullscreen;\n\n    if (is.element(button)) {\n      button.pressed = this.active;\n    } // Trigger an event\n\n\n    triggerEvent.call(this.player, this.target, this.active ? 'enterfullscreen' : 'exitfullscreen', true); // Trap focus in container\n\n    if (!browser.isIos) {\n      trapFocus.call(this.player, this.target, this.active);\n    }\n  }\n\n  function toggleFallback() {\n    var _this = this;\n\n    var toggle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    // Store or restore scroll position\n    if (toggle) {\n      this.scrollPosition = {\n        x: window.scrollX || 0,\n        y: window.scrollY || 0\n      };\n    } else {\n      window.scrollTo(this.scrollPosition.x, this.scrollPosition.y);\n    } // Toggle scroll\n\n\n    document.body.style.overflow = toggle ? 'hidden' : ''; // Toggle class hook\n\n    toggleClass(this.target, this.player.config.classNames.fullscreen.fallback, toggle); // Force full viewport on iPhone X+\n\n    if (browser.isIos) {\n      var viewport = document.head.querySelector('meta[name=\"viewport\"]');\n      var property = 'viewport-fit=cover'; // Inject the viewport meta if required\n\n      if (!viewport) {\n        viewport = document.createElement('meta');\n        viewport.setAttribute('name', 'viewport');\n      } // Check if the property already exists\n\n\n      var hasProperty = is.string(viewport.content) && viewport.content.includes(property);\n\n      if (toggle) {\n        this.cleanupViewport = !hasProperty;\n\n        if (!hasProperty) {\n          viewport.content += \",\".concat(property);\n        }\n      } else if (this.cleanupViewport) {\n        viewport.content = viewport.content.split(',').filter(function (part) {\n          return part.trim() !== property;\n        }).join(',');\n      } // Force a repaint as sometimes Safari doesn't want to fill the screen\n\n\n      setTimeout(function () {\n        return repaint(_this.target);\n      }, 100);\n    } // Toggle button and fire events\n\n\n    onChange.call(this);\n  }\n\n  var Fullscreen =\n  /*#__PURE__*/\n  function () {\n    function Fullscreen(player) {\n      var _this2 = this;\n\n      _classCallCheck(this, Fullscreen);\n\n      // Keep reference to parent\n      this.player = player; // Get prefix\n\n      this.prefix = Fullscreen.prefix;\n      this.property = Fullscreen.property; // Scroll position\n\n      this.scrollPosition = {\n        x: 0,\n        y: 0\n      }; // Register event listeners\n      // Handle event (incase user presses escape etc)\n\n      on.call(this.player, document, this.prefix === 'ms' ? 'MSFullscreenChange' : \"\".concat(this.prefix, \"fullscreenchange\"), function () {\n        // TODO: Filter for target??\n        onChange.call(_this2);\n      }); // Fullscreen toggle on double click\n\n      on.call(this.player, this.player.elements.container, 'dblclick', function (event) {\n        // Ignore double click in controls\n        if (is.element(_this2.player.elements.controls) && _this2.player.elements.controls.contains(event.target)) {\n          return;\n        }\n\n        _this2.toggle();\n      }); // Update the UI\n\n      this.update();\n    } // Determine if native supported\n\n\n    _createClass(Fullscreen, [{\n      key: \"update\",\n      // Update UI\n      value: function update() {\n        if (this.enabled) {\n          this.player.debug.log(\"\".concat(Fullscreen.native ? 'Native' : 'Fallback', \" fullscreen enabled\"));\n        } else {\n          this.player.debug.log('Fullscreen not supported and fallback disabled');\n        } // Add styling hook to show button\n\n\n        toggleClass(this.player.elements.container, this.player.config.classNames.fullscreen.enabled, this.enabled);\n      } // Make an element fullscreen\n\n    }, {\n      key: \"enter\",\n      value: function enter() {\n        if (!this.enabled) {\n          return;\n        } // iOS native fullscreen doesn't need the request step\n\n\n        if (browser.isIos && this.player.config.fullscreen.iosNative) {\n          this.target.webkitEnterFullscreen();\n        } else if (!Fullscreen.native) {\n          toggleFallback.call(this, true);\n        } else if (!this.prefix) {\n          this.target.requestFullscreen();\n        } else if (!is.empty(this.prefix)) {\n          this.target[\"\".concat(this.prefix, \"Request\").concat(this.property)]();\n        }\n      } // Bail from fullscreen\n\n    }, {\n      key: \"exit\",\n      value: function exit() {\n        if (!this.enabled) {\n          return;\n        } // iOS native fullscreen\n\n\n        if (browser.isIos && this.player.config.fullscreen.iosNative) {\n          this.target.webkitExitFullscreen();\n          this.player.play();\n        } else if (!Fullscreen.native) {\n          toggleFallback.call(this, false);\n        } else if (!this.prefix) {\n          (document.cancelFullScreen || document.exitFullscreen).call(document);\n        } else if (!is.empty(this.prefix)) {\n          var action = this.prefix === 'moz' ? 'Cancel' : 'Exit';\n          document[\"\".concat(this.prefix).concat(action).concat(this.property)]();\n        }\n      } // Toggle state\n\n    }, {\n      key: \"toggle\",\n      value: function toggle() {\n        if (!this.active) {\n          this.enter();\n        } else {\n          this.exit();\n        }\n      }\n    }, {\n      key: \"enabled\",\n      // Determine if fullscreen is enabled\n      get: function get() {\n        return (Fullscreen.native || this.player.config.fullscreen.fallback) && this.player.config.fullscreen.enabled && this.player.supported.ui && this.player.isVideo;\n      } // Get active state\n\n    }, {\n      key: \"active\",\n      get: function get() {\n        if (!this.enabled) {\n          return false;\n        } // Fallback using classname\n\n\n        if (!Fullscreen.native) {\n          return hasClass(this.target, this.player.config.classNames.fullscreen.fallback);\n        }\n\n        var element = !this.prefix ? document.fullscreenElement : document[\"\".concat(this.prefix).concat(this.property, \"Element\")];\n        return element === this.target;\n      } // Get target element\n\n    }, {\n      key: \"target\",\n      get: function get() {\n        return browser.isIos && this.player.config.fullscreen.iosNative ? this.player.media : this.player.elements.container;\n      }\n    }], [{\n      key: \"native\",\n      get: function get() {\n        return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);\n      } // Get the prefix for handlers\n\n    }, {\n      key: \"prefix\",\n      get: function get() {\n        // No prefix\n        if (is.function(document.exitFullscreen)) {\n          return '';\n        } // Check for fullscreen support by vendor prefix\n\n\n        var value = '';\n        var prefixes = ['webkit', 'moz', 'ms'];\n        prefixes.some(function (pre) {\n          if (is.function(document[\"\".concat(pre, \"ExitFullscreen\")]) || is.function(document[\"\".concat(pre, \"CancelFullScreen\")])) {\n            value = pre;\n            return true;\n          }\n\n          return false;\n        });\n        return value;\n      }\n    }, {\n      key: \"property\",\n      get: function get() {\n        return this.prefix === 'moz' ? 'FullScreen' : 'Fullscreen';\n      }\n    }]);\n\n    return Fullscreen;\n  }();\n\n  // ==========================================================================\n  // Load image avoiding xhr/fetch CORS issues\n  // Server status can't be obtained this way unfortunately, so this uses \"naturalWidth\" to determine if the image has loaded\n  // By default it checks if it is at least 1px, but you can add a second argument to change this\n  // ==========================================================================\n  function loadImage(src) {\n    var minWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return new Promise(function (resolve, reject) {\n      var image = new Image();\n\n      var handler = function handler() {\n        delete image.onload;\n        delete image.onerror;\n        (image.naturalWidth >= minWidth ? resolve : reject)(image);\n      };\n\n      Object.assign(image, {\n        onload: handler,\n        onerror: handler,\n        src: src\n      });\n    });\n  }\n\n  // ==========================================================================\n  var ui = {\n    addStyleHook: function addStyleHook() {\n      toggleClass(this.elements.container, this.config.selectors.container.replace('.', ''), true);\n      toggleClass(this.elements.container, this.config.classNames.uiSupported, this.supported.ui);\n    },\n    // Toggle native HTML5 media controls\n    toggleNativeControls: function toggleNativeControls() {\n      var toggle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (toggle && this.isHTML5) {\n        this.media.setAttribute('controls', '');\n      } else {\n        this.media.removeAttribute('controls');\n      }\n    },\n    // Setup the UI\n    build: function build() {\n      var _this = this;\n\n      // Re-attach media element listeners\n      // TODO: Use event bubbling?\n      this.listeners.media(); // Don't setup interface if no support\n\n      if (!this.supported.ui) {\n        this.debug.warn(\"Basic support only for \".concat(this.provider, \" \").concat(this.type)); // Restore native controls\n\n        ui.toggleNativeControls.call(this, true); // Bail\n\n        return;\n      } // Inject custom controls if not present\n\n\n      if (!is.element(this.elements.controls)) {\n        // Inject custom controls\n        controls.inject.call(this); // Re-attach control listeners\n\n        this.listeners.controls();\n      } // Remove native controls\n\n\n      ui.toggleNativeControls.call(this); // Setup captions for HTML5\n\n      if (this.isHTML5) {\n        captions.setup.call(this);\n      } // Reset volume\n\n\n      this.volume = null; // Reset mute state\n\n      this.muted = null; // Reset speed\n\n      this.speed = null; // Reset loop state\n\n      this.loop = null; // Reset quality setting\n\n      this.quality = null; // Reset volume display\n\n      controls.updateVolume.call(this); // Reset time display\n\n      controls.timeUpdate.call(this); // Update the UI\n\n      ui.checkPlaying.call(this); // Check for picture-in-picture support\n\n      toggleClass(this.elements.container, this.config.classNames.pip.supported, support.pip && this.isHTML5 && this.isVideo); // Check for airplay support\n\n      toggleClass(this.elements.container, this.config.classNames.airplay.supported, support.airplay && this.isHTML5); // Add iOS class\n\n      toggleClass(this.elements.container, this.config.classNames.isIos, browser.isIos); // Add touch class\n\n      toggleClass(this.elements.container, this.config.classNames.isTouch, this.touch); // Ready for API calls\n\n      this.ready = true; // Ready event at end of execution stack\n\n      setTimeout(function () {\n        triggerEvent.call(_this, _this.media, 'ready');\n      }, 0); // Set the title\n\n      ui.setTitle.call(this); // Assure the poster image is set, if the property was added before the element was created\n\n      if (this.poster) {\n        ui.setPoster.call(this, this.poster, false).catch(function () {});\n      } // Manually set the duration if user has overridden it.\n      // The event listeners for it doesn't get called if preload is disabled (#701)\n\n\n      if (this.config.duration) {\n        controls.durationUpdate.call(this);\n      }\n    },\n    // Setup aria attribute for play and iframe title\n    setTitle: function setTitle() {\n      // Find the current text\n      var label = i18n.get('play', this.config); // If there's a media title set, use that for the label\n\n      if (is.string(this.config.title) && !is.empty(this.config.title)) {\n        label += \", \".concat(this.config.title);\n      } // If there's a play button, set label\n\n\n      Array.from(this.elements.buttons.play || []).forEach(function (button) {\n        button.setAttribute('aria-label', label);\n      }); // Set iframe title\n      // https://github.com/sampotts/plyr/issues/124\n\n      if (this.isEmbed) {\n        var iframe = getElement.call(this, 'iframe');\n\n        if (!is.element(iframe)) {\n          return;\n        } // Default to media type\n\n\n        var title = !is.empty(this.config.title) ? this.config.title : 'video';\n        var format = i18n.get('frameTitle', this.config);\n        iframe.setAttribute('title', format.replace('{title}', title));\n      }\n    },\n    // Toggle poster\n    togglePoster: function togglePoster(enable) {\n      toggleClass(this.elements.container, this.config.classNames.posterEnabled, enable);\n    },\n    // Set the poster image (async)\n    // Used internally for the poster setter, with the passive option forced to false\n    setPoster: function setPoster(poster) {\n      var _this2 = this;\n\n      var passive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      // Don't override if call is passive\n      if (passive && this.poster) {\n        return Promise.reject(new Error('Poster already set'));\n      } // Set property synchronously to respect the call order\n\n\n      this.media.setAttribute('poster', poster); // Wait until ui is ready\n\n      return ready.call(this) // Load image\n      .then(function () {\n        return loadImage(poster);\n      }).catch(function (err) {\n        // Hide poster on error unless it's been set by another call\n        if (poster === _this2.poster) {\n          ui.togglePoster.call(_this2, false);\n        } // Rethrow\n\n\n        throw err;\n      }).then(function () {\n        // Prevent race conditions\n        if (poster !== _this2.poster) {\n          throw new Error('setPoster cancelled by later call to setPoster');\n        }\n      }).then(function () {\n        Object.assign(_this2.elements.poster.style, {\n          backgroundImage: \"url('\".concat(poster, \"')\"),\n          // Reset backgroundSize as well (since it can be set to \"cover\" for padded thumbnails for youtube)\n          backgroundSize: ''\n        });\n        ui.togglePoster.call(_this2, true);\n        return poster;\n      });\n    },\n    // Check playing state\n    checkPlaying: function checkPlaying(event) {\n      var _this3 = this;\n\n      // Class hooks\n      toggleClass(this.elements.container, this.config.classNames.playing, this.playing);\n      toggleClass(this.elements.container, this.config.classNames.paused, this.paused);\n      toggleClass(this.elements.container, this.config.classNames.stopped, this.stopped); // Set state\n\n      Array.from(this.elements.buttons.play || []).forEach(function (target) {\n        target.pressed = _this3.playing;\n      }); // Only update controls on non timeupdate events\n\n      if (is.event(event) && event.type === 'timeupdate') {\n        return;\n      } // Toggle controls\n\n\n      ui.toggleControls.call(this);\n    },\n    // Check if media is loading\n    checkLoading: function checkLoading(event) {\n      var _this4 = this;\n\n      this.loading = ['stalled', 'waiting'].includes(event.type); // Clear timer\n\n      clearTimeout(this.timers.loading); // Timer to prevent flicker when seeking\n\n      this.timers.loading = setTimeout(function () {\n        // Update progress bar loading class state\n        toggleClass(_this4.elements.container, _this4.config.classNames.loading, _this4.loading); // Update controls visibility\n\n        ui.toggleControls.call(_this4);\n      }, this.loading ? 250 : 0);\n    },\n    // Toggle controls based on state and `force` argument\n    toggleControls: function toggleControls(force) {\n      var controls$$1 = this.elements.controls;\n\n      if (controls$$1 && this.config.hideControls) {\n        // Don't hide controls if a touch-device user recently seeked. (Must be limited to touch devices, or it occasionally prevents desktop controls from hiding.)\n        var recentTouchSeek = this.touch && this.lastSeekTime + 2000 > Date.now(); // Show controls if force, loading, paused, button interaction, or recent seek, otherwise hide\n\n        this.toggleControls(Boolean(force || this.loading || this.paused || controls$$1.pressed || controls$$1.hover || recentTouchSeek));\n      }\n    }\n  };\n\n  var Listeners =\n  /*#__PURE__*/\n  function () {\n    function Listeners(player) {\n      _classCallCheck(this, Listeners);\n\n      this.player = player;\n      this.lastKey = null;\n      this.focusTimer = null;\n      this.lastKeyDown = null;\n      this.handleKey = this.handleKey.bind(this);\n      this.toggleMenu = this.toggleMenu.bind(this);\n      this.setTabFocus = this.setTabFocus.bind(this);\n      this.firstTouch = this.firstTouch.bind(this);\n    } // Handle key presses\n\n\n    _createClass(Listeners, [{\n      key: \"handleKey\",\n      value: function handleKey(event) {\n        var player = this.player;\n        var elements = player.elements;\n        var code = event.keyCode ? event.keyCode : event.which;\n        var pressed = event.type === 'keydown';\n        var repeat = pressed && code === this.lastKey; // Bail if a modifier key is set\n\n        if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n          return;\n        } // If the event is bubbled from the media element\n        // Firefox doesn't get the keycode for whatever reason\n\n\n        if (!is.number(code)) {\n          return;\n        } // Seek by the number keys\n\n\n        var seekByKey = function seekByKey() {\n          // Divide the max duration into 10th's and times by the number value\n          player.currentTime = player.duration / 10 * (code - 48);\n        }; // Handle the key on keydown\n        // Reset on keyup\n\n\n        if (pressed) {\n          // Check focused element\n          // and if the focused element is not editable (e.g. text input)\n          // and any that accept key input http://webaim.org/techniques/keyboard/\n          var focused = document.activeElement;\n\n          if (is.element(focused)) {\n            var editable = player.config.selectors.editable;\n            var seek = elements.inputs.seek;\n\n            if (focused !== seek && matches(focused, editable)) {\n              return;\n            }\n\n            if (event.which === 32 && matches(focused, 'button, [role^=\"menuitem\"]')) {\n              return;\n            }\n          } // Which keycodes should we prevent default\n\n\n          var preventDefault = [32, 37, 38, 39, 40, 48, 49, 50, 51, 52, 53, 54, 56, 57, 67, 70, 73, 75, 76, 77, 79]; // If the code is found prevent default (e.g. prevent scrolling for arrows)\n\n          if (preventDefault.includes(code)) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n\n          switch (code) {\n            case 48:\n            case 49:\n            case 50:\n            case 51:\n            case 52:\n            case 53:\n            case 54:\n            case 55:\n            case 56:\n            case 57:\n              // 0-9\n              if (!repeat) {\n                seekByKey();\n              }\n\n              break;\n\n            case 32:\n            case 75:\n              // Space and K key\n              if (!repeat) {\n                player.togglePlay();\n              }\n\n              break;\n\n            case 38:\n              // Arrow up\n              player.increaseVolume(0.1);\n              break;\n\n            case 40:\n              // Arrow down\n              player.decreaseVolume(0.1);\n              break;\n\n            case 77:\n              // M key\n              if (!repeat) {\n                player.muted = !player.muted;\n              }\n\n              break;\n\n            case 39:\n              // Arrow forward\n              player.forward();\n              break;\n\n            case 37:\n              // Arrow back\n              player.rewind();\n              break;\n\n            case 70:\n              // F key\n              player.fullscreen.toggle();\n              break;\n\n            case 67:\n              // C key\n              if (!repeat) {\n                player.toggleCaptions();\n              }\n\n              break;\n\n            case 76:\n              // L key\n              player.loop = !player.loop;\n              break;\n\n            /* case 73:\n            this.setLoop('start');\n            break;\n            case 76:\n            this.setLoop();\n            break;\n            case 79:\n            this.setLoop('end');\n            break; */\n\n            default:\n              break;\n          } // Escape is handle natively when in full screen\n          // So we only need to worry about non native\n\n\n          if (!player.fullscreen.enabled && player.fullscreen.active && code === 27) {\n            player.fullscreen.toggle();\n          } // Store last code for next cycle\n\n\n          this.lastKey = code;\n        } else {\n          this.lastKey = null;\n        }\n      } // Toggle menu\n\n    }, {\n      key: \"toggleMenu\",\n      value: function toggleMenu(event) {\n        controls.toggleMenu.call(this.player, event);\n      } // Device is touch enabled\n\n    }, {\n      key: \"firstTouch\",\n      value: function firstTouch() {\n        var player = this.player;\n        var elements = player.elements;\n        player.touch = true; // Add touch class\n\n        toggleClass(elements.container, player.config.classNames.isTouch, true);\n      }\n    }, {\n      key: \"setTabFocus\",\n      value: function setTabFocus(event) {\n        var player = this.player;\n        var elements = player.elements;\n        clearTimeout(this.focusTimer); // Ignore any key other than tab\n\n        if (event.type === 'keydown' && event.which !== 9) {\n          return;\n        } // Store reference to event timeStamp\n\n\n        if (event.type === 'keydown') {\n          this.lastKeyDown = event.timeStamp;\n        } // Remove current classes\n\n\n        var removeCurrent = function removeCurrent() {\n          var className = player.config.classNames.tabFocus;\n          var current = getElements.call(player, \".\".concat(className));\n          toggleClass(current, className, false);\n        }; // Determine if a key was pressed to trigger this event\n\n\n        var wasKeyDown = event.timeStamp - this.lastKeyDown <= 20; // Ignore focus events if a key was pressed prior\n\n        if (event.type === 'focus' && !wasKeyDown) {\n          return;\n        } // Remove all current\n\n\n        removeCurrent(); // Delay the adding of classname until the focus has changed\n        // This event fires before the focusin event\n\n        this.focusTimer = setTimeout(function () {\n          var focused = document.activeElement; // Ignore if current focus element isn't inside the player\n\n          if (!elements.container.contains(focused)) {\n            return;\n          }\n\n          toggleClass(document.activeElement, player.config.classNames.tabFocus, true);\n        }, 10);\n      } // Global window & document listeners\n\n    }, {\n      key: \"global\",\n      value: function global() {\n        var toggle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        var player = this.player; // Keyboard shortcuts\n\n        if (player.config.keyboard.global) {\n          toggleListener.call(player, window, 'keydown keyup', this.handleKey, toggle, false);\n        } // Click anywhere closes menu\n\n\n        toggleListener.call(player, document.body, 'click', this.toggleMenu, toggle); // Detect touch by events\n\n        once.call(player, document.body, 'touchstart', this.firstTouch); // Tab focus detection\n\n        toggleListener.call(player, document.body, 'keydown focus blur', this.setTabFocus, toggle, false, true);\n      } // Container listeners\n\n    }, {\n      key: \"container\",\n      value: function container() {\n        var player = this.player;\n        var elements = player.elements; // Keyboard shortcuts\n\n        if (!player.config.keyboard.global && player.config.keyboard.focused) {\n          on.call(player, elements.container, 'keydown keyup', this.handleKey, false);\n        } // Toggle controls on mouse events and entering fullscreen\n\n\n        on.call(player, elements.container, 'mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen', function (event) {\n          var controls$$1 = elements.controls; // Remove button states for fullscreen\n\n          if (controls$$1 && event.type === 'enterfullscreen') {\n            controls$$1.pressed = false;\n            controls$$1.hover = false;\n          } // Show, then hide after a timeout unless another control event occurs\n\n\n          var show = ['touchstart', 'touchmove', 'mousemove'].includes(event.type);\n          var delay = 0;\n\n          if (show) {\n            ui.toggleControls.call(player, true); // Use longer timeout for touch devices\n\n            delay = player.touch ? 3000 : 2000;\n          } // Clear timer\n\n\n          clearTimeout(player.timers.controls); // Set new timer to prevent flicker when seeking\n\n          player.timers.controls = setTimeout(function () {\n            return ui.toggleControls.call(player, false);\n          }, delay);\n        });\n      } // Listen for media events\n\n    }, {\n      key: \"media\",\n      value: function media() {\n        var player = this.player;\n        var elements = player.elements; // Time change on media\n\n        on.call(player, player.media, 'timeupdate seeking seeked', function (event) {\n          return controls.timeUpdate.call(player, event);\n        }); // Display duration\n\n        on.call(player, player.media, 'durationchange loadeddata loadedmetadata', function (event) {\n          return controls.durationUpdate.call(player, event);\n        }); // Check for audio tracks on load\n        // We can't use `loadedmetadata` as it doesn't seem to have audio tracks at that point\n\n        on.call(player, player.media, 'canplay loadeddata', function () {\n          toggleHidden(elements.volume, !player.hasAudio);\n          toggleHidden(elements.buttons.mute, !player.hasAudio);\n        }); // Handle the media finishing\n\n        on.call(player, player.media, 'ended', function () {\n          // Show poster on end\n          if (player.isHTML5 && player.isVideo && player.config.resetOnEnd) {\n            // Restart\n            player.restart();\n          }\n        }); // Check for buffer progress\n\n        on.call(player, player.media, 'progress playing seeking seeked', function (event) {\n          return controls.updateProgress.call(player, event);\n        }); // Handle volume changes\n\n        on.call(player, player.media, 'volumechange', function (event) {\n          return controls.updateVolume.call(player, event);\n        }); // Handle play/pause\n\n        on.call(player, player.media, 'playing play pause ended emptied timeupdate', function (event) {\n          return ui.checkPlaying.call(player, event);\n        }); // Loading state\n\n        on.call(player, player.media, 'waiting canplay seeked playing', function (event) {\n          return ui.checkLoading.call(player, event);\n        }); // If autoplay, then load advertisement if required\n        // TODO: Show some sort of loading state while the ad manager loads else there's a delay before ad shows\n\n        on.call(player, player.media, 'playing', function () {\n          if (!player.ads) {\n            return;\n          } // If ads are enabled, wait for them first\n\n\n          if (player.ads.enabled && !player.ads.initialized) {\n            // Wait for manager response\n            player.ads.managerPromise.then(function () {\n              return player.ads.play();\n            }).catch(function () {\n              return player.play();\n            });\n          }\n        }); // Click video\n\n        if (player.supported.ui && player.config.clickToPlay && !player.isAudio) {\n          // Re-fetch the wrapper\n          var wrapper = getElement.call(player, \".\".concat(player.config.classNames.video)); // Bail if there's no wrapper (this should never happen)\n\n          if (!is.element(wrapper)) {\n            return;\n          } // On click play, pause or restart\n\n\n          on.call(player, elements.container, 'click', function (event) {\n            var targets = [elements.container, wrapper]; // Ignore if click if not container or in video wrapper\n\n            if (!targets.includes(event.target) && !wrapper.contains(event.target)) {\n              return;\n            } // Touch devices will just show controls (if hidden)\n\n\n            if (player.touch && player.config.hideControls) {\n              return;\n            }\n\n            if (player.ended) {\n              player.restart();\n              player.play();\n            } else {\n              player.togglePlay();\n            }\n          });\n        } // Disable right click\n\n\n        if (player.supported.ui && player.config.disableContextMenu) {\n          on.call(player, elements.wrapper, 'contextmenu', function (event) {\n            event.preventDefault();\n          }, false);\n        } // Volume change\n\n\n        on.call(player, player.media, 'volumechange', function () {\n          // Save to storage\n          player.storage.set({\n            volume: player.volume,\n            muted: player.muted\n          });\n        }); // Speed change\n\n        on.call(player, player.media, 'ratechange', function () {\n          // Update UI\n          controls.updateSetting.call(player, 'speed'); // Save to storage\n\n\n          player.storage.set({\n            speed: player.speed\n          });\n        }); // Quality change\n\n        on.call(player, player.media, 'qualitychange', function (event) {\n          // Update UI\n          controls.updateSetting.call(player, 'quality', null, event.detail.quality);\n        }); // Update download link when ready and if quality changes\n\n        on.call(player, player.media, 'ready qualitychange', function () {\n          controls.setDownloadLink.call(player);\n        }); // Proxy events to container\n        // Bubble up key events for Edge\n\n        var proxyEvents = player.config.events.concat(['keyup', 'keydown']).join(' ');\n        on.call(player, player.media, proxyEvents, function (event) {\n          var _event$detail = event.detail,\n              detail = _event$detail === void 0 ? {} : _event$detail; // Get error details from media\n\n          if (event.type === 'error') {\n            detail = player.media.error;\n          }\n\n          triggerEvent.call(player, elements.container, event.type, true, detail);\n        });\n      } // Run default and custom handlers\n\n    }, {\n      key: \"proxy\",\n      value: function proxy(event, defaultHandler, customHandlerKey) {\n        var player = this.player;\n        var customHandler = player.config.listeners[customHandlerKey];\n        var hasCustomHandler = is.function(customHandler);\n        var returned = true; // Execute custom handler\n\n        if (hasCustomHandler) {\n          returned = customHandler.call(player, event);\n        } // Only call default handler if not prevented in custom handler\n\n\n        if (returned && is.function(defaultHandler)) {\n          defaultHandler.call(player, event);\n        }\n      } // Trigger custom and default handlers\n\n    }, {\n      key: \"bind\",\n      value: function bind(element, type, defaultHandler, customHandlerKey) {\n        var _this = this;\n\n        var passive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n        var player = this.player;\n        var customHandler = player.config.listeners[customHandlerKey];\n        var hasCustomHandler = is.function(customHandler);\n        on.call(player, element, type, function (event) {\n          return _this.proxy(event, defaultHandler, customHandlerKey);\n        }, passive && !hasCustomHandler);\n      } // Listen for control events\n\n    }, {\n      key: \"controls\",\n      value: function controls$$1() {\n        var _this2 = this;\n\n        var player = this.player;\n        var elements = player.elements; // IE doesn't support input event, so we fallback to change\n\n        var inputEvent = browser.isIE ? 'change' : 'input'; // Play/pause toggle\n\n        if (elements.buttons.play) {\n          Array.from(elements.buttons.play).forEach(function (button) {\n            _this2.bind(button, 'click', player.togglePlay, 'play');\n          });\n        } // Pause\n\n\n        this.bind(elements.buttons.restart, 'click', player.restart, 'restart'); // Rewind\n\n        this.bind(elements.buttons.rewind, 'click', player.rewind, 'rewind'); // Rewind\n\n        this.bind(elements.buttons.fastForward, 'click', player.forward, 'fastForward'); // Mute toggle\n\n        this.bind(elements.buttons.mute, 'click', function () {\n          player.muted = !player.muted;\n        }, 'mute'); // Captions toggle\n\n        this.bind(elements.buttons.captions, 'click', function () {\n          return player.toggleCaptions();\n        }); // Download\n\n        this.bind(elements.buttons.download, 'click', function () {\n          triggerEvent.call(player, player.media, 'download');\n        }, 'download'); // Fullscreen toggle\n\n        this.bind(elements.buttons.fullscreen, 'click', function () {\n          player.fullscreen.toggle();\n        }, 'fullscreen'); // Picture-in-Picture\n\n        this.bind(elements.buttons.pip, 'click', function () {\n          player.pip = 'toggle';\n        }, 'pip'); // Airplay\n\n        this.bind(elements.buttons.airplay, 'click', player.airplay, 'airplay'); // Settings menu - click toggle\n\n        this.bind(elements.buttons.settings, 'click', function (event) {\n          // Prevent the document click listener closing the menu\n          event.stopPropagation();\n\n          controls.toggleMenu.call(player, event);\n        }); // Settings menu - keyboard toggle\n        // We have to bind to keyup otherwise Firefox triggers a click when a keydown event handler shifts focus\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1220143\n\n        this.bind(elements.buttons.settings, 'keyup', function (event) {\n          var code = event.which; // We only care about space and return\n\n          if (![13, 32].includes(code)) {\n            return;\n          } // Because return triggers a click anyway, all we need to do is set focus\n\n\n          if (code === 13) {\n            controls.focusFirstMenuItem.call(player, null, true);\n\n            return;\n          } // Prevent scroll\n\n\n          event.preventDefault(); // Prevent playing video (Firefox)\n\n          event.stopPropagation(); // Toggle menu\n\n          controls.toggleMenu.call(player, event);\n        }, null, false // Can't be passive as we're preventing default\n        ); // Escape closes menu\n\n        this.bind(elements.settings.menu, 'keydown', function (event) {\n          if (event.which === 27) {\n            controls.toggleMenu.call(player, event);\n          }\n        }); // Set range input alternative \"value\", which matches the tooltip time (#954)\n\n        this.bind(elements.inputs.seek, 'mousedown mousemove', function (event) {\n          var rect = elements.progress.getBoundingClientRect();\n          var percent = 100 / rect.width * (event.pageX - rect.left);\n          event.currentTarget.setAttribute('seek-value', percent);\n        }); // Pause while seeking\n\n        this.bind(elements.inputs.seek, 'mousedown mouseup keydown keyup touchstart touchend', function (event) {\n          var seek = event.currentTarget;\n          var code = event.keyCode ? event.keyCode : event.which;\n          var attribute = 'play-on-seeked';\n\n          if (is.keyboardEvent(event) && code !== 39 && code !== 37) {\n            return;\n          } // Record seek time so we can prevent hiding controls for a few seconds after seek\n\n\n          player.lastSeekTime = Date.now(); // Was playing before?\n\n          var play = seek.hasAttribute(attribute); // Done seeking\n\n          var done = ['mouseup', 'touchend', 'keyup'].includes(event.type); // If we're done seeking and it was playing, resume playback\n\n          if (play && done) {\n            seek.removeAttribute(attribute);\n            player.play();\n          } else if (!done && player.playing) {\n            seek.setAttribute(attribute, '');\n            player.pause();\n          }\n        }); // Fix range inputs on iOS\n        // Super weird iOS bug where after you interact with an <input type=\"range\">,\n        // it takes over further interactions on the page. This is a hack\n\n        if (browser.isIos) {\n          var inputs = getElements.call(player, 'input[type=\"range\"]');\n          Array.from(inputs).forEach(function (input) {\n            return _this2.bind(input, inputEvent, function (event) {\n              return repaint(event.target);\n            });\n          });\n        } // Seek\n\n\n        this.bind(elements.inputs.seek, inputEvent, function (event) {\n          var seek = event.currentTarget; // If it exists, use seek-value instead of \"value\" for consistency with tooltip time (#954)\n\n          var seekTo = seek.getAttribute('seek-value');\n\n          if (is.empty(seekTo)) {\n            seekTo = seek.value;\n          }\n\n          seek.removeAttribute('seek-value');\n          player.currentTime = seekTo / seek.max * player.duration;\n        }, 'seek'); // Seek tooltip\n\n        this.bind(elements.progress, 'mouseenter mouseleave mousemove', function (event) {\n          return controls.updateSeekTooltip.call(player, event);\n        }); // Polyfill for lower fill in <input type=\"range\"> for webkit\n\n        if (browser.isWebkit) {\n          Array.from(getElements.call(player, 'input[type=\"range\"]')).forEach(function (element) {\n            _this2.bind(element, 'input', function (event) {\n              return controls.updateRangeFill.call(player, event.target);\n            });\n          });\n        } // Current time invert\n        // Only if one time element is used for both currentTime and duration\n\n\n        if (player.config.toggleInvert && !is.element(elements.display.duration)) {\n          this.bind(elements.display.currentTime, 'click', function () {\n            // Do nothing if we're at the start\n            if (player.currentTime === 0) {\n              return;\n            }\n\n            player.config.invertTime = !player.config.invertTime;\n\n            controls.timeUpdate.call(player);\n          });\n        } // Volume\n\n\n        this.bind(elements.inputs.volume, inputEvent, function (event) {\n          player.volume = event.target.value;\n        }, 'volume'); // Update controls.hover state (used for ui.toggleControls to avoid hiding when interacting)\n\n        this.bind(elements.controls, 'mouseenter mouseleave', function (event) {\n          elements.controls.hover = !player.touch && event.type === 'mouseenter';\n        }); // Update controls.pressed state (used for ui.toggleControls to avoid hiding when interacting)\n\n        this.bind(elements.controls, 'mousedown mouseup touchstart touchend touchcancel', function (event) {\n          elements.controls.pressed = ['mousedown', 'touchstart'].includes(event.type);\n        }); // Show controls when they receive focus (e.g., when using keyboard tab key)\n\n        this.bind(elements.controls, 'focusin', function () {\n          var config = player.config,\n              elements = player.elements,\n              timers = player.timers; // Skip transition to prevent focus from scrolling the parent element\n\n          toggleClass(elements.controls, config.classNames.noTransition, true); // Toggle\n\n          ui.toggleControls.call(player, true); // Restore transition\n\n          setTimeout(function () {\n            toggleClass(elements.controls, config.classNames.noTransition, false);\n          }, 0); // Delay a little more for mouse users\n\n          var delay = _this2.touch ? 3000 : 4000; // Clear timer\n\n          clearTimeout(timers.controls); // Hide again after delay\n\n          timers.controls = setTimeout(function () {\n            return ui.toggleControls.call(player, false);\n          }, delay);\n        }); // Mouse wheel for volume\n\n        this.bind(elements.inputs.volume, 'wheel', function (event) {\n          // Detect \"natural\" scroll - suppored on OS X Safari only\n          // Other browsers on OS X will be inverted until support improves\n          var inverted = event.webkitDirectionInvertedFromDevice; // Get delta from event. Invert if `inverted` is true\n\n          var _map = [event.deltaX, -event.deltaY].map(function (value) {\n            return inverted ? -value : value;\n          }),\n              _map2 = _slicedToArray(_map, 2),\n              x = _map2[0],\n              y = _map2[1]; // Using the biggest delta, normalize to 1 or -1 (or 0 if no delta)\n\n\n          var direction = Math.sign(Math.abs(x) > Math.abs(y) ? x : y); // Change the volume by 2%\n\n          player.increaseVolume(direction / 50); // Don't break page scrolling at max and min\n\n          var volume = player.media.volume;\n\n          if (direction === 1 && volume < 1 || direction === -1 && volume > 0) {\n            event.preventDefault();\n          }\n        }, 'volume', false);\n      }\n    }]);\n\n    return Listeners;\n  }();\n\n  var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var loadjs_umd = createCommonjsModule(function (module, exports) {\n  (function(root, factory) {\n    {\n      module.exports = factory();\n    }\n  }(commonjsGlobal, function() {\n  /**\n   * Global dependencies.\n   * @global {Object} document - DOM\n   */\n\n  var devnull = function() {},\n      bundleIdCache = {},\n      bundleResultCache = {},\n      bundleCallbackQueue = {};\n\n\n  /**\n   * Subscribe to bundle load event.\n   * @param {string[]} bundleIds - Bundle ids\n   * @param {Function} callbackFn - The callback function\n   */\n  function subscribe(bundleIds, callbackFn) {\n    // listify\n    bundleIds = bundleIds.push ? bundleIds : [bundleIds];\n\n    var depsNotFound = [],\n        i = bundleIds.length,\n        numWaiting = i,\n        fn,\n        bundleId,\n        r,\n        q;\n\n    // define callback function\n    fn = function (bundleId, pathsNotFound) {\n      if (pathsNotFound.length) depsNotFound.push(bundleId);\n\n      numWaiting--;\n      if (!numWaiting) callbackFn(depsNotFound);\n    };\n\n    // register callback\n    while (i--) {\n      bundleId = bundleIds[i];\n\n      // execute callback if in result cache\n      r = bundleResultCache[bundleId];\n      if (r) {\n        fn(bundleId, r);\n        continue;\n      }\n\n      // add to callback queue\n      q = bundleCallbackQueue[bundleId] = bundleCallbackQueue[bundleId] || [];\n      q.push(fn);\n    }\n  }\n\n\n  /**\n   * Publish bundle load event.\n   * @param {string} bundleId - Bundle id\n   * @param {string[]} pathsNotFound - List of files not found\n   */\n  function publish(bundleId, pathsNotFound) {\n    // exit if id isn't defined\n    if (!bundleId) return;\n\n    var q = bundleCallbackQueue[bundleId];\n\n    // cache result\n    bundleResultCache[bundleId] = pathsNotFound;\n\n    // exit if queue is empty\n    if (!q) return;\n\n    // empty callback queue\n    while (q.length) {\n      q[0](bundleId, pathsNotFound);\n      q.splice(0, 1);\n    }\n  }\n\n\n  /**\n   * Execute callbacks.\n   * @param {Object or Function} args - The callback args\n   * @param {string[]} depsNotFound - List of dependencies not found\n   */\n  function executeCallbacks(args, depsNotFound) {\n    // accept function as argument\n    if (args.call) args = {success: args};\n\n    // success and error callbacks\n    if (depsNotFound.length) (args.error || devnull)(depsNotFound);\n    else (args.success || devnull)(args);\n  }\n\n\n  /**\n   * Load individual file.\n   * @param {string} path - The file path\n   * @param {Function} callbackFn - The callback function\n   */\n  function loadFile(path, callbackFn, args, numTries) {\n    var doc = document,\n        async = args.async,\n        maxTries = (args.numRetries || 0) + 1,\n        beforeCallbackFn = args.before || devnull,\n        pathStripped = path.replace(/^(css|img)!/, ''),\n        isCss,\n        e;\n\n    numTries = numTries || 0;\n\n    if (/(^css!|\\.css$)/.test(path)) {\n      isCss = true;\n\n      // css\n      e = doc.createElement('link');\n      e.rel = 'stylesheet';\n      e.href = pathStripped; //.replace(/^css!/, '');  // remove \"css!\" prefix\n    } else if (/(^img!|\\.(png|gif|jpg|svg)$)/.test(path)) {\n      // image\n      e = doc.createElement('img');\n      e.src = pathStripped;    \n    } else {\n      // javascript\n      e = doc.createElement('script');\n      e.src = path;\n      e.async = async === undefined ? true : async;\n    }\n\n    e.onload = e.onerror = e.onbeforeload = function (ev) {\n      var result = ev.type[0];\n\n      // Note: The following code isolates IE using `hideFocus` and treats empty\n      // stylesheets as failures to get around lack of onerror support\n      if (isCss && 'hideFocus' in e) {\n        try {\n          if (!e.sheet.cssText.length) result = 'e';\n        } catch (x) {\n          // sheets objects created from load errors don't allow access to\n          // `cssText`\n          result = 'e';\n        }\n      }\n\n      // handle retries in case of load failure\n      if (result == 'e') {\n        // increment counter\n        numTries += 1;\n\n        // exit function and try again\n        if (numTries < maxTries) {\n          return loadFile(path, callbackFn, args, numTries);\n        }\n      }\n\n      // execute callback\n      callbackFn(path, result, ev.defaultPrevented);\n    };\n\n    // add to document (unless callback returns `false`)\n    if (beforeCallbackFn(path, e) !== false) doc.head.appendChild(e);\n  }\n\n\n  /**\n   * Load multiple files.\n   * @param {string[]} paths - The file paths\n   * @param {Function} callbackFn - The callback function\n   */\n  function loadFiles(paths, callbackFn, args) {\n    // listify paths\n    paths = paths.push ? paths : [paths];\n\n    var numWaiting = paths.length,\n        x = numWaiting,\n        pathsNotFound = [],\n        fn,\n        i;\n\n    // define callback function\n    fn = function(path, result, defaultPrevented) {\n      // handle error\n      if (result == 'e') pathsNotFound.push(path);\n\n      // handle beforeload event. If defaultPrevented then that means the load\n      // will be blocked (ex. Ghostery/ABP on Safari)\n      if (result == 'b') {\n        if (defaultPrevented) pathsNotFound.push(path);\n        else return;\n      }\n\n      numWaiting--;\n      if (!numWaiting) callbackFn(pathsNotFound);\n    };\n\n    // load scripts\n    for (i=0; i < x; i++) loadFile(paths[i], fn, args);\n  }\n\n\n  /**\n   * Initiate script load and register bundle.\n   * @param {(string|string[])} paths - The file paths\n   * @param {(string|Function)} [arg1] - The bundleId or success callback\n   * @param {Function} [arg2] - The success or error callback\n   * @param {Function} [arg3] - The error callback\n   */\n  function loadjs(paths, arg1, arg2) {\n    var bundleId,\n        args;\n\n    // bundleId (if string)\n    if (arg1 && arg1.trim) bundleId = arg1;\n\n    // args (default is {})\n    args = (bundleId ? arg2 : arg1) || {};\n\n    // throw error if bundle is already defined\n    if (bundleId) {\n      if (bundleId in bundleIdCache) {\n        throw \"LoadJS\";\n      } else {\n        bundleIdCache[bundleId] = true;\n      }\n    }\n\n    // load scripts\n    loadFiles(paths, function (pathsNotFound) {\n      // execute callbacks\n      executeCallbacks(args, pathsNotFound);\n\n      // publish bundle load event\n      publish(bundleId, pathsNotFound);\n    }, args);\n  }\n\n\n  /**\n   * Execute callbacks when dependencies have been satisfied.\n   * @param {(string|string[])} deps - List of bundle ids\n   * @param {Object} args - success/error arguments\n   */\n  loadjs.ready = function ready(deps, args) {\n    // subscribe to bundle load event\n    subscribe(deps, function (depsNotFound) {\n      // execute callbacks\n      executeCallbacks(args, depsNotFound);\n    });\n\n    return loadjs;\n  };\n\n\n  /**\n   * Manually satisfy bundle dependencies.\n   * @param {string} bundleId - The bundle id\n   */\n  loadjs.done = function done(bundleId) {\n    publish(bundleId, []);\n  };\n\n\n  /**\n   * Reset loadjs dependencies statuses\n   */\n  loadjs.reset = function reset() {\n    bundleIdCache = {};\n    bundleResultCache = {};\n    bundleCallbackQueue = {};\n  };\n\n\n  /**\n   * Determine if bundle has already been defined\n   * @param String} bundleId - The bundle id\n   */\n  loadjs.isDefined = function isDefined(bundleId) {\n    return bundleId in bundleIdCache;\n  };\n\n\n  // export\n  return loadjs;\n\n  }));\n  });\n\n  // ==========================================================================\n  function loadScript(url) {\n    return new Promise(function (resolve, reject) {\n      loadjs_umd(url, {\n        success: resolve,\n        error: reject\n      });\n    });\n  }\n\n  function parseId(url) {\n    if (is.empty(url)) {\n      return null;\n    }\n\n    if (is.number(Number(url))) {\n      return url;\n    }\n\n    var regex = /^.*(vimeo.com\\/|video\\/)(\\d+).*/;\n    return url.match(regex) ? RegExp.$2 : url;\n  } // Get aspect ratio for dimensions\n\n\n  function getAspectRatio(width, height) {\n    var getRatio = function getRatio(w, h) {\n      return h === 0 ? w : getRatio(h, w % h);\n    };\n\n    var ratio = getRatio(width, height);\n    return \"\".concat(width / ratio, \":\").concat(height / ratio);\n  } // Set playback state and trigger change (only on actual change)\n\n\n  function assurePlaybackState(play) {\n    if (play && !this.embed.hasPlayed) {\n      this.embed.hasPlayed = true;\n    }\n\n    if (this.media.paused === play) {\n      this.media.paused = !play;\n      triggerEvent.call(this, this.media, play ? 'play' : 'pause');\n    }\n  }\n\n  var vimeo = {\n    setup: function setup() {\n      var _this = this;\n\n      // Add embed class for responsive\n      toggleClass(this.elements.wrapper, this.config.classNames.embed, true); // Set intial ratio\n\n      vimeo.setAspectRatio.call(this); // Load the API if not already\n\n      if (!is.object(window.Vimeo)) {\n        loadScript(this.config.urls.vimeo.sdk).then(function () {\n          vimeo.ready.call(_this);\n        }).catch(function (error) {\n          _this.debug.warn('Vimeo API failed to load', error);\n        });\n      } else {\n        vimeo.ready.call(this);\n      }\n    },\n    // Set aspect ratio\n    // For Vimeo we have an extra 300% height <div> to hide the standard controls and UI\n    setAspectRatio: function setAspectRatio(input) {\n      var _split$map = (is.string(input) ? input : this.config.ratio).split(':').map(Number),\n          _split$map2 = _slicedToArray(_split$map, 2),\n          x = _split$map2[0],\n          y = _split$map2[1];\n\n      var padding = 100 / x * y;\n      vimeo.padding = padding;\n      this.elements.wrapper.style.paddingBottom = \"\".concat(padding, \"%\");\n\n      if (this.supported.ui) {\n        var height = 240;\n        var offset = (height - padding) / (height / 50);\n        this.media.style.transform = \"translateY(-\".concat(offset, \"%)\");\n      }\n    },\n    // API Ready\n    ready: function ready$$1() {\n      var _this2 = this;\n\n      var player = this; // Get Vimeo params for the iframe\n\n      var options = {\n        loop: player.config.loop.active,\n        autoplay: player.autoplay,\n        // muted: player.muted,\n        byline: false,\n        portrait: false,\n        title: false,\n        speed: true,\n        transparent: 0,\n        gesture: 'media',\n        playsinline: !this.config.fullscreen.iosNative\n      };\n      var params = buildUrlParams(options); // Get the source URL or ID\n\n      var source = player.media.getAttribute('src'); // Get from <div> if needed\n\n      if (is.empty(source)) {\n        source = player.media.getAttribute(player.config.attributes.embed.id);\n      }\n\n      var id = parseId(source); // Build an iframe\n\n      var iframe = createElement('iframe');\n      var src = format(player.config.urls.vimeo.iframe, id, params);\n      iframe.setAttribute('src', src);\n      iframe.setAttribute('allowfullscreen', '');\n      iframe.setAttribute('allowtransparency', '');\n      iframe.setAttribute('allow', 'autoplay'); // Get poster, if already set\n\n      var poster = player.poster; // Inject the package\n\n      var wrapper = createElement('div', {\n        poster: poster,\n        class: player.config.classNames.embedContainer\n      });\n      wrapper.appendChild(iframe);\n      player.media = replaceElement(wrapper, player.media); // Get poster image\n\n      fetch(format(player.config.urls.vimeo.api, id), 'json').then(function (response) {\n        if (is.empty(response)) {\n          return;\n        } // Get the URL for thumbnail\n\n\n        var url = new URL(response[0].thumbnail_large); // Get original image\n\n        url.pathname = \"\".concat(url.pathname.split('_')[0], \".jpg\"); // Set and show poster\n\n        ui.setPoster.call(player, url.href).catch(function () {});\n      }); // Setup instance\n      // https://github.com/vimeo/player.js\n\n      player.embed = new window.Vimeo.Player(iframe, {\n        autopause: player.config.autopause,\n        muted: player.muted\n      });\n      player.media.paused = true;\n      player.media.currentTime = 0; // Disable native text track rendering\n\n      if (player.supported.ui) {\n        player.embed.disableTextTrack();\n      } // Create a faux HTML5 API using the Vimeo API\n\n\n      player.media.play = function () {\n        assurePlaybackState.call(player, true);\n        return player.embed.play();\n      };\n\n      player.media.pause = function () {\n        assurePlaybackState.call(player, false);\n        return player.embed.pause();\n      };\n\n      player.media.stop = function () {\n        player.pause();\n        player.currentTime = 0;\n      }; // Seeking\n\n\n      var currentTime = player.media.currentTime;\n      Object.defineProperty(player.media, 'currentTime', {\n        get: function get() {\n          return currentTime;\n        },\n        set: function set(time) {\n          // Vimeo will automatically play on seek if the video hasn't been played before\n          // Get current paused state and volume etc\n          var embed = player.embed,\n              media = player.media,\n              paused = player.paused,\n              volume = player.volume;\n          var restorePause = paused && !embed.hasPlayed; // Set seeking state and trigger event\n\n          media.seeking = true;\n          triggerEvent.call(player, media, 'seeking'); // If paused, mute until seek is complete\n\n          Promise.resolve(restorePause && embed.setVolume(0)) // Seek\n          .then(function () {\n            return embed.setCurrentTime(time);\n          }) // Restore paused\n          .then(function () {\n            return restorePause && embed.pause();\n          }) // Restore volume\n          .then(function () {\n            return restorePause && embed.setVolume(volume);\n          }).catch(function () {// Do nothing\n          });\n        }\n      }); // Playback speed\n\n      var speed = player.config.speed.selected;\n      Object.defineProperty(player.media, 'playbackRate', {\n        get: function get() {\n          return speed;\n        },\n        set: function set(input) {\n          player.embed.setPlaybackRate(input).then(function () {\n            speed = input;\n            triggerEvent.call(player, player.media, 'ratechange');\n          }).catch(function (error) {\n            // Hide menu item (and menu if empty)\n            if (error.name === 'Error') {\n              controls.setSpeedMenu.call(player, []);\n            }\n          });\n        }\n      }); // Volume\n\n      var volume = player.config.volume;\n      Object.defineProperty(player.media, 'volume', {\n        get: function get() {\n          return volume;\n        },\n        set: function set(input) {\n          player.embed.setVolume(input).then(function () {\n            volume = input;\n            triggerEvent.call(player, player.media, 'volumechange');\n          });\n        }\n      }); // Muted\n\n      var muted = player.config.muted;\n      Object.defineProperty(player.media, 'muted', {\n        get: function get() {\n          return muted;\n        },\n        set: function set(input) {\n          var toggle = is.boolean(input) ? input : false;\n          player.embed.setVolume(toggle ? 0 : player.config.volume).then(function () {\n            muted = toggle;\n            triggerEvent.call(player, player.media, 'volumechange');\n          });\n        }\n      }); // Loop\n\n      var loop = player.config.loop;\n      Object.defineProperty(player.media, 'loop', {\n        get: function get() {\n          return loop;\n        },\n        set: function set(input) {\n          var toggle = is.boolean(input) ? input : player.config.loop.active;\n          player.embed.setLoop(toggle).then(function () {\n            loop = toggle;\n          });\n        }\n      }); // Source\n\n      var currentSrc;\n      player.embed.getVideoUrl().then(function (value) {\n        currentSrc = value;\n        controls.setDownloadLink.call(player);\n      }).catch(function (error) {\n        _this2.debug.warn(error);\n      });\n      Object.defineProperty(player.media, 'currentSrc', {\n        get: function get() {\n          return currentSrc;\n        }\n      }); // Ended\n\n      Object.defineProperty(player.media, 'ended', {\n        get: function get() {\n          return player.currentTime === player.duration;\n        }\n      }); // Set aspect ratio based on video size\n\n      Promise.all([player.embed.getVideoWidth(), player.embed.getVideoHeight()]).then(function (dimensions) {\n        vimeo.ratio = getAspectRatio(dimensions[0], dimensions[1]);\n        vimeo.setAspectRatio.call(_this2, vimeo.ratio);\n      }); // Set autopause\n\n      player.embed.setAutopause(player.config.autopause).then(function (state) {\n        player.config.autopause = state;\n      }); // Get title\n\n      player.embed.getVideoTitle().then(function (title) {\n        player.config.title = title;\n        ui.setTitle.call(_this2);\n      }); // Get current time\n\n      player.embed.getCurrentTime().then(function (value) {\n        currentTime = value;\n        triggerEvent.call(player, player.media, 'timeupdate');\n      }); // Get duration\n\n      player.embed.getDuration().then(function (value) {\n        player.media.duration = value;\n        triggerEvent.call(player, player.media, 'durationchange');\n      }); // Get captions\n\n      player.embed.getTextTracks().then(function (tracks) {\n        player.media.textTracks = tracks;\n        captions.setup.call(player);\n      });\n      player.embed.on('cuechange', function (_ref) {\n        var _ref$cues = _ref.cues,\n            cues = _ref$cues === void 0 ? [] : _ref$cues;\n        var strippedCues = cues.map(function (cue) {\n          return stripHTML(cue.text);\n        });\n        captions.updateCues.call(player, strippedCues);\n      });\n      player.embed.on('loaded', function () {\n        // Assure state and events are updated on autoplay\n        player.embed.getPaused().then(function (paused) {\n          assurePlaybackState.call(player, !paused);\n\n          if (!paused) {\n            triggerEvent.call(player, player.media, 'playing');\n          }\n        });\n\n        if (is.element(player.embed.element) && player.supported.ui) {\n          var frame = player.embed.element; // Fix keyboard focus issues\n          // https://github.com/sampotts/plyr/issues/317\n\n          frame.setAttribute('tabindex', -1);\n        }\n      });\n      player.embed.on('play', function () {\n        assurePlaybackState.call(player, true);\n        triggerEvent.call(player, player.media, 'playing');\n      });\n      player.embed.on('pause', function () {\n        assurePlaybackState.call(player, false);\n      });\n      player.embed.on('timeupdate', function (data) {\n        player.media.seeking = false;\n        currentTime = data.seconds;\n        triggerEvent.call(player, player.media, 'timeupdate');\n      });\n      player.embed.on('progress', function (data) {\n        player.media.buffered = data.percent;\n        triggerEvent.call(player, player.media, 'progress'); // Check all loaded\n\n        if (parseInt(data.percent, 10) === 1) {\n          triggerEvent.call(player, player.media, 'canplaythrough');\n        } // Get duration as if we do it before load, it gives an incorrect value\n        // https://github.com/sampotts/plyr/issues/891\n\n\n        player.embed.getDuration().then(function (value) {\n          if (value !== player.media.duration) {\n            player.media.duration = value;\n            triggerEvent.call(player, player.media, 'durationchange');\n          }\n        });\n      });\n      player.embed.on('seeked', function () {\n        player.media.seeking = false;\n        triggerEvent.call(player, player.media, 'seeked');\n      });\n      player.embed.on('ended', function () {\n        player.media.paused = true;\n        triggerEvent.call(player, player.media, 'ended');\n      });\n      player.embed.on('error', function (detail) {\n        player.media.error = detail;\n        triggerEvent.call(player, player.media, 'error');\n      }); // Set height/width on fullscreen\n\n      player.on('enterfullscreen exitfullscreen', function (event) {\n        var target = player.fullscreen.target; // Ignore for iOS native\n\n        if (target !== player.elements.container) {\n          return;\n        }\n\n        var toggle = event.type === 'enterfullscreen';\n\n        var _vimeo$ratio$split$ma = vimeo.ratio.split(':').map(Number),\n            _vimeo$ratio$split$ma2 = _slicedToArray(_vimeo$ratio$split$ma, 2),\n            x = _vimeo$ratio$split$ma2[0],\n            y = _vimeo$ratio$split$ma2[1];\n\n        var dimension = x > y ? 'width' : 'height';\n        target.style[dimension] = toggle ? \"\".concat(vimeo.padding, \"%\") : null;\n      }); // Rebuild UI\n\n      setTimeout(function () {\n        return ui.build.call(player);\n      }, 0);\n    }\n  };\n\n  // ==========================================================================\n\n  function parseId$1(url) {\n    if (is.empty(url)) {\n      return null;\n    }\n\n    var regex = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    return url.match(regex) ? RegExp.$2 : url;\n  } // Set playback state and trigger change (only on actual change)\n\n\n  function assurePlaybackState$1(play) {\n    if (play && !this.embed.hasPlayed) {\n      this.embed.hasPlayed = true;\n    }\n\n    if (this.media.paused === play) {\n      this.media.paused = !play;\n      triggerEvent.call(this, this.media, play ? 'play' : 'pause');\n    }\n  }\n\n  var youtube = {\n    setup: function setup() {\n      var _this = this;\n\n      // Add embed class for responsive\n      toggleClass(this.elements.wrapper, this.config.classNames.embed, true); // Set aspect ratio\n\n      youtube.setAspectRatio.call(this); // Setup API\n\n      if (is.object(window.YT) && is.function(window.YT.Player)) {\n        youtube.ready.call(this);\n      } else {\n        // Load the API\n        loadScript(this.config.urls.youtube.sdk).catch(function (error) {\n          _this.debug.warn('YouTube API failed to load', error);\n        }); // Setup callback for the API\n        // YouTube has it's own system of course...\n\n        window.onYouTubeReadyCallbacks = window.onYouTubeReadyCallbacks || []; // Add to queue\n\n        window.onYouTubeReadyCallbacks.push(function () {\n          youtube.ready.call(_this);\n        }); // Set callback to process queue\n\n        window.onYouTubeIframeAPIReady = function () {\n          window.onYouTubeReadyCallbacks.forEach(function (callback) {\n            callback();\n          });\n        };\n      }\n    },\n    // Get the media title\n    getTitle: function getTitle(videoId) {\n      var _this2 = this;\n\n      // Try via undocumented API method first\n      // This method disappears now and then though...\n      // https://github.com/sampotts/plyr/issues/709\n      if (is.function(this.embed.getVideoData)) {\n        var _this$embed$getVideoD = this.embed.getVideoData(),\n            title = _this$embed$getVideoD.title;\n\n        if (is.empty(title)) {\n          this.config.title = title;\n          ui.setTitle.call(this);\n          return;\n        }\n      } // Or via Google API\n\n\n      var key = this.config.keys.google;\n\n      if (is.string(key) && !is.empty(key)) {\n        var url = format(this.config.urls.youtube.api, videoId, key);\n        fetch(url).then(function (result) {\n          if (is.object(result)) {\n            _this2.config.title = result.items[0].snippet.title;\n            ui.setTitle.call(_this2);\n          }\n        }).catch(function () {});\n      }\n    },\n    // Set aspect ratio\n    setAspectRatio: function setAspectRatio() {\n      var ratio = this.config.ratio.split(':');\n      this.elements.wrapper.style.paddingBottom = \"\".concat(100 / ratio[0] * ratio[1], \"%\");\n    },\n    // API ready\n    ready: function ready$$1() {\n      var player = this; // Ignore already setup (race condition)\n\n      var currentId = player.media.getAttribute('id');\n\n      if (!is.empty(currentId) && currentId.startsWith('youtube-')) {\n        return;\n      } // Get the source URL or ID\n\n\n      var source = player.media.getAttribute('src'); // Get from <div> if needed\n\n      if (is.empty(source)) {\n        source = player.media.getAttribute(this.config.attributes.embed.id);\n      } // Replace the <iframe> with a <div> due to YouTube API issues\n\n\n      var videoId = parseId$1(source);\n      var id = generateId(player.provider); // Get poster, if already set\n\n      var poster = player.poster; // Replace media element\n\n      var container = createElement('div', {\n        id: id,\n        poster: poster\n      });\n      player.media = replaceElement(container, player.media); // Id to poster wrapper\n\n      var posterSrc = function posterSrc(format$$1) {\n        return \"https://img.youtube.com/vi/\".concat(videoId, \"/\").concat(format$$1, \"default.jpg\");\n      }; // Check thumbnail images in order of quality, but reject fallback thumbnails (120px wide)\n\n\n      loadImage(posterSrc('maxres'), 121) // Higest quality and unpadded\n      .catch(function () {\n        return loadImage(posterSrc('sd'), 121);\n      }) // 480p padded 4:3\n      .catch(function () {\n        return loadImage(posterSrc('hq'));\n      }) // 360p padded 4:3. Always exists\n      .then(function (image) {\n        return ui.setPoster.call(player, image.src);\n      }).then(function (posterSrc) {\n        // If the image is padded, use background-size \"cover\" instead (like youtube does too with their posters)\n        if (!posterSrc.includes('maxres')) {\n          player.elements.poster.style.backgroundSize = 'cover';\n        }\n      }).catch(function () {}); // Setup instance\n      // https://developers.google.com/youtube/iframe_api_reference\n\n      player.embed = new window.YT.Player(id, {\n        videoId: videoId,\n        playerVars: {\n          autoplay: player.config.autoplay ? 1 : 0,\n          // Autoplay\n          hl: player.config.hl,\n          // iframe interface language\n          controls: player.supported.ui ? 0 : 1,\n          // Only show controls if not fully supported\n          rel: 0,\n          // No related vids\n          showinfo: 0,\n          // Hide info\n          iv_load_policy: 3,\n          // Hide annotations\n          modestbranding: 1,\n          // Hide logos as much as possible (they still show one in the corner when paused)\n          disablekb: 1,\n          // Disable keyboard as we handle it\n          playsinline: 1,\n          // Allow iOS inline playback\n          // Tracking for stats\n          // origin: window ? `${window.location.protocol}//${window.location.host}` : null,\n          widget_referrer: window ? window.location.href : null,\n          // Captions are flaky on YouTube\n          cc_load_policy: player.captions.active ? 1 : 0,\n          cc_lang_pref: player.config.captions.language\n        },\n        events: {\n          onError: function onError(event) {\n            // YouTube may fire onError twice, so only handle it once\n            if (!player.media.error) {\n              var code = event.data; // Messages copied from https://developers.google.com/youtube/iframe_api_reference#onError\n\n              var message = {\n                2: 'The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.',\n                5: 'The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.',\n                100: 'The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.',\n                101: 'The owner of the requested video does not allow it to be played in embedded players.',\n                150: 'The owner of the requested video does not allow it to be played in embedded players.'\n              }[code] || 'An unknown error occured';\n              player.media.error = {\n                code: code,\n                message: message\n              };\n              triggerEvent.call(player, player.media, 'error');\n            }\n          },\n          onPlaybackRateChange: function onPlaybackRateChange(event) {\n            // Get the instance\n            var instance = event.target; // Get current speed\n\n            player.media.playbackRate = instance.getPlaybackRate();\n            triggerEvent.call(player, player.media, 'ratechange');\n          },\n          onReady: function onReady(event) {\n            // Bail if onReady has already been called. See issue #1108\n            if (is.function(player.media.play)) {\n              return;\n            } // Get the instance\n\n\n            var instance = event.target; // Get the title\n\n            youtube.getTitle.call(player, videoId); // Create a faux HTML5 API using the YouTube API\n\n            player.media.play = function () {\n              assurePlaybackState$1.call(player, true);\n              instance.playVideo();\n            };\n\n            player.media.pause = function () {\n              assurePlaybackState$1.call(player, false);\n              instance.pauseVideo();\n            };\n\n            player.media.stop = function () {\n              instance.stopVideo();\n            };\n\n            player.media.duration = instance.getDuration();\n            player.media.paused = true; // Seeking\n\n            player.media.currentTime = 0;\n            Object.defineProperty(player.media, 'currentTime', {\n              get: function get() {\n                return Number(instance.getCurrentTime());\n              },\n              set: function set(time) {\n                // If paused and never played, mute audio preventively (YouTube starts playing on seek if the video hasn't been played yet).\n                if (player.paused && !player.embed.hasPlayed) {\n                  player.embed.mute();\n                } // Set seeking state and trigger event\n\n\n                player.media.seeking = true;\n                triggerEvent.call(player, player.media, 'seeking'); // Seek after events sent\n\n                instance.seekTo(time);\n              }\n            }); // Playback speed\n\n            Object.defineProperty(player.media, 'playbackRate', {\n              get: function get() {\n                return instance.getPlaybackRate();\n              },\n              set: function set(input) {\n                instance.setPlaybackRate(input);\n              }\n            }); // Volume\n\n            var volume = player.config.volume;\n            Object.defineProperty(player.media, 'volume', {\n              get: function get() {\n                return volume;\n              },\n              set: function set(input) {\n                volume = input;\n                instance.setVolume(volume * 100);\n                triggerEvent.call(player, player.media, 'volumechange');\n              }\n            }); // Muted\n\n            var muted = player.config.muted;\n            Object.defineProperty(player.media, 'muted', {\n              get: function get() {\n                return muted;\n              },\n              set: function set(input) {\n                var toggle = is.boolean(input) ? input : muted;\n                muted = toggle;\n                instance[toggle ? 'mute' : 'unMute']();\n                triggerEvent.call(player, player.media, 'volumechange');\n              }\n            }); // Source\n\n            Object.defineProperty(player.media, 'currentSrc', {\n              get: function get() {\n                return instance.getVideoUrl();\n              }\n            }); // Ended\n\n            Object.defineProperty(player.media, 'ended', {\n              get: function get() {\n                return player.currentTime === player.duration;\n              }\n            }); // Get available speeds\n\n            player.options.speed = instance.getAvailablePlaybackRates(); // Set the tabindex to avoid focus entering iframe\n\n            if (player.supported.ui) {\n              player.media.setAttribute('tabindex', -1);\n            }\n\n            triggerEvent.call(player, player.media, 'timeupdate');\n            triggerEvent.call(player, player.media, 'durationchange'); // Reset timer\n\n            clearInterval(player.timers.buffering); // Setup buffering\n\n            player.timers.buffering = setInterval(function () {\n              // Get loaded % from YouTube\n              player.media.buffered = instance.getVideoLoadedFraction(); // Trigger progress only when we actually buffer something\n\n              if (player.media.lastBuffered === null || player.media.lastBuffered < player.media.buffered) {\n                triggerEvent.call(player, player.media, 'progress');\n              } // Set last buffer point\n\n\n              player.media.lastBuffered = player.media.buffered; // Bail if we're at 100%\n\n              if (player.media.buffered === 1) {\n                clearInterval(player.timers.buffering); // Trigger event\n\n                triggerEvent.call(player, player.media, 'canplaythrough');\n              }\n            }, 200); // Rebuild UI\n\n            setTimeout(function () {\n              return ui.build.call(player);\n            }, 50);\n          },\n          onStateChange: function onStateChange(event) {\n            // Get the instance\n            var instance = event.target; // Reset timer\n\n            clearInterval(player.timers.playing);\n            var seeked = player.media.seeking && [1, 2].includes(event.data);\n\n            if (seeked) {\n              // Unset seeking and fire seeked event\n              player.media.seeking = false;\n              triggerEvent.call(player, player.media, 'seeked');\n            } // Handle events\n            // -1   Unstarted\n            // 0    Ended\n            // 1    Playing\n            // 2    Paused\n            // 3    Buffering\n            // 5    Video cued\n\n\n            switch (event.data) {\n              case -1:\n                // Update scrubber\n                triggerEvent.call(player, player.media, 'timeupdate'); // Get loaded % from YouTube\n\n                player.media.buffered = instance.getVideoLoadedFraction();\n                triggerEvent.call(player, player.media, 'progress');\n                break;\n\n              case 0:\n                assurePlaybackState$1.call(player, false); // YouTube doesn't support loop for a single video, so mimick it.\n\n                if (player.media.loop) {\n                  // YouTube needs a call to `stopVideo` before playing again\n                  instance.stopVideo();\n                  instance.playVideo();\n                } else {\n                  triggerEvent.call(player, player.media, 'ended');\n                }\n\n                break;\n\n              case 1:\n                // Restore paused state (YouTube starts playing on seek if the video hasn't been played yet)\n                if (player.media.paused && !player.embed.hasPlayed) {\n                  player.media.pause();\n                } else {\n                  assurePlaybackState$1.call(player, true);\n                  triggerEvent.call(player, player.media, 'playing'); // Poll to get playback progress\n\n                  player.timers.playing = setInterval(function () {\n                    triggerEvent.call(player, player.media, 'timeupdate');\n                  }, 50); // Check duration again due to YouTube bug\n                  // https://github.com/sampotts/plyr/issues/374\n                  // https://code.google.com/p/gdata-issues/issues/detail?id=8690\n\n                  if (player.media.duration !== instance.getDuration()) {\n                    player.media.duration = instance.getDuration();\n                    triggerEvent.call(player, player.media, 'durationchange');\n                  }\n                }\n\n                break;\n\n              case 2:\n                // Restore audio (YouTube starts playing on seek if the video hasn't been played yet)\n                if (!player.muted) {\n                  player.embed.unMute();\n                }\n\n                assurePlaybackState$1.call(player, false);\n                break;\n\n              default:\n                break;\n            }\n\n            triggerEvent.call(player, player.elements.container, 'statechange', false, {\n              code: event.data\n            });\n          }\n        }\n      });\n    }\n  };\n\n  // ==========================================================================\n  var media = {\n    // Setup media\n    setup: function setup() {\n      // If there's no media, bail\n      if (!this.media) {\n        this.debug.warn('No media element found!');\n        return;\n      } // Add type class\n\n\n      toggleClass(this.elements.container, this.config.classNames.type.replace('{0}', this.type), true); // Add provider class\n\n      toggleClass(this.elements.container, this.config.classNames.provider.replace('{0}', this.provider), true); // Add video class for embeds\n      // This will require changes if audio embeds are added\n\n      if (this.isEmbed) {\n        toggleClass(this.elements.container, this.config.classNames.type.replace('{0}', 'video'), true);\n      } // Inject the player wrapper\n\n\n      if (this.isVideo) {\n        // Create the wrapper div\n        this.elements.wrapper = createElement('div', {\n          class: this.config.classNames.video\n        }); // Wrap the video in a container\n\n        wrap(this.media, this.elements.wrapper); // Faux poster container\n\n        this.elements.poster = createElement('div', {\n          class: this.config.classNames.poster\n        });\n        this.elements.wrapper.appendChild(this.elements.poster);\n      }\n\n      if (this.isHTML5) {\n        html5.extend.call(this);\n      } else if (this.isYouTube) {\n        youtube.setup.call(this);\n      } else if (this.isVimeo) {\n        vimeo.setup.call(this);\n      }\n    }\n  };\n\n  var Ads =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Ads constructor.\n     * @param {object} player\n     * @return {Ads}\n     */\n    function Ads(player) {\n      var _this = this;\n\n      _classCallCheck(this, Ads);\n\n      this.player = player;\n      this.publisherId = player.config.ads.publisherId;\n      this.playing = false;\n      this.initialized = false;\n      this.elements = {\n        container: null,\n        displayContainer: null\n      };\n      this.manager = null;\n      this.loader = null;\n      this.cuePoints = null;\n      this.events = {};\n      this.safetyTimer = null;\n      this.countdownTimer = null; // Setup a promise to resolve when the IMA manager is ready\n\n      this.managerPromise = new Promise(function (resolve, reject) {\n        // The ad is loaded and ready\n        _this.on('loaded', resolve); // Ads failed\n\n\n        _this.on('error', reject);\n      });\n      this.load();\n    }\n\n    _createClass(Ads, [{\n      key: \"load\",\n\n      /**\n       * Load the IMA SDK\n       */\n      value: function load() {\n        var _this2 = this;\n\n        if (this.enabled) {\n          // Check if the Google IMA3 SDK is loaded or load it ourselves\n          if (!is.object(window.google) || !is.object(window.google.ima)) {\n            loadScript(this.player.config.urls.googleIMA.sdk).then(function () {\n              _this2.ready();\n            }).catch(function () {\n              // Script failed to load or is blocked\n              _this2.trigger('error', new Error('Google IMA SDK failed to load'));\n            });\n          } else {\n            this.ready();\n          }\n        }\n      }\n      /**\n       * Get the ads instance ready\n       */\n\n    }, {\n      key: \"ready\",\n      value: function ready$$1() {\n        var _this3 = this;\n\n        // Start ticking our safety timer. If the whole advertisement\n        // thing doesn't resolve within our set time; we bail\n        this.startSafetyTimer(12000, 'ready()'); // Clear the safety timer\n\n        this.managerPromise.then(function () {\n          _this3.clearSafetyTimer('onAdsManagerLoaded()');\n        }); // Set listeners on the Plyr instance\n\n        this.listeners(); // Setup the IMA SDK\n\n        this.setupIMA();\n      } // Build the default tag URL\n\n    }, {\n      key: \"setupIMA\",\n\n      /**\n       * In order for the SDK to display ads for our video, we need to tell it where to put them,\n       * so here we define our ad container. This div is set up to render on top of the video player.\n       * Using the code below, we tell the SDK to render ads within that div. We also provide a\n       * handle to the content video player - the SDK will poll the current time of our player to\n       * properly place mid-rolls. After we create the ad display container, we initialize it. On\n       * mobile devices, this initialization is done as the result of a user action.\n       */\n      value: function setupIMA() {\n        // Create the container for our advertisements\n        this.elements.container = createElement('div', {\n          class: this.player.config.classNames.ads\n        });\n        this.player.elements.container.appendChild(this.elements.container); // So we can run VPAID2\n\n        google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED); // Set language\n\n        google.ima.settings.setLocale(this.player.config.ads.language); // We assume the adContainer is the video container of the plyr element\n        // that will house the ads\n\n        this.elements.displayContainer = new google.ima.AdDisplayContainer(this.elements.container); // Request video ads to be pre-loaded\n\n        this.requestAds();\n      }\n      /**\n       * Request advertisements\n       */\n\n    }, {\n      key: \"requestAds\",\n      value: function requestAds() {\n        var _this4 = this;\n\n        var container = this.player.elements.container;\n\n        try {\n          // Create ads loader\n          this.loader = new google.ima.AdsLoader(this.elements.displayContainer); // Listen and respond to ads loaded and error events\n\n          this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, function (event) {\n            return _this4.onAdsManagerLoaded(event);\n          }, false);\n          this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, function (error) {\n            return _this4.onAdError(error);\n          }, false); // Request video ads\n\n          var request = new google.ima.AdsRequest();\n          request.adTagUrl = this.tagUrl; // Specify the linear and nonlinear slot sizes. This helps the SDK\n          // to select the correct creative if multiple are returned\n\n          request.linearAdSlotWidth = container.offsetWidth;\n          request.linearAdSlotHeight = container.offsetHeight;\n          request.nonLinearAdSlotWidth = container.offsetWidth;\n          request.nonLinearAdSlotHeight = container.offsetHeight; // We only overlay ads as we only support video.\n\n          request.forceNonLinearFullSlot = false; // Mute based on current state\n\n          request.setAdWillPlayMuted(!this.player.muted);\n          this.loader.requestAds(request);\n        } catch (e) {\n          this.onAdError(e);\n        }\n      }\n      /**\n       * Update the ad countdown\n       * @param {boolean} start\n       */\n\n    }, {\n      key: \"pollCountdown\",\n      value: function pollCountdown() {\n        var _this5 = this;\n\n        var start = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        if (!start) {\n          clearInterval(this.countdownTimer);\n          this.elements.container.removeAttribute('data-badge-text');\n          return;\n        }\n\n        var update = function update() {\n          var time = formatTime(Math.max(_this5.manager.getRemainingTime(), 0));\n          var label = \"\".concat(i18n.get('advertisement', _this5.player.config), \" - \").concat(time);\n\n          _this5.elements.container.setAttribute('data-badge-text', label);\n        };\n\n        this.countdownTimer = setInterval(update, 100);\n      }\n      /**\n       * This method is called whenever the ads are ready inside the AdDisplayContainer\n       * @param {Event} adsManagerLoadedEvent\n       */\n\n    }, {\n      key: \"onAdsManagerLoaded\",\n      value: function onAdsManagerLoaded(event) {\n        var _this6 = this;\n\n        // Load could occur after a source change (race condition)\n        if (!this.enabled) {\n          return;\n        } // Get the ads manager\n\n\n        var settings = new google.ima.AdsRenderingSettings(); // Tell the SDK to save and restore content video state on our behalf\n\n        settings.restoreCustomPlaybackStateOnAdBreakComplete = true;\n        settings.enablePreloading = true; // The SDK is polling currentTime on the contentPlayback. And needs a duration\n        // so it can determine when to start the mid- and post-roll\n\n        this.manager = event.getAdsManager(this.player, settings); // Get the cue points for any mid-rolls by filtering out the pre- and post-roll\n\n        this.cuePoints = this.manager.getCuePoints(); // Add advertisement cue's within the time line if available\n\n        if (!is.empty(this.cuePoints)) {\n          this.cuePoints.forEach(function (cuePoint) {\n            if (cuePoint !== 0 && cuePoint !== -1 && cuePoint < _this6.player.duration) {\n              var seekElement = _this6.player.elements.progress;\n\n              if (is.element(seekElement)) {\n                var cuePercentage = 100 / _this6.player.duration * cuePoint;\n                var cue = createElement('span', {\n                  class: _this6.player.config.classNames.cues\n                });\n                cue.style.left = \"\".concat(cuePercentage.toString(), \"%\");\n                seekElement.appendChild(cue);\n              }\n            }\n          });\n        } // Set volume to match player\n\n\n        this.manager.setVolume(this.player.volume); // Add listeners to the required events\n        // Advertisement error events\n\n        this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, function (error) {\n          return _this6.onAdError(error);\n        }); // Advertisement regular events\n\n        Object.keys(google.ima.AdEvent.Type).forEach(function (type) {\n          _this6.manager.addEventListener(google.ima.AdEvent.Type[type], function (event) {\n            return _this6.onAdEvent(event);\n          });\n        }); // Resolve our adsManager\n\n        this.trigger('loaded');\n      }\n      /**\n       * This is where all the event handling takes place. Retrieve the ad from the event. Some\n       * events (e.g. ALL_ADS_COMPLETED) don't have the ad object associated\n       * https://developers.google.com/interactive-media-ads/docs/sdks/html5/v3/apis#ima.AdEvent.Type\n       * @param {Event} event\n       */\n\n    }, {\n      key: \"onAdEvent\",\n      value: function onAdEvent(event) {\n        var _this7 = this;\n\n        var container = this.player.elements.container; // Retrieve the ad from the event. Some events (e.g. ALL_ADS_COMPLETED)\n        // don't have ad object associated\n\n        var ad = event.getAd(); // Proxy event\n\n        var dispatchEvent = function dispatchEvent(type) {\n          var event = \"ads\".concat(type.replace(/_/g, '').toLowerCase());\n          triggerEvent.call(_this7.player, _this7.player.media, event);\n        };\n\n        switch (event.type) {\n          case google.ima.AdEvent.Type.LOADED:\n            // This is the first event sent for an ad - it is possible to determine whether the\n            // ad is a video ad or an overlay\n            this.trigger('loaded'); // Bubble event\n\n            dispatchEvent(event.type); // Start countdown\n\n            this.pollCountdown(true);\n\n            if (!ad.isLinear()) {\n              // Position AdDisplayContainer correctly for overlay\n              ad.width = container.offsetWidth;\n              ad.height = container.offsetHeight;\n            } // console.info('Ad type: ' + event.getAd().getAdPodInfo().getPodIndex());\n            // console.info('Ad time: ' + event.getAd().getAdPodInfo().getTimeOffset());\n\n\n            break;\n\n          case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:\n            // All ads for the current videos are done. We can now request new advertisements\n            // in case the video is re-played\n            // Fire event\n            dispatchEvent(event.type); // TODO: Example for what happens when a next video in a playlist would be loaded.\n            // So here we load a new video when all ads are done.\n            // Then we load new ads within a new adsManager. When the video\n            // Is started - after - the ads are loaded, then we get ads.\n            // You can also easily test cancelling and reloading by running\n            // player.ads.cancel() and player.ads.play from the console I guess.\n            // this.player.source = {\n            //     type: 'video',\n            //     title: 'View From A Blue Moon',\n            //     sources: [{\n            //         src:\n            // 'https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.mp4', type:\n            // 'video/mp4', }], poster:\n            // 'https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.jpg', tracks:\n            // [ { kind: 'captions', label: 'English', srclang: 'en', src:\n            // 'https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.en.vtt',\n            // default: true, }, { kind: 'captions', label: 'French', srclang: 'fr', src:\n            // 'https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.fr.vtt', }, ],\n            // };\n            // TODO: So there is still this thing where a video should only be allowed to start\n            // playing when the IMA SDK is ready or has failed\n\n            this.loadAds();\n            break;\n\n          case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:\n            // This event indicates the ad has started - the video player can adjust the UI,\n            // for example display a pause button and remaining time. Fired when content should\n            // be paused. This usually happens right before an ad is about to cover the content\n            dispatchEvent(event.type);\n            this.pauseContent();\n            break;\n\n          case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:\n            // This event indicates the ad has finished - the video player can perform\n            // appropriate UI actions, such as removing the timer for remaining time detection.\n            // Fired when content should be resumed. This usually happens when an ad finishes\n            // or collapses\n            dispatchEvent(event.type);\n            this.pollCountdown();\n            this.resumeContent();\n            break;\n\n          case google.ima.AdEvent.Type.STARTED:\n          case google.ima.AdEvent.Type.MIDPOINT:\n          case google.ima.AdEvent.Type.COMPLETE:\n          case google.ima.AdEvent.Type.IMPRESSION:\n          case google.ima.AdEvent.Type.CLICK:\n            dispatchEvent(event.type);\n            break;\n\n          default:\n            break;\n        }\n      }\n      /**\n       * Any ad error handling comes through here\n       * @param {Event} event\n       */\n\n    }, {\n      key: \"onAdError\",\n      value: function onAdError(event) {\n        this.cancel();\n        this.player.debug.warn('Ads error', event);\n      }\n      /**\n       * Setup hooks for Plyr and window events. This ensures\n       * the mid- and post-roll launch at the correct time. And\n       * resize the advertisement when the player resizes\n       */\n\n    }, {\n      key: \"listeners\",\n      value: function listeners() {\n        var _this8 = this;\n\n        var container = this.player.elements.container;\n        var time; // Add listeners to the required events\n\n        this.player.on('ended', function () {\n          _this8.loader.contentComplete();\n        });\n        this.player.on('seeking', function () {\n          time = _this8.player.currentTime;\n          return time;\n        });\n        this.player.on('seeked', function () {\n          var seekedTime = _this8.player.currentTime;\n\n          if (is.empty(_this8.cuePoints)) {\n            return;\n          }\n\n          _this8.cuePoints.forEach(function (cuePoint, index) {\n            if (time < cuePoint && cuePoint < seekedTime) {\n              _this8.manager.discardAdBreak();\n\n              _this8.cuePoints.splice(index, 1);\n            }\n          });\n        }); // Listen to the resizing of the window. And resize ad accordingly\n        // TODO: eventually implement ResizeObserver\n\n        window.addEventListener('resize', function () {\n          if (_this8.manager) {\n            _this8.manager.resize(container.offsetWidth, container.offsetHeight, google.ima.ViewMode.NORMAL);\n          }\n        });\n      }\n      /**\n       * Initialize the adsManager and start playing advertisements\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {\n        var _this9 = this;\n\n        var container = this.player.elements.container;\n\n        if (!this.managerPromise) {\n          this.resumeContent();\n        } // Play the requested advertisement whenever the adsManager is ready\n\n\n        this.managerPromise.then(function () {\n          // Initialize the container. Must be done via a user action on mobile devices\n          _this9.elements.displayContainer.initialize();\n\n          try {\n            if (!_this9.initialized) {\n              // Initialize the ads manager. Ad rules playlist will start at this time\n              _this9.manager.init(container.offsetWidth, container.offsetHeight, google.ima.ViewMode.NORMAL); // Call play to start showing the ad. Single video and overlay ads will\n              // start at this time; the call will be ignored for ad rules\n\n\n              _this9.manager.start();\n            }\n\n            _this9.initialized = true;\n          } catch (adError) {\n            // An error may be thrown if there was a problem with the\n            // VAST response\n            _this9.onAdError(adError);\n          }\n        }).catch(function () {});\n      }\n      /**\n       * Resume our video\n       */\n\n    }, {\n      key: \"resumeContent\",\n      value: function resumeContent() {\n        // Hide the advertisement container\n        this.elements.container.style.zIndex = ''; // Ad is stopped\n\n        this.playing = false; // Play our video\n\n        if (this.player.currentTime < this.player.duration) {\n          this.player.play();\n        }\n      }\n      /**\n       * Pause our video\n       */\n\n    }, {\n      key: \"pauseContent\",\n      value: function pauseContent() {\n        // Show the advertisement container\n        this.elements.container.style.zIndex = 3; // Ad is playing.\n\n        this.playing = true; // Pause our video.\n\n        this.player.pause();\n      }\n      /**\n       * Destroy the adsManager so we can grab new ads after this. If we don't then we're not\n       * allowed to call new ads based on google policies, as they interpret this as an accidental\n       * video requests. https://developers.google.com/interactive-\n       * media-ads/docs/sdks/android/faq#8\n       */\n\n    }, {\n      key: \"cancel\",\n      value: function cancel() {\n        // Pause our video\n        if (this.initialized) {\n          this.resumeContent();\n        } // Tell our instance that we're done for now\n\n\n        this.trigger('error'); // Re-create our adsManager\n\n        this.loadAds();\n      }\n      /**\n       * Re-create our adsManager\n       */\n\n    }, {\n      key: \"loadAds\",\n      value: function loadAds() {\n        var _this10 = this;\n\n        // Tell our adsManager to go bye bye\n        this.managerPromise.then(function () {\n          // Destroy our adsManager\n          if (_this10.manager) {\n            _this10.manager.destroy();\n          } // Re-set our adsManager promises\n\n\n          _this10.managerPromise = new Promise(function (resolve) {\n            _this10.on('loaded', resolve);\n\n            _this10.player.debug.log(_this10.manager);\n          }); // Now request some new advertisements\n\n          _this10.requestAds();\n        }).catch(function () {});\n      }\n      /**\n       * Handles callbacks after an ad event was invoked\n       * @param {string} event - Event type\n       */\n\n    }, {\n      key: \"trigger\",\n      value: function trigger(event) {\n        var _this11 = this;\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var handlers = this.events[event];\n\n        if (is.array(handlers)) {\n          handlers.forEach(function (handler) {\n            if (is.function(handler)) {\n              handler.apply(_this11, args);\n            }\n          });\n        }\n      }\n      /**\n       * Add event listeners\n       * @param {string} event - Event type\n       * @param {function} callback - Callback for when event occurs\n       * @return {Ads}\n       */\n\n    }, {\n      key: \"on\",\n      value: function on$$1(event, callback) {\n        if (!is.array(this.events[event])) {\n          this.events[event] = [];\n        }\n\n        this.events[event].push(callback);\n        return this;\n      }\n      /**\n       * Setup a safety timer for when the ad network doesn't respond for whatever reason.\n       * The advertisement has 12 seconds to get its things together. We stop this timer when the\n       * advertisement is playing, or when a user action is required to start, then we clear the\n       * timer on ad ready\n       * @param {number} time\n       * @param {string} from\n       */\n\n    }, {\n      key: \"startSafetyTimer\",\n      value: function startSafetyTimer(time, from) {\n        var _this12 = this;\n\n        this.player.debug.log(\"Safety timer invoked from: \".concat(from));\n        this.safetyTimer = setTimeout(function () {\n          _this12.cancel();\n\n          _this12.clearSafetyTimer('startSafetyTimer()');\n        }, time);\n      }\n      /**\n       * Clear our safety timer(s)\n       * @param {string} from\n       */\n\n    }, {\n      key: \"clearSafetyTimer\",\n      value: function clearSafetyTimer(from) {\n        if (!is.nullOrUndefined(this.safetyTimer)) {\n          this.player.debug.log(\"Safety timer cleared from: \".concat(from));\n          clearTimeout(this.safetyTimer);\n          this.safetyTimer = null;\n        }\n      }\n    }, {\n      key: \"enabled\",\n      get: function get() {\n        return this.player.isHTML5 && this.player.isVideo && this.player.config.ads.enabled && !is.empty(this.publisherId);\n      }\n    }, {\n      key: \"tagUrl\",\n      get: function get() {\n        var params = {\n          AV_PUBLISHERID: '58c25bb0073ef448b1087ad6',\n          AV_CHANNELID: '5a0458dc28a06145e4519d21',\n          AV_URL: window.location.hostname,\n          cb: Date.now(),\n          AV_WIDTH: 640,\n          AV_HEIGHT: 480,\n          AV_CDIM2: this.publisherId\n        };\n        var base = 'https://go.aniview.com/api/adserver6/vast/';\n        return \"\".concat(base, \"?\").concat(buildUrlParams(params));\n      }\n    }]);\n\n    return Ads;\n  }();\n\n  var source = {\n    // Add elements to HTML5 media (source, tracks, etc)\n    insertElements: function insertElements(type, attributes) {\n      var _this = this;\n\n      if (is.string(attributes)) {\n        insertElement(type, this.media, {\n          src: attributes\n        });\n      } else if (is.array(attributes)) {\n        attributes.forEach(function (attribute) {\n          insertElement(type, _this.media, attribute);\n        });\n      }\n    },\n    // Update source\n    // Sources are not checked for support so be careful\n    change: function change(input) {\n      var _this2 = this;\n\n      if (!getDeep(input, 'sources.length')) {\n        this.debug.warn('Invalid source format');\n        return;\n      } // Cancel current network requests\n\n\n      html5.cancelRequests.call(this); // Destroy instance and re-setup\n\n      this.destroy.call(this, function () {\n        // Reset quality options\n        _this2.options.quality = []; // Remove elements\n\n        removeElement(_this2.media);\n        _this2.media = null; // Reset class name\n\n        if (is.element(_this2.elements.container)) {\n          _this2.elements.container.removeAttribute('class');\n        } // Set the type and provider\n\n\n        var sources = input.sources,\n            type = input.type;\n\n        var _sources = _slicedToArray(sources, 1),\n            _sources$ = _sources[0],\n            _sources$$provider = _sources$.provider,\n            provider = _sources$$provider === void 0 ? providers.html5 : _sources$$provider,\n            src = _sources$.src;\n\n        var tagName = provider === 'html5' ? type : 'div';\n        var attributes = provider === 'html5' ? {} : {\n          src: src\n        };\n        Object.assign(_this2, {\n          provider: provider,\n          type: type,\n          // Check for support\n          supported: support.check(type, provider, _this2.config.playsinline),\n          // Create new element\n          media: createElement(tagName, attributes)\n        }); // Inject the new element\n\n        _this2.elements.container.appendChild(_this2.media); // Autoplay the new source?\n\n\n        if (is.boolean(input.autoplay)) {\n          _this2.config.autoplay = input.autoplay;\n        } // Set attributes for audio and video\n\n\n        if (_this2.isHTML5) {\n          if (_this2.config.crossorigin) {\n            _this2.media.setAttribute('crossorigin', '');\n          }\n\n          if (_this2.config.autoplay) {\n            _this2.media.setAttribute('autoplay', '');\n          }\n\n          if (!is.empty(input.poster)) {\n            _this2.poster = input.poster;\n          }\n\n          if (_this2.config.loop.active) {\n            _this2.media.setAttribute('loop', '');\n          }\n\n          if (_this2.config.muted) {\n            _this2.media.setAttribute('muted', '');\n          }\n\n          if (_this2.config.playsinline) {\n            _this2.media.setAttribute('playsinline', '');\n          }\n        } // Restore class hook\n\n\n        ui.addStyleHook.call(_this2); // Set new sources for html5\n\n        if (_this2.isHTML5) {\n          source.insertElements.call(_this2, 'source', sources);\n        } // Set video title\n\n\n        _this2.config.title = input.title; // Set up from scratch\n\n        media.setup.call(_this2); // HTML5 stuff\n\n        if (_this2.isHTML5) {\n          // Setup captions\n          if (Object.keys(input).includes('tracks')) {\n            source.insertElements.call(_this2, 'track', input.tracks);\n          }\n        } // If HTML5 or embed but not fully supported, setupInterface and call ready now\n\n\n        if (_this2.isHTML5 || _this2.isEmbed && !_this2.supported.ui) {\n          // Setup interface\n          ui.build.call(_this2);\n        }\n\n        if (_this2.isHTML5) {\n          // Load HTML5 sources\n          _this2.media.load();\n        } // Update the fullscreen support\n\n\n        _this2.fullscreen.update();\n      }, true);\n    }\n  };\n\n  // TODO: Use a WeakMap for private globals\n  // const globals = new WeakMap();\n  // Plyr instance\n\n  var Plyr =\n  /*#__PURE__*/\n  function () {\n    function Plyr(target, options) {\n      var _this = this;\n\n      _classCallCheck(this, Plyr);\n\n      this.timers = {}; // State\n\n      this.ready = false;\n      this.loading = false;\n      this.failed = false; // Touch device\n\n      this.touch = support.touch; // Set the media element\n\n      this.media = target; // String selector passed\n\n      if (is.string(this.media)) {\n        this.media = document.querySelectorAll(this.media);\n      } // jQuery, NodeList or Array passed, use first element\n\n\n      if (window.jQuery && this.media instanceof jQuery || is.nodeList(this.media) || is.array(this.media)) {\n        // eslint-disable-next-line\n        this.media = this.media[0];\n      } // Set config\n\n\n      this.config = extend({}, defaults, Plyr.defaults, options || {}, function () {\n        try {\n          return JSON.parse(_this.media.getAttribute('data-plyr-config'));\n        } catch (e) {\n          return {};\n        }\n      }()); // Elements cache\n\n      this.elements = {\n        container: null,\n        captions: null,\n        buttons: {},\n        display: {},\n        progress: {},\n        inputs: {},\n        settings: {\n          popup: null,\n          menu: null,\n          panels: {},\n          buttons: {}\n        }\n      }; // Captions\n\n      this.captions = {\n        active: null,\n        currentTrack: -1,\n        meta: new WeakMap()\n      }; // Fullscreen\n\n      this.fullscreen = {\n        active: false\n      }; // Options\n\n      this.options = {\n        speed: [],\n        quality: []\n      }; // Debugging\n      // TODO: move to globals\n\n      this.debug = new Console(this.config.debug); // Log config options and support\n\n      this.debug.log('Config', this.config);\n      this.debug.log('Support', support); // We need an element to setup\n\n      if (is.nullOrUndefined(this.media) || !is.element(this.media)) {\n        this.debug.error('Setup failed: no suitable element passed');\n        return;\n      } // Bail if the element is initialized\n\n\n      if (this.media.plyr) {\n        this.debug.warn('Target already setup');\n        return;\n      } // Bail if not enabled\n\n\n      if (!this.config.enabled) {\n        this.debug.error('Setup failed: disabled by config');\n        return;\n      } // Bail if disabled or no basic support\n      // You may want to disable certain UAs etc\n\n\n      if (!support.check().api) {\n        this.debug.error('Setup failed: no support');\n        return;\n      } // Cache original element state for .destroy()\n\n\n      var clone = this.media.cloneNode(true);\n      clone.autoplay = false;\n      this.elements.original = clone; // Set media type based on tag or data attribute\n      // Supported: video, audio, vimeo, youtube\n\n      var type = this.media.tagName.toLowerCase(); // Embed properties\n\n      var iframe = null;\n      var url = null; // Different setup based on type\n\n      switch (type) {\n        case 'div':\n          // Find the frame\n          iframe = this.media.querySelector('iframe'); // <iframe> type\n\n          if (is.element(iframe)) {\n            // Detect provider\n            url = parseUrl(iframe.getAttribute('src'));\n            this.provider = getProviderByUrl(url.toString()); // Rework elements\n\n            this.elements.container = this.media;\n            this.media = iframe; // Reset classname\n\n            this.elements.container.className = ''; // Get attributes from URL and set config\n\n            if (url.search.length) {\n              var truthy = ['1', 'true'];\n\n              if (truthy.includes(url.searchParams.get('autoplay'))) {\n                this.config.autoplay = true;\n              }\n\n              if (truthy.includes(url.searchParams.get('loop'))) {\n                this.config.loop.active = true;\n              } // TODO: replace fullscreen.iosNative with this playsinline config option\n              // YouTube requires the playsinline in the URL\n\n\n              if (this.isYouTube) {\n                this.config.playsinline = truthy.includes(url.searchParams.get('playsinline'));\n                this.config.hl = url.searchParams.get('hl'); // TODO: Should this be setting language?\n              } else {\n                this.config.playsinline = true;\n              }\n            }\n          } else {\n            // <div> with attributes\n            this.provider = this.media.getAttribute(this.config.attributes.embed.provider); // Remove attribute\n\n            this.media.removeAttribute(this.config.attributes.embed.provider);\n          } // Unsupported or missing provider\n\n\n          if (is.empty(this.provider) || !Object.keys(providers).includes(this.provider)) {\n            this.debug.error('Setup failed: Invalid provider');\n            return;\n          } // Audio will come later for external providers\n\n\n          this.type = types.video;\n          break;\n\n        case 'video':\n        case 'audio':\n          this.type = type;\n          this.provider = providers.html5; // Get config from attributes\n\n          if (this.media.hasAttribute('crossorigin')) {\n            this.config.crossorigin = true;\n          }\n\n          if (this.media.hasAttribute('autoplay')) {\n            this.config.autoplay = true;\n          }\n\n          if (this.media.hasAttribute('playsinline') || this.media.hasAttribute('webkit-playsinline')) {\n            this.config.playsinline = true;\n          }\n\n          if (this.media.hasAttribute('muted')) {\n            this.config.muted = true;\n          }\n\n          if (this.media.hasAttribute('loop')) {\n            this.config.loop.active = true;\n          }\n\n          break;\n\n        default:\n          this.debug.error('Setup failed: unsupported type');\n          return;\n      } // Check for support again but with type\n\n\n      this.supported = support.check(this.type, this.provider, this.config.playsinline); // If no support for even API, bail\n\n      if (!this.supported.api) {\n        this.debug.error('Setup failed: no support');\n        return;\n      }\n\n      this.eventListeners = []; // Create listeners\n\n      this.listeners = new Listeners(this); // Setup local storage for user settings\n\n      this.storage = new Storage(this); // Store reference\n\n      this.media.plyr = this; // Wrap media\n\n      if (!is.element(this.elements.container)) {\n        this.elements.container = createElement('div');\n        wrap(this.media, this.elements.container);\n      } // Add style hook\n\n\n      ui.addStyleHook.call(this); // Setup media\n\n      media.setup.call(this); // Listen for events if debugging\n\n      if (this.config.debug) {\n        on.call(this, this.elements.container, this.config.events.join(' '), function (event) {\n          _this.debug.log(\"event: \".concat(event.type));\n        });\n      } // Setup interface\n      // If embed but not fully supported, build interface now to avoid flash of controls\n\n\n      if (this.isHTML5 || this.isEmbed && !this.supported.ui) {\n        ui.build.call(this);\n      } // Container listeners\n\n\n      this.listeners.container(); // Global listeners\n\n      this.listeners.global(); // Setup fullscreen\n\n      this.fullscreen = new Fullscreen(this); // Setup ads if provided\n\n      if (this.config.ads.enabled) {\n        this.ads = new Ads(this);\n      } // Autoplay if required\n\n\n      if (this.config.autoplay) {\n        this.play();\n      } // Seek time will be recorded (in listeners.js) so we can prevent hiding controls for a few seconds after seek\n\n\n      this.lastSeekTime = 0;\n    } // ---------------------------------------\n    // API\n    // ---------------------------------------\n\n    /**\n     * Types and provider helpers\n     */\n\n\n    _createClass(Plyr, [{\n      key: \"play\",\n\n      /**\n       * Play the media, or play the advertisement (if they are not blocked)\n       */\n      value: function play() {\n        if (!is.function(this.media.play)) {\n          return null;\n        } // Return the promise (for HTML5)\n\n\n        return this.media.play();\n      }\n      /**\n       * Pause the media\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        if (!this.playing || !is.function(this.media.pause)) {\n          return;\n        }\n\n        this.media.pause();\n      }\n      /**\n       * Get playing state\n       */\n\n    }, {\n      key: \"togglePlay\",\n\n      /**\n       * Toggle playback based on current status\n       * @param {boolean} input\n       */\n      value: function togglePlay(input) {\n        // Toggle based on current state if nothing passed\n        var toggle = is.boolean(input) ? input : !this.playing;\n\n        if (toggle) {\n          this.play();\n        } else {\n          this.pause();\n        }\n      }\n      /**\n       * Stop playback\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        if (this.isHTML5) {\n          this.pause();\n          this.restart();\n        } else if (is.function(this.media.stop)) {\n          this.media.stop();\n        }\n      }\n      /**\n       * Restart playback\n       */\n\n    }, {\n      key: \"restart\",\n      value: function restart() {\n        this.currentTime = 0;\n      }\n      /**\n       * Rewind\n       * @param {number} seekTime - how far to rewind in seconds. Defaults to the config.seekTime\n       */\n\n    }, {\n      key: \"rewind\",\n      value: function rewind(seekTime) {\n        this.currentTime = this.currentTime - (is.number(seekTime) ? seekTime : this.config.seekTime);\n      }\n      /**\n       * Fast forward\n       * @param {number} seekTime - how far to fast forward in seconds. Defaults to the config.seekTime\n       */\n\n    }, {\n      key: \"forward\",\n      value: function forward(seekTime) {\n        this.currentTime = this.currentTime + (is.number(seekTime) ? seekTime : this.config.seekTime);\n      }\n      /**\n       * Seek to a time\n       * @param {number} input - where to seek to in seconds. Defaults to 0 (the start)\n       */\n\n    }, {\n      key: \"increaseVolume\",\n\n      /**\n       * Increase volume\n       * @param {boolean} step - How much to decrease by (between 0 and 1)\n       */\n      value: function increaseVolume(step) {\n        var volume = this.media.muted ? 0 : this.volume;\n        this.volume = volume + (is.number(step) ? step : 0);\n      }\n      /**\n       * Decrease volume\n       * @param {boolean} step - How much to decrease by (between 0 and 1)\n       */\n\n    }, {\n      key: \"decreaseVolume\",\n      value: function decreaseVolume(step) {\n        this.increaseVolume(-step);\n      }\n      /**\n       * Set muted state\n       * @param {boolean} mute\n       */\n\n    }, {\n      key: \"toggleCaptions\",\n\n      /**\n       * Toggle captions\n       * @param {boolean} input - Whether to enable captions\n       */\n      value: function toggleCaptions(input) {\n        captions.toggle.call(this, input, false);\n      }\n      /**\n       * Set the caption track by index\n       * @param {number} - Caption index\n       */\n\n    }, {\n      key: \"airplay\",\n\n      /**\n       * Trigger the airplay dialog\n       * TODO: update player with state, support, enabled\n       */\n      value: function airplay() {\n        // Show dialog if supported\n        if (support.airplay) {\n          this.media.webkitShowPlaybackTargetPicker();\n        }\n      }\n      /**\n       * Toggle the player controls\n       * @param {boolean} [toggle] - Whether to show the controls\n       */\n\n    }, {\n      key: \"toggleControls\",\n      value: function toggleControls(toggle) {\n        // Don't toggle if missing UI support or if it's audio\n        if (this.supported.ui && !this.isAudio) {\n          // Get state before change\n          var isHidden = hasClass(this.elements.container, this.config.classNames.hideControls); // Negate the argument if not undefined since adding the class to hides the controls\n\n          var force = typeof toggle === 'undefined' ? undefined : !toggle; // Apply and get updated state\n\n          var hiding = toggleClass(this.elements.container, this.config.classNames.hideControls, force); // Close menu\n\n          if (hiding && this.config.controls.includes('settings') && !is.empty(this.config.settings)) {\n            controls.toggleMenu.call(this, false);\n          } // Trigger event on change\n\n\n          if (hiding !== isHidden) {\n            var eventName = hiding ? 'controlshidden' : 'controlsshown';\n            triggerEvent.call(this, this.media, eventName);\n          }\n\n          return !hiding;\n        }\n\n        return false;\n      }\n      /**\n       * Add event listeners\n       * @param {string} event - Event type\n       * @param {function} callback - Callback for when event occurs\n       */\n\n    }, {\n      key: \"on\",\n      value: function on$$1(event, callback) {\n        on.call(this, this.elements.container, event, callback);\n      }\n      /**\n       * Add event listeners once\n       * @param {string} event - Event type\n       * @param {function} callback - Callback for when event occurs\n       */\n\n    }, {\n      key: \"once\",\n      value: function once$$1(event, callback) {\n        once.call(this, this.elements.container, event, callback);\n      }\n      /**\n       * Remove event listeners\n       * @param {string} event - Event type\n       * @param {function} callback - Callback for when event occurs\n       */\n\n    }, {\n      key: \"off\",\n      value: function off$$1(event, callback) {\n        off(this.elements.container, event, callback);\n      }\n      /**\n       * Destroy an instance\n       * Event listeners are removed when elements are removed\n       * http://stackoverflow.com/questions/12528049/if-a-dom-element-is-removed-are-its-listeners-also-removed-from-memory\n       * @param {function} callback - Callback for when destroy is complete\n       * @param {boolean} soft - Whether it's a soft destroy (for source changes etc)\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy(callback) {\n        var _this2 = this;\n\n        var soft = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (!this.ready) {\n          return;\n        }\n\n        var done = function done() {\n          // Reset overflow (incase destroyed while in fullscreen)\n          document.body.style.overflow = ''; // GC for embed\n\n          _this2.embed = null; // If it's a soft destroy, make minimal changes\n\n          if (soft) {\n            if (Object.keys(_this2.elements).length) {\n              // Remove elements\n              removeElement(_this2.elements.buttons.play);\n              removeElement(_this2.elements.captions);\n              removeElement(_this2.elements.controls);\n              removeElement(_this2.elements.wrapper); // Clear for GC\n\n              _this2.elements.buttons.play = null;\n              _this2.elements.captions = null;\n              _this2.elements.controls = null;\n              _this2.elements.wrapper = null;\n            } // Callback\n\n\n            if (is.function(callback)) {\n              callback();\n            }\n          } else {\n            // Unbind listeners\n            unbindListeners.call(_this2); // Replace the container with the original element provided\n\n            replaceElement(_this2.elements.original, _this2.elements.container); // Event\n\n            triggerEvent.call(_this2, _this2.elements.original, 'destroyed', true); // Callback\n\n            if (is.function(callback)) {\n              callback.call(_this2.elements.original);\n            } // Reset state\n\n\n            _this2.ready = false; // Clear for garbage collection\n\n            setTimeout(function () {\n              _this2.elements = null;\n              _this2.media = null;\n            }, 200);\n          }\n        }; // Stop playback\n\n\n        this.stop(); // Provider specific stuff\n\n        if (this.isHTML5) {\n          // Clear timeout\n          clearTimeout(this.timers.loading); // Restore native video controls\n\n          ui.toggleNativeControls.call(this, true); // Clean up\n\n          done();\n        } else if (this.isYouTube) {\n          // Clear timers\n          clearInterval(this.timers.buffering);\n          clearInterval(this.timers.playing); // Destroy YouTube API\n\n          if (this.embed !== null && is.function(this.embed.destroy)) {\n            this.embed.destroy();\n          } // Clean up\n\n\n          done();\n        } else if (this.isVimeo) {\n          // Destroy Vimeo API\n          // then clean up (wait, to prevent postmessage errors)\n          if (this.embed !== null) {\n            this.embed.unload().then(done);\n          } // Vimeo does not always return\n\n\n          setTimeout(done, 200);\n        }\n      }\n      /**\n       * Check for support for a mime type (HTML5 only)\n       * @param {string} type - Mime type\n       */\n\n    }, {\n      key: \"supports\",\n      value: function supports(type) {\n        return support.mime.call(this, type);\n      }\n      /**\n       * Check for support\n       * @param {string} type - Player type (audio/video)\n       * @param {string} provider - Provider (html5/youtube/vimeo)\n       * @param {bool} inline - Where player has `playsinline` sttribute\n       */\n\n    }, {\n      key: \"isHTML5\",\n      get: function get() {\n        return Boolean(this.provider === providers.html5);\n      }\n    }, {\n      key: \"isEmbed\",\n      get: function get() {\n        return Boolean(this.isYouTube || this.isVimeo);\n      }\n    }, {\n      key: \"isYouTube\",\n      get: function get() {\n        return Boolean(this.provider === providers.youtube);\n      }\n    }, {\n      key: \"isVimeo\",\n      get: function get() {\n        return Boolean(this.provider === providers.vimeo);\n      }\n    }, {\n      key: \"isVideo\",\n      get: function get() {\n        return Boolean(this.type === types.video);\n      }\n    }, {\n      key: \"isAudio\",\n      get: function get() {\n        return Boolean(this.type === types.audio);\n      }\n    }, {\n      key: \"playing\",\n      get: function get() {\n        return Boolean(this.ready && !this.paused && !this.ended);\n      }\n      /**\n       * Get paused state\n       */\n\n    }, {\n      key: \"paused\",\n      get: function get() {\n        return Boolean(this.media.paused);\n      }\n      /**\n       * Get stopped state\n       */\n\n    }, {\n      key: \"stopped\",\n      get: function get() {\n        return Boolean(this.paused && this.currentTime === 0);\n      }\n      /**\n       * Get ended state\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return Boolean(this.media.ended);\n      }\n    }, {\n      key: \"currentTime\",\n      set: function set(input) {\n        // Bail if media duration isn't available yet\n        if (!this.duration) {\n          return;\n        } // Validate input\n\n\n        var inputIsValid = is.number(input) && input > 0; // Set\n\n        this.media.currentTime = inputIsValid ? Math.min(input, this.duration) : 0; // Logging\n\n        this.debug.log(\"Seeking to \".concat(this.currentTime, \" seconds\"));\n      }\n      /**\n       * Get current time\n       */\n      ,\n      get: function get() {\n        return Number(this.media.currentTime);\n      }\n      /**\n       * Get buffered\n       */\n\n    }, {\n      key: \"buffered\",\n      get: function get() {\n        var buffered = this.media.buffered; // YouTube / Vimeo return a float between 0-1\n\n        if (is.number(buffered)) {\n          return buffered;\n        } // HTML5\n        // TODO: Handle buffered chunks of the media\n        // (i.e. seek to another section buffers only that section)\n\n\n        if (buffered && buffered.length && this.duration > 0) {\n          return buffered.end(0) / this.duration;\n        }\n\n        return 0;\n      }\n      /**\n       * Get seeking status\n       */\n\n    }, {\n      key: \"seeking\",\n      get: function get() {\n        return Boolean(this.media.seeking);\n      }\n      /**\n       * Get the duration of the current media\n       */\n\n    }, {\n      key: \"duration\",\n      get: function get() {\n        // Faux duration set via config\n        var fauxDuration = parseFloat(this.config.duration); // Media duration can be NaN or Infinity before the media has loaded\n\n        var realDuration = (this.media || {}).duration;\n        var duration = !is.number(realDuration) || realDuration === Infinity ? 0 : realDuration; // If config duration is funky, use regular duration\n\n        return fauxDuration || duration;\n      }\n      /**\n       * Set the player volume\n       * @param {number} value - must be between 0 and 1. Defaults to the value from local storage and config.volume if not set in storage\n       */\n\n    }, {\n      key: \"volume\",\n      set: function set(value) {\n        var volume = value;\n        var max = 1;\n        var min = 0;\n\n        if (is.string(volume)) {\n          volume = Number(volume);\n        } // Load volume from storage if no value specified\n\n\n        if (!is.number(volume)) {\n          volume = this.storage.get('volume');\n        } // Use config if all else fails\n\n\n        if (!is.number(volume)) {\n          volume = this.config.volume;\n        } // Maximum is volumeMax\n\n\n        if (volume > max) {\n          volume = max;\n        } // Minimum is volumeMin\n\n\n        if (volume < min) {\n          volume = min;\n        } // Update config\n\n\n        this.config.volume = volume; // Set the player volume\n\n        this.media.volume = volume; // If muted, and we're increasing volume manually, reset muted state\n\n        if (!is.empty(value) && this.muted && volume > 0) {\n          this.muted = false;\n        }\n      }\n      /**\n       * Get the current player volume\n       */\n      ,\n      get: function get() {\n        return Number(this.media.volume);\n      }\n    }, {\n      key: \"muted\",\n      set: function set(mute) {\n        var toggle = mute; // Load muted state from storage\n\n        if (!is.boolean(toggle)) {\n          toggle = this.storage.get('muted');\n        } // Use config if all else fails\n\n\n        if (!is.boolean(toggle)) {\n          toggle = this.config.muted;\n        } // Update config\n\n\n        this.config.muted = toggle; // Set mute on the player\n\n        this.media.muted = toggle;\n      }\n      /**\n       * Get current muted state\n       */\n      ,\n      get: function get() {\n        return Boolean(this.media.muted);\n      }\n      /**\n       * Check if the media has audio\n       */\n\n    }, {\n      key: \"hasAudio\",\n      get: function get() {\n        // Assume yes for all non HTML5 (as we can't tell...)\n        if (!this.isHTML5) {\n          return true;\n        }\n\n        if (this.isAudio) {\n          return true;\n        } // Get audio tracks\n\n\n        return Boolean(this.media.mozHasAudio) || Boolean(this.media.webkitAudioDecodedByteCount) || Boolean(this.media.audioTracks && this.media.audioTracks.length);\n      }\n      /**\n       * Set playback speed\n       * @param {number} speed - the speed of playback (0.5-2.0)\n       */\n\n    }, {\n      key: \"speed\",\n      set: function set(input) {\n        var speed = null;\n\n        if (is.number(input)) {\n          speed = input;\n        }\n\n        if (!is.number(speed)) {\n          speed = this.storage.get('speed');\n        }\n\n        if (!is.number(speed)) {\n          speed = this.config.speed.selected;\n        } // Set min/max\n\n\n        if (speed < 0.1) {\n          speed = 0.1;\n        }\n\n        if (speed > 2.0) {\n          speed = 2.0;\n        }\n\n        if (!this.config.speed.options.includes(speed)) {\n          this.debug.warn(\"Unsupported speed (\".concat(speed, \")\"));\n          return;\n        } // Update config\n\n\n        this.config.speed.selected = speed; // Set media speed\n\n        this.media.playbackRate = speed;\n      }\n      /**\n       * Get current playback speed\n       */\n      ,\n      get: function get() {\n        return Number(this.media.playbackRate);\n      }\n      /**\n       * Set playback quality\n       * Currently HTML5 & YouTube only\n       * @param {number} input - Quality level\n       */\n\n    }, {\n      key: \"quality\",\n      set: function set(input) {\n        var config = this.config.quality;\n        var options = this.options.quality;\n\n        if (!options.length) {\n          return;\n        }\n\n        var quality = [!is.empty(input) && Number(input), this.storage.get('quality'), config.selected, config.default].find(is.number);\n        var updateStorage = true;\n\n        if (!options.includes(quality)) {\n          var value = closest(options, quality);\n          this.debug.warn(\"Unsupported quality option: \".concat(quality, \", using \").concat(value, \" instead\"));\n          quality = value; // Don't update storage if quality is not supported\n\n          updateStorage = false;\n        } // Update config\n\n\n        config.selected = quality; // Set quality\n\n        this.media.quality = quality; // Save to storage\n\n        if (updateStorage) {\n          this.storage.set({\n            quality: quality\n          });\n        }\n      }\n      /**\n       * Get current quality level\n       */\n      ,\n      get: function get() {\n        return this.media.quality;\n      }\n      /**\n       * Toggle loop\n       * TODO: Finish fancy new logic. Set the indicator on load as user may pass loop as config\n       * @param {boolean} input - Whether to loop or not\n       */\n\n    }, {\n      key: \"loop\",\n      set: function set(input) {\n        var toggle = is.boolean(input) ? input : this.config.loop.active;\n        this.config.loop.active = toggle;\n        this.media.loop = toggle; // Set default to be a true toggle\n\n        /* const type = ['start', 'end', 'all', 'none', 'toggle'].includes(input) ? input : 'toggle';\n         switch (type) {\n            case 'start':\n                if (this.config.loop.end && this.config.loop.end <= this.currentTime) {\n                    this.config.loop.end = null;\n                }\n                this.config.loop.start = this.currentTime;\n                // this.config.loop.indicator.start = this.elements.display.played.value;\n                break;\n             case 'end':\n                if (this.config.loop.start >= this.currentTime) {\n                    return this;\n                }\n                this.config.loop.end = this.currentTime;\n                // this.config.loop.indicator.end = this.elements.display.played.value;\n                break;\n             case 'all':\n                this.config.loop.start = 0;\n                this.config.loop.end = this.duration - 2;\n                this.config.loop.indicator.start = 0;\n                this.config.loop.indicator.end = 100;\n                break;\n             case 'toggle':\n                if (this.config.loop.active) {\n                    this.config.loop.start = 0;\n                    this.config.loop.end = null;\n                } else {\n                    this.config.loop.start = 0;\n                    this.config.loop.end = this.duration - 2;\n                }\n                break;\n             default:\n                this.config.loop.start = 0;\n                this.config.loop.end = null;\n                break;\n        } */\n      }\n      /**\n       * Get current loop state\n       */\n      ,\n      get: function get() {\n        return Boolean(this.media.loop);\n      }\n      /**\n       * Set new media source\n       * @param {object} input - The new source object (see docs)\n       */\n\n    }, {\n      key: \"source\",\n      set: function set(input) {\n        source.change.call(this, input);\n      }\n      /**\n       * Get current source\n       */\n      ,\n      get: function get() {\n        return this.media.currentSrc;\n      }\n      /**\n       * Get a download URL (either source or custom)\n       */\n\n    }, {\n      key: \"download\",\n      get: function get() {\n        var download = this.config.urls.download;\n        return is.url(download) ? download : this.source;\n      }\n      /**\n       * Set the poster image for a video\n       * @param {input} - the URL for the new poster image\n       */\n\n    }, {\n      key: \"poster\",\n      set: function set(input) {\n        if (!this.isVideo) {\n          this.debug.warn('Poster can only be set for video');\n          return;\n        }\n\n        ui.setPoster.call(this, input, false).catch(function () {});\n      }\n      /**\n       * Get the current poster image\n       */\n      ,\n      get: function get() {\n        if (!this.isVideo) {\n          return null;\n        }\n\n        return this.media.getAttribute('poster');\n      }\n      /**\n       * Set the autoplay state\n       * @param {boolean} input - Whether to autoplay or not\n       */\n\n    }, {\n      key: \"autoplay\",\n      set: function set(input) {\n        var toggle = is.boolean(input) ? input : this.config.autoplay;\n        this.config.autoplay = toggle;\n      }\n      /**\n       * Get the current autoplay state\n       */\n      ,\n      get: function get() {\n        return Boolean(this.config.autoplay);\n      }\n    }, {\n      key: \"currentTrack\",\n      set: function set(input) {\n        captions.set.call(this, input, false);\n      }\n      /**\n       * Get the current caption track index (-1 if disabled)\n       */\n      ,\n      get: function get() {\n        var _this$captions = this.captions,\n            toggled = _this$captions.toggled,\n            currentTrack = _this$captions.currentTrack;\n        return toggled ? currentTrack : -1;\n      }\n      /**\n       * Set the wanted language for captions\n       * Since tracks can be added later it won't update the actual caption track until there is a matching track\n       * @param {string} - Two character ISO language code (e.g. EN, FR, PT, etc)\n       */\n\n    }, {\n      key: \"language\",\n      set: function set(input) {\n        captions.setLanguage.call(this, input, false);\n      }\n      /**\n       * Get the current track's language\n       */\n      ,\n      get: function get() {\n        return (captions.getCurrentTrack.call(this) || {}).language;\n      }\n      /**\n       * Toggle picture-in-picture playback on WebKit/MacOS\n       * TODO: update player with state, support, enabled\n       * TODO: detect outside changes\n       */\n\n    }, {\n      key: \"pip\",\n      set: function set(input) {\n        // Bail if no support\n        if (!support.pip) {\n          return;\n        } // Toggle based on current state if not passed\n\n\n        var toggle = is.boolean(input) ? input : !this.pip; // Toggle based on current state\n        // Safari\n\n        if (is.function(this.media.webkitSetPresentationMode)) {\n          this.media.webkitSetPresentationMode(toggle ? pip.active : pip.inactive);\n        } // Chrome\n\n\n        if (is.function(this.media.requestPictureInPicture)) {\n          if (!this.pip && toggle) {\n            this.media.requestPictureInPicture();\n          } else if (this.pip && !toggle) {\n            document.exitPictureInPicture();\n          }\n        }\n      }\n      /**\n       * Get the current picture-in-picture state\n       */\n      ,\n      get: function get() {\n        if (!support.pip) {\n          return null;\n        } // Safari\n\n\n        if (!is.empty(this.media.webkitPresentationMode)) {\n          return this.media.webkitPresentationMode === pip.active;\n        } // Chrome\n\n\n        return this.media === document.pictureInPictureElement;\n      }\n    }], [{\n      key: \"supported\",\n      value: function supported(type, provider, inline) {\n        return support.check(type, provider, inline);\n      }\n      /**\n       * Load an SVG sprite into the page\n       * @param {string} url - URL for the SVG sprite\n       * @param {string} [id] - Unique ID\n       */\n\n    }, {\n      key: \"loadSprite\",\n      value: function loadSprite$$1(url, id) {\n        return loadSprite(url, id);\n      }\n      /**\n       * Setup multiple instances\n       * @param {*} selector\n       * @param {object} options\n       */\n\n    }, {\n      key: \"setup\",\n      value: function setup(selector) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var targets = null;\n\n        if (is.string(selector)) {\n          targets = Array.from(document.querySelectorAll(selector));\n        } else if (is.nodeList(selector)) {\n          targets = Array.from(selector);\n        } else if (is.array(selector)) {\n          targets = selector.filter(is.element);\n        }\n\n        if (is.empty(targets)) {\n          return null;\n        }\n\n        return targets.map(function (t) {\n          return new Plyr(t, options);\n        });\n      }\n    }]);\n\n    return Plyr;\n  }();\n\n  Plyr.defaults = cloneDeep(defaults);\n\n  return Plyr;\n\n})));\n\n//# sourceMappingURL=plyr.js.map\n","/**\r\n * alertifyjs 1.11.4 http://alertifyjs.com\r\n * AlertifyJS is a javascript framework for developing pretty browser dialogs and notifications.\r\n * Copyright 2019 Mohammad Younes <Mohammad@alertifyjs.com> (http://alertifyjs.com) \r\n * Licensed under GPL 3 <https://opensource.org/licenses/gpl-3.0>*/\r\n( function ( window ) {\r\n    'use strict';\r\n    \r\n    /**\r\n     * Keys enum\r\n     * @type {Object}\r\n     */\r\n    var keys = {\r\n        ENTER: 13,\r\n        ESC: 27,\r\n        F1: 112,\r\n        F12: 123,\r\n        LEFT: 37,\r\n        RIGHT: 39\r\n    };\r\n    /**\r\n     * Default options \r\n     * @type {Object}\r\n     */\r\n    var defaults = {\r\n        autoReset:true,\r\n        basic:false,\r\n        closable:true,\r\n        closableByDimmer:true,\r\n        frameless:false,\r\n        maintainFocus:true, //global default not per instance, applies to all dialogs\r\n        maximizable:true,\r\n        modal:true,\r\n        movable:true,\r\n        moveBounded:false,\r\n        overflow:true,\r\n        padding: true,\r\n        pinnable:true,\r\n        pinned:true,\r\n        preventBodyShift:false, //global default not per instance, applies to all dialogs\r\n        resizable:true,\r\n        startMaximized:false,\r\n        transition:'pulse',\r\n        notifier:{\r\n            delay:5,\r\n            position:'bottom-right',\r\n            closeButton:false\r\n        },\r\n        glossary:{\r\n            title:'AlertifyJS',\r\n            ok: 'OK',\r\n            cancel: 'Cancel',\r\n            acccpt: 'Accept',\r\n            deny: 'Deny',\r\n            confirm: 'Confirm',\r\n            decline: 'Decline',\r\n            close: 'Close',\r\n            maximize: 'Maximize',\r\n            restore: 'Restore',\r\n        },\r\n        theme:{\r\n            input:'ajs-input',\r\n            ok:'ajs-ok',\r\n            cancel:'ajs-cancel',\r\n        }\r\n    };\r\n    \r\n    //holds open dialogs instances\r\n    var openDialogs = [];\r\n\r\n    /**\r\n     * [Helper]  Adds the specified class(es) to the element.\r\n     *\r\n     * @element {node}      The element\r\n     * @className {string}  One or more space-separated classes to be added to the class attribute of the element.\r\n     * \r\n     * @return {undefined}\r\n     */\r\n    function addClass(element,classNames){\r\n        element.className += ' ' + classNames;\r\n    }\r\n    \r\n    /**\r\n     * [Helper]  Removes the specified class(es) from the element.\r\n     *\r\n     * @element {node}      The element\r\n     * @className {string}  One or more space-separated classes to be removed from the class attribute of the element.\r\n     * \r\n     * @return {undefined}\r\n     */\r\n    function removeClass(element, classNames) {\r\n        var original = element.className.split(' ');\r\n        var toBeRemoved = classNames.split(' ');\r\n        for (var x = 0; x < toBeRemoved.length; x += 1) {\r\n            var index = original.indexOf(toBeRemoved[x]);\r\n            if (index > -1){\r\n                original.splice(index,1);\r\n            }\r\n        }\r\n        element.className = original.join(' ');\r\n    }\r\n\r\n    /**\r\n     * [Helper]  Checks if the document is RTL\r\n     *\r\n     * @return {Boolean} True if the document is RTL, false otherwise.\r\n     */\r\n    function isRightToLeft(){\r\n        return window.getComputedStyle(document.body).direction === 'rtl';\r\n    }\r\n    /**\r\n     * [Helper]  Get the document current scrollTop\r\n     *\r\n     * @return {Number} current document scrollTop value\r\n     */\r\n    function getScrollTop(){\r\n        return ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\r\n    }\r\n\r\n    /**\r\n     * [Helper]  Get the document current scrollLeft\r\n     *\r\n     * @return {Number} current document scrollLeft value\r\n     */\r\n    function getScrollLeft(){\r\n        return ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);\r\n    }\r\n\r\n    /**\r\n    * Helper: clear contents\r\n    *\r\n    */\r\n    function clearContents(element){\r\n        while (element.lastChild) {\r\n            element.removeChild(element.lastChild);\r\n        }\r\n    }\r\n    /**\r\n     * Extends a given prototype by merging properties from base into sub.\r\n     *\r\n     * @sub {Object} sub The prototype being overwritten.\r\n     * @base {Object} base The prototype being written.\r\n     *\r\n     * @return {Object} The extended prototype.\r\n     */\r\n    function copy(src) {\r\n        if(null === src){\r\n            return src;\r\n        }\r\n        var cpy;\r\n        if(Array.isArray(src)){\r\n            cpy = [];\r\n            for(var x=0;x<src.length;x+=1){\r\n                cpy.push(copy(src[x]));\r\n            }\r\n            return cpy;\r\n        }\r\n      \r\n        if(src instanceof Date){\r\n            return new Date(src.getTime());\r\n        }\r\n      \r\n        if(src instanceof RegExp){\r\n            cpy = new RegExp(src.source);\r\n            cpy.global = src.global;\r\n            cpy.ignoreCase = src.ignoreCase;\r\n            cpy.multiline = src.multiline;\r\n            cpy.lastIndex = src.lastIndex;\r\n            return cpy;\r\n        }\r\n        \r\n        if(typeof src === 'object'){\r\n            cpy = {};\r\n            // copy dialog pototype over definition.\r\n            for (var prop in src) {\r\n                if (src.hasOwnProperty(prop)) {\r\n                    cpy[prop] = copy(src[prop]);\r\n                }\r\n            }\r\n            return cpy;\r\n        }\r\n        return src;\r\n    }\r\n    /**\r\n      * Helper: destruct the dialog\r\n      *\r\n      */\r\n    function destruct(instance, initialize){\r\n        if(instance.elements){\r\n            //delete the dom and it's references.\r\n            var root = instance.elements.root;\r\n            root.parentNode.removeChild(root);\r\n            delete instance.elements;\r\n            //copy back initial settings.\r\n            instance.settings = copy(instance.__settings);\r\n            //re-reference init function.\r\n            instance.__init = initialize;\r\n            //delete __internal variable to allow re-initialization.\r\n            delete instance.__internal;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Use a closure to return proper event listener method. Try to use\r\n     * `addEventListener` by default but fallback to `attachEvent` for\r\n     * unsupported browser. The closure simply ensures that the test doesn't\r\n     * happen every time the method is called.\r\n     *\r\n     * @param    {Node}     el    Node element\r\n     * @param    {String}   event Event type\r\n     * @param    {Function} fn    Callback of event\r\n     * @return   {Function}\r\n     */\r\n    var on = (function () {\r\n        if (document.addEventListener) {\r\n            return function (el, event, fn, useCapture) {\r\n                el.addEventListener(event, fn, useCapture === true);\r\n            };\r\n        } else if (document.attachEvent) {\r\n            return function (el, event, fn) {\r\n                el.attachEvent('on' + event, fn);\r\n            };\r\n        }\r\n    }());\r\n\r\n    /**\r\n     * Use a closure to return proper event listener method. Try to use\r\n     * `removeEventListener` by default but fallback to `detachEvent` for\r\n     * unsupported browser. The closure simply ensures that the test doesn't\r\n     * happen every time the method is called.\r\n     *\r\n     * @param    {Node}     el    Node element\r\n     * @param    {String}   event Event type\r\n     * @param    {Function} fn    Callback of event\r\n     * @return   {Function}\r\n     */\r\n    var off = (function () {\r\n        if (document.removeEventListener) {\r\n            return function (el, event, fn, useCapture) {\r\n                el.removeEventListener(event, fn, useCapture === true);\r\n            };\r\n        } else if (document.detachEvent) {\r\n            return function (el, event, fn) {\r\n                el.detachEvent('on' + event, fn);\r\n            };\r\n        }\r\n    }());\r\n\r\n    /**\r\n     * Prevent default event from firing\r\n     *\r\n     * @param  {Event} event Event object\r\n     * @return {undefined}\r\n\r\n    function prevent ( event ) {\r\n        if ( event ) {\r\n            if ( event.preventDefault ) {\r\n                event.preventDefault();\r\n            } else {\r\n                event.returnValue = false;\r\n            }\r\n        }\r\n    }\r\n    */\r\n    var transition = (function () {\r\n        var t, type;\r\n        var supported = false;\r\n        var transitions = {\r\n            'animation'        : 'animationend',\r\n            'OAnimation'       : 'oAnimationEnd oanimationend',\r\n            'msAnimation'      : 'MSAnimationEnd',\r\n            'MozAnimation'     : 'animationend',\r\n            'WebkitAnimation'  : 'webkitAnimationEnd'\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (document.documentElement.style[t] !== undefined) {\r\n                type = transitions[t];\r\n                supported = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return {\r\n            type: type,\r\n            supported: supported\r\n        };\r\n    }());\r\n\r\n    /**\r\n    * Creates event handler delegate that sends the instance as last argument.\r\n    * \r\n    * @return {Function}    a function wrapper which sends the instance as last argument.\r\n    */\r\n    function delegate(context, method) {\r\n        return function () {\r\n            if (arguments.length > 0) {\r\n                var args = [];\r\n                for (var x = 0; x < arguments.length; x += 1) {\r\n                    args.push(arguments[x]);\r\n                }\r\n                args.push(context);\r\n                return method.apply(context, args);\r\n            }\r\n            return method.apply(context, [null, context]);\r\n        };\r\n    }\r\n    /**\r\n    * Helper for creating a dialog close event.\r\n    * \r\n    * @return {object}\r\n    */\r\n    function createCloseEvent(index, button) {\r\n        return {\r\n            index: index,\r\n            button: button,\r\n            cancel: false\r\n        };\r\n    }\r\n    /**\r\n    * Helper for dispatching events.\r\n    *\r\n    * @param  {string} evenType The type of the event to disptach.\r\n    * @param  {object} instance The dialog instance disptaching the event.\r\n    *\r\n    * @return   {any}   The result of the invoked function.\r\n    */\r\n    function dispatchEvent(eventType, instance) {\r\n        if ( typeof instance.get(eventType) === 'function' ) {\r\n            return instance.get(eventType).call(instance);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Super class for all dialogs\r\n     *\r\n     * @return {Object}\t\tbase dialog prototype\r\n     */\r\n    var dialog = (function () {\r\n        var //holds the list of used keys.\r\n            usedKeys = [],\r\n            //dummy variable, used to trigger dom reflow.\r\n            reflow = null,\r\n            //holds body tab index in case it has any.\r\n            tabindex = false,\r\n            //condition for detecting safari\r\n            isSafari = window.navigator.userAgent.indexOf('Safari') > -1 && window.navigator.userAgent.indexOf('Chrome') < 0,\r\n            //dialog building blocks\r\n            templates = {\r\n                dimmer:'<div class=\"ajs-dimmer\"></div>',\r\n                /*tab index required to fire click event before body focus*/\r\n                modal: '<div class=\"ajs-modal\" tabindex=\"0\"></div>',\r\n                dialog: '<div class=\"ajs-dialog\" tabindex=\"0\"></div>',\r\n                reset: '<button class=\"ajs-reset\"></button>',\r\n                commands: '<div class=\"ajs-commands\"><button class=\"ajs-pin\"></button><button class=\"ajs-maximize\"></button><button class=\"ajs-close\"></button></div>',\r\n                header: '<div class=\"ajs-header\"></div>',\r\n                body: '<div class=\"ajs-body\"></div>',\r\n                content: '<div class=\"ajs-content\"></div>',\r\n                footer: '<div class=\"ajs-footer\"></div>',\r\n                buttons: { primary: '<div class=\"ajs-primary ajs-buttons\"></div>', auxiliary: '<div class=\"ajs-auxiliary ajs-buttons\"></div>' },\r\n                button: '<button class=\"ajs-button\"></button>',\r\n                resizeHandle: '<div class=\"ajs-handle\"></div>',\r\n            },\r\n            //common class names\r\n            classes = {\r\n                animationIn: 'ajs-in',\r\n                animationOut: 'ajs-out',\r\n                base: 'alertify',\r\n                basic:'ajs-basic',\r\n                capture: 'ajs-capture',\r\n                closable:'ajs-closable',\r\n                fixed: 'ajs-fixed',\r\n                frameless:'ajs-frameless',\r\n                hidden: 'ajs-hidden',\r\n                maximize: 'ajs-maximize',\r\n                maximized: 'ajs-maximized',\r\n                maximizable:'ajs-maximizable',\r\n                modeless: 'ajs-modeless',\r\n                movable: 'ajs-movable',\r\n                noSelection: 'ajs-no-selection',\r\n                noOverflow: 'ajs-no-overflow',\r\n                noPadding:'ajs-no-padding',\r\n                pin:'ajs-pin',\r\n                pinnable:'ajs-pinnable',\r\n                prefix: 'ajs-',\r\n                resizable: 'ajs-resizable',\r\n                restore: 'ajs-restore',\r\n                shake:'ajs-shake',\r\n                unpinned:'ajs-unpinned',\r\n            };\r\n\r\n        /**\r\n         * Helper: initializes the dialog instance\r\n         * \r\n         * @return\t{Number}\tThe total count of currently open modals.\r\n         */\r\n        function initialize(instance){\r\n            \r\n            if(!instance.__internal){\r\n\r\n                //no need to expose init after this.\r\n                delete instance.__init;\r\n              \r\n                //keep a copy of initial dialog settings\r\n                if(!instance.__settings){\r\n                    instance.__settings = copy(instance.settings);\r\n                }\r\n                \r\n                //get dialog buttons/focus setup\r\n                var setup;\r\n                if(typeof instance.setup === 'function'){\r\n                    setup = instance.setup();\r\n                    setup.options = setup.options  || {};\r\n                    setup.focus = setup.focus  || {};\r\n                }else{\r\n                    setup = {\r\n                        buttons:[],\r\n                        focus:{\r\n                            element:null,\r\n                            select:false\r\n                        },\r\n                        options:{\r\n                        }\r\n                    };\r\n                }\r\n                \r\n                //initialize hooks object.\r\n                if(typeof instance.hooks !== 'object'){\r\n                    instance.hooks = {};\r\n                }\r\n\r\n                //copy buttons defintion\r\n                var buttonsDefinition = [];\r\n                if(Array.isArray(setup.buttons)){\r\n                    for(var b=0;b<setup.buttons.length;b+=1){\r\n                        var ref  = setup.buttons[b],\r\n                            cpy = {};\r\n                        for (var i in ref) {\r\n                            if (ref.hasOwnProperty(i)) {\r\n                                cpy[i] = ref[i];\r\n                            }\r\n                        }\r\n                        buttonsDefinition.push(cpy);\r\n                    }\r\n                }\r\n\r\n                var internal = instance.__internal = {\r\n                    /**\r\n                     * Flag holding the open state of the dialog\r\n                     * \r\n                     * @type {Boolean}\r\n                     */\r\n                    isOpen:false,\r\n                    /**\r\n                     * Active element is the element that will receive focus after\r\n                     * closing the dialog. It defaults as the body tag, but gets updated\r\n                     * to the last focused element before the dialog was opened.\r\n                     *\r\n                     * @type {Node}\r\n                     */\r\n                    activeElement:document.body,\r\n                    timerIn:undefined,\r\n                    timerOut:undefined,\r\n                    buttons: buttonsDefinition,\r\n                    focus: setup.focus,\r\n                    options: {\r\n                        title: undefined,\r\n                        modal: undefined,\r\n                        basic:undefined,\r\n                        frameless:undefined,\r\n                        pinned: undefined,\r\n                        movable: undefined,\r\n                        moveBounded:undefined,\r\n                        resizable: undefined,\r\n                        autoReset: undefined,\r\n                        closable: undefined,\r\n                        closableByDimmer: undefined,\r\n                        maximizable: undefined,\r\n                        startMaximized: undefined,\r\n                        pinnable: undefined,\r\n                        transition: undefined,\r\n                        padding:undefined,\r\n                        overflow:undefined,\r\n                        onshow:undefined,\r\n                        onclosing:undefined,\r\n                        onclose:undefined,\r\n                        onfocus:undefined,\r\n                        onmove:undefined,\r\n                        onmoved:undefined,\r\n                        onresize:undefined,\r\n                        onresized:undefined,\r\n                        onmaximize:undefined,\r\n                        onmaximized:undefined,\r\n                        onrestore:undefined,\r\n                        onrestored:undefined\r\n                    },\r\n                    resetHandler:undefined,\r\n                    beginMoveHandler:undefined,\r\n                    beginResizeHandler:undefined,\r\n                    bringToFrontHandler:undefined,\r\n                    modalClickHandler:undefined,\r\n                    buttonsClickHandler:undefined,\r\n                    commandsClickHandler:undefined,\r\n                    transitionInHandler:undefined,\r\n                    transitionOutHandler:undefined,\r\n                    destroy:undefined\r\n                };\r\n\r\n                var elements = {};\r\n                //root node\r\n                elements.root = document.createElement('div');\r\n                //prevent FOUC in case of async styles loading.\r\n                elements.root.style.display = 'none';\r\n                elements.root.className = classes.base + ' ' + classes.hidden + ' ';\r\n\r\n                elements.root.innerHTML = templates.dimmer + templates.modal;\r\n                \r\n                //dimmer\r\n                elements.dimmer = elements.root.firstChild;\r\n\r\n                //dialog\r\n                elements.modal = elements.root.lastChild;\r\n                elements.modal.innerHTML = templates.dialog;\r\n                elements.dialog = elements.modal.firstChild;\r\n                elements.dialog.innerHTML = templates.reset + templates.commands + templates.header + templates.body + templates.footer + templates.resizeHandle + templates.reset;\r\n\r\n                //reset links\r\n                elements.reset = [];\r\n                elements.reset.push(elements.dialog.firstChild);\r\n                elements.reset.push(elements.dialog.lastChild);\r\n                \r\n                //commands\r\n                elements.commands = {};\r\n                elements.commands.container = elements.reset[0].nextSibling;\r\n                elements.commands.pin = elements.commands.container.firstChild;\r\n                elements.commands.maximize = elements.commands.pin.nextSibling;\r\n                elements.commands.close = elements.commands.maximize.nextSibling;\r\n                \r\n                //header\r\n                elements.header = elements.commands.container.nextSibling;\r\n\r\n                //body\r\n                elements.body = elements.header.nextSibling;\r\n                elements.body.innerHTML = templates.content;\r\n                elements.content = elements.body.firstChild;\r\n\r\n                //footer\r\n                elements.footer = elements.body.nextSibling;\r\n                elements.footer.innerHTML = templates.buttons.auxiliary + templates.buttons.primary;\r\n                \r\n                //resize handle\r\n                elements.resizeHandle = elements.footer.nextSibling;\r\n\r\n                //buttons\r\n                elements.buttons = {};\r\n                elements.buttons.auxiliary = elements.footer.firstChild;\r\n                elements.buttons.primary = elements.buttons.auxiliary.nextSibling;\r\n                elements.buttons.primary.innerHTML = templates.button;\r\n                elements.buttonTemplate = elements.buttons.primary.firstChild;\r\n                //remove button template\r\n                elements.buttons.primary.removeChild(elements.buttonTemplate);\r\n                               \r\n                for(var x=0; x < instance.__internal.buttons.length; x+=1) {\r\n                    var button = instance.__internal.buttons[x];\r\n                    \r\n                    // add to the list of used keys.\r\n                    if(usedKeys.indexOf(button.key) < 0){\r\n                        usedKeys.push(button.key);\r\n                    }\r\n\r\n                    button.element = elements.buttonTemplate.cloneNode();\r\n                    button.element.innerHTML = button.text;\r\n                    if(typeof button.className === 'string' &&  button.className !== ''){\r\n                        addClass(button.element, button.className);\r\n                    }\r\n                    for(var key in button.attrs){\r\n                        if(key !== 'className' && button.attrs.hasOwnProperty(key)){\r\n                            button.element.setAttribute(key, button.attrs[key]);\r\n                        }\r\n                    }\r\n                    if(button.scope === 'auxiliary'){\r\n                        elements.buttons.auxiliary.appendChild(button.element);\r\n                    }else{\r\n                        elements.buttons.primary.appendChild(button.element);\r\n                    }\r\n                }\r\n                //make elements pubic\r\n                instance.elements = elements;\r\n                \r\n                //save event handlers delegates\r\n                internal.resetHandler = delegate(instance, onReset);\r\n                internal.beginMoveHandler = delegate(instance, beginMove);\r\n                internal.beginResizeHandler = delegate(instance, beginResize);\r\n                internal.bringToFrontHandler = delegate(instance, bringToFront);\r\n                internal.modalClickHandler = delegate(instance, modalClickHandler);\r\n                internal.buttonsClickHandler = delegate(instance, buttonsClickHandler);\r\n                internal.commandsClickHandler = delegate(instance, commandsClickHandler);\r\n                internal.transitionInHandler = delegate(instance, handleTransitionInEvent);\r\n                internal.transitionOutHandler = delegate(instance, handleTransitionOutEvent);\r\n\r\n                //settings\r\n                for(var opKey in internal.options){\r\n                    if(setup.options[opKey] !== undefined){\r\n                        // if found in user options\r\n                        instance.set(opKey, setup.options[opKey]);\r\n                    }else if(alertify.defaults.hasOwnProperty(opKey)) {\r\n                        // else if found in defaults options\r\n                        instance.set(opKey, alertify.defaults[opKey]);\r\n                    }else if(opKey === 'title' ) {\r\n                        // else if title key, use alertify.defaults.glossary\r\n                        instance.set(opKey, alertify.defaults.glossary[opKey]);\r\n                    }\r\n                }\r\n\r\n                // allow dom customization\r\n                if(typeof instance.build === 'function'){\r\n                    instance.build();\r\n                }\r\n            }\r\n            \r\n            //add to the end of the DOM tree.\r\n            document.body.appendChild(instance.elements.root);\r\n        }\r\n\r\n        /**\r\n         * Helper: maintains scroll position\r\n         *\r\n         */\r\n        var scrollX, scrollY;\r\n        function saveScrollPosition(){\r\n            scrollX = getScrollLeft();\r\n            scrollY = getScrollTop();\r\n        }\r\n        function restoreScrollPosition(){\r\n            window.scrollTo(scrollX, scrollY);\r\n        }\r\n\r\n        /**\r\n         * Helper: adds/removes no-overflow class from body\r\n         *\r\n         */\r\n        function ensureNoOverflow(){\r\n            var requiresNoOverflow = 0;\r\n            for(var x=0;x<openDialogs.length;x+=1){\r\n                var instance = openDialogs[x];\r\n                if(instance.isModal() || instance.isMaximized()){\r\n                    requiresNoOverflow+=1;\r\n                }\r\n            }\r\n            if(requiresNoOverflow === 0 && document.body.className.indexOf(classes.noOverflow) >= 0){\r\n                //last open modal or last maximized one\r\n                removeClass(document.body, classes.noOverflow);\r\n                preventBodyShift(false);\r\n            }else if(requiresNoOverflow > 0 && document.body.className.indexOf(classes.noOverflow) < 0){\r\n                //first open modal or first maximized one\r\n                preventBodyShift(true);\r\n                addClass(document.body, classes.noOverflow);\r\n            }\r\n        }\r\n        var top = '', topScroll = 0;\r\n        /**\r\n         * Helper: prevents body shift.\r\n         *\r\n         */\r\n        function preventBodyShift(add){\r\n            if(alertify.defaults.preventBodyShift){\r\n                if(add && document.documentElement.scrollHeight > document.documentElement.clientHeight ){//&& openDialogs[openDialogs.length-1].elements.dialog.clientHeight <= document.documentElement.clientHeight){\r\n                    topScroll = scrollY;\r\n                    top = window.getComputedStyle(document.body).top;\r\n                    addClass(document.body, classes.fixed);\r\n                    document.body.style.top = -scrollY + 'px';\r\n                } else if(!add) {\r\n                    scrollY = topScroll;\r\n                    document.body.style.top = top;\r\n                    removeClass(document.body, classes.fixed);\r\n                    restoreScrollPosition();\r\n                }\r\n            }\r\n        }\r\n\t\t\r\n        /**\r\n         * Sets the name of the transition used to show/hide the dialog\r\n         * \r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         */\r\n        function updateTransition(instance, value, oldValue){\r\n            if(typeof oldValue === 'string'){\r\n                removeClass(instance.elements.root,classes.prefix +  oldValue);\r\n            }\r\n            addClass(instance.elements.root, classes.prefix + value);\r\n            reflow = instance.elements.root.offsetWidth;\r\n        }\r\n\t\t\r\n        /**\r\n         * Toggles the dialog display mode\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateDisplayMode(instance){\r\n            if(instance.get('modal')){\r\n\r\n                //make modal\r\n                removeClass(instance.elements.root, classes.modeless);\r\n\r\n                //only if open\r\n                if(instance.isOpen()){\r\n                    unbindModelessEvents(instance);\r\n\r\n                    //in case a pinned modless dialog was made modal while open.\r\n                    updateAbsPositionFix(instance);\r\n\r\n                    ensureNoOverflow();\r\n                }\r\n            }else{\r\n                //make modelss\r\n                addClass(instance.elements.root, classes.modeless);\r\n\r\n                //only if open\r\n                if(instance.isOpen()){\r\n                    bindModelessEvents(instance);\r\n\r\n                    //in case pin/unpin was called while a modal is open\r\n                    updateAbsPositionFix(instance);\r\n\r\n                    ensureNoOverflow();\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Toggles the dialog basic view mode \r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateBasicMode(instance){\r\n            if (instance.get('basic')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.basic);\r\n            } else {\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.basic);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Toggles the dialog frameless view mode \r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateFramelessMode(instance){\r\n            if (instance.get('frameless')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.frameless);\r\n            } else {\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.frameless);\r\n            }\r\n        }\r\n\t\t\r\n        /**\r\n         * Helper: Brings the modeless dialog to front, attached to modeless dialogs.\r\n         *\r\n         * @param {Event} event Focus event\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function bringToFront(event, instance){\r\n            \r\n            // Do not bring to front if preceeded by an open modal\r\n            var index = openDialogs.indexOf(instance);\r\n            for(var x=index+1;x<openDialogs.length;x+=1){\r\n                if(openDialogs[x].isModal()){\r\n                    return;\r\n                }\r\n            }\r\n\t\t\t\r\n            // Bring to front by making it the last child.\r\n            if(document.body.lastChild !== instance.elements.root){\r\n                document.body.appendChild(instance.elements.root);\r\n                //also make sure its at the end of the list\r\n                openDialogs.splice(openDialogs.indexOf(instance),1);\r\n                openDialogs.push(instance);\r\n                setFocus(instance);\r\n            }\r\n\t\t\t\r\n            return false;\r\n        }\r\n\t\t\r\n        /**\r\n         * Helper: reflects dialogs options updates\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {String} option The updated option name.\r\n         *\r\n         * @return\t{undefined}\t\r\n         */\r\n        function optionUpdated(instance, option, oldValue, newValue){\r\n            switch(option){\r\n            case 'title':\r\n                instance.setHeader(newValue);\r\n                break;\r\n            case 'modal':\r\n                updateDisplayMode(instance);\r\n                break;\r\n            case 'basic':\r\n                updateBasicMode(instance);\r\n                break;\r\n            case 'frameless':\r\n                updateFramelessMode(instance);\r\n                break;\r\n            case 'pinned':\r\n                updatePinned(instance);\r\n                break;\r\n            case 'closable':\r\n                updateClosable(instance);\r\n                break;\r\n            case 'maximizable':\r\n                updateMaximizable(instance);\r\n                break;\r\n            case 'pinnable':\r\n                updatePinnable(instance);\r\n                break;\r\n            case 'movable':\r\n                updateMovable(instance);\r\n                break;\r\n            case 'resizable':\r\n                updateResizable(instance);\r\n                break;\r\n            case 'padding':\r\n                if(newValue){\r\n                    removeClass(instance.elements.root, classes.noPadding);\r\n                }else if(instance.elements.root.className.indexOf(classes.noPadding) < 0){\r\n                    addClass(instance.elements.root, classes.noPadding);\r\n                }\r\n                break;\r\n            case 'overflow':\r\n                if(newValue){\r\n                    removeClass(instance.elements.root, classes.noOverflow);\r\n                }else if(instance.elements.root.className.indexOf(classes.noOverflow) < 0){\r\n                    addClass(instance.elements.root, classes.noOverflow);\r\n                }\r\n                break;\r\n            case 'transition':\r\n                updateTransition(instance,newValue, oldValue);\r\n                break;\r\n            }\r\n\r\n            // internal on option updated event\r\n            if(typeof instance.hooks.onupdate === 'function'){\r\n                instance.hooks.onupdate.call(instance, option, oldValue, newValue);\r\n            }\r\n        }\r\n\t\t\r\n        /**\r\n         * Helper: reflects dialogs options updates\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Object} obj The object to set/get a value on/from.\r\n         * @param {Function} callback The callback function to call if the key was found.\r\n         * @param {String|Object} key A string specifying a propery name or a collection of key value pairs.\r\n         * @param {Object} value Optional, the value associated with the key (in case it was a string).\r\n         * @param {String} option The updated option name.\r\n         *\r\n         * @return\t{Object} result object \r\n         *\tThe result objects has an 'op' property, indicating of this is a SET or GET operation.\r\n         *\t\tGET: \r\n         *\t\t- found: a flag indicating if the key was found or not.\r\n         *\t\t- value: the property value.\r\n         *\t\tSET:\r\n         *\t\t- items: a list of key value pairs of the properties being set.\r\n         *\t\t\t\teach contains:\r\n         *\t\t\t\t\t- found: a flag indicating if the key was found or not.\r\n         *\t\t\t\t\t- key: the property key.\r\n         *\t\t\t\t\t- value: the property value.\r\n         */\r\n        function update(instance, obj, callback, key, value){\r\n            var result = {op:undefined, items: [] };\r\n            if(typeof value === 'undefined' && typeof key === 'string') {\r\n                //get\r\n                result.op = 'get';\r\n                if(obj.hasOwnProperty(key)){\r\n                    result.found = true;\r\n                    result.value = obj[key];\r\n                }else{\r\n                    result.found = false;\r\n                    result.value = undefined;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                var old;\r\n                //set\r\n                result.op = 'set';\r\n                if(typeof key === 'object'){\r\n                    //set multiple\r\n                    var args = key;\r\n                    for (var prop in args) {\r\n                        if (obj.hasOwnProperty(prop)) {\r\n                            if(obj[prop] !== args[prop]){\r\n                                old = obj[prop];\r\n                                obj[prop] = args[prop];\r\n                                callback.call(instance,prop, old, args[prop]);\r\n                            }\r\n                            result.items.push({ 'key': prop, 'value': args[prop], 'found':true});\r\n                        }else{\r\n                            result.items.push({ 'key': prop, 'value': args[prop], 'found':false});\r\n                        }\r\n                    }\r\n                } else if (typeof key === 'string'){\r\n                    //set single\r\n                    if (obj.hasOwnProperty(key)) {\r\n                        if(obj[key] !== value){\r\n                            old  = obj[key];\r\n                            obj[key] = value;\r\n                            callback.call(instance,key, old, value);\r\n                        }\r\n                        result.items.push({'key': key, 'value': value , 'found':true});\r\n\r\n                    }else{\r\n                        result.items.push({'key': key, 'value': value , 'found':false});\r\n                    }\r\n                } else {\r\n                    //invalid params\r\n                    throw new Error('args must be a string or object');\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n\r\n        /**\r\n         * Triggers a close event.\r\n         *\r\n         * @param {Object} instance\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function triggerClose(instance) {\r\n            var found;\r\n            triggerCallback(instance, function (button) {\r\n                return found = (button.invokeOnClose === true);\r\n            });\r\n            //none of the buttons registered as onclose callback\r\n            //close the dialog\r\n            if (!found && instance.isOpen()) {\r\n                instance.close();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Dialogs commands event handler, attached to the dialog commands element.\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * @param {Object} instance\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function commandsClickHandler(event, instance) {\r\n            var target = event.srcElement || event.target;\r\n            switch (target) {\r\n            case instance.elements.commands.pin:\r\n                if (!instance.isPinned()) {\r\n                    pin(instance);\r\n                } else {\r\n                    unpin(instance);\r\n                }\r\n                break;\r\n            case instance.elements.commands.maximize:\r\n                if (!instance.isMaximized()) {\r\n                    maximize(instance);\r\n                } else {\r\n                    restore(instance);\r\n                }\r\n                break;\r\n            case instance.elements.commands.close:\r\n                triggerClose(instance);\r\n                break;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Helper: pins the modeless dialog.\r\n         *\r\n         * @param {Object} instance\tThe dialog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function pin(instance) {\r\n            //pin the dialog\r\n            instance.set('pinned', true);\r\n        }\r\n\r\n        /**\r\n         * Helper: unpins the modeless dialog.\r\n         *\r\n         * @param {Object} instance\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function unpin(instance) {\r\n            //unpin the dialog \r\n            instance.set('pinned', false);\r\n        }\r\n\r\n\r\n        /**\r\n         * Helper: enlarges the dialog to fill the entire screen.\r\n         *\r\n         * @param {Object} instance\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function maximize(instance) {\r\n            // allow custom `onmaximize` method\r\n            dispatchEvent('onmaximize', instance);\r\n            //maximize the dialog \r\n            addClass(instance.elements.root, classes.maximized);\r\n            if (instance.isOpen()) {\r\n                ensureNoOverflow();\r\n            }\r\n            // allow custom `onmaximized` method\r\n            dispatchEvent('onmaximized', instance);\r\n        }\r\n\r\n        /**\r\n         * Helper: returns the dialog to its former size.\r\n         *\r\n         * @param {Object} instance\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function restore(instance) {\r\n            // allow custom `onrestore` method\r\n            dispatchEvent('onrestore', instance);\r\n            //maximize the dialog \r\n            removeClass(instance.elements.root, classes.maximized);\r\n            if (instance.isOpen()) {\r\n                ensureNoOverflow();\r\n            }\r\n            // allow custom `onrestored` method\r\n            dispatchEvent('onrestored', instance);\r\n        }\r\n\r\n        /**\r\n         * Show or hide the maximize box.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Boolean} on True to add the behavior, removes it otherwise.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updatePinnable(instance) {\r\n            if (instance.get('pinnable')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.pinnable);\r\n            } else {\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.pinnable);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Helper: Fixes the absolutly positioned modal div position.\r\n         *\r\n         * @param {Object} instance The dialog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function addAbsPositionFix(instance) {\r\n            var scrollLeft = getScrollLeft();\r\n            instance.elements.modal.style.marginTop = getScrollTop() + 'px';\r\n            instance.elements.modal.style.marginLeft = scrollLeft + 'px';\r\n            instance.elements.modal.style.marginRight = (-scrollLeft) + 'px';\r\n        }\r\n\r\n        /**\r\n         * Helper: Removes the absolutly positioned modal div position fix.\r\n         *\r\n         * @param {Object} instance The dialog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function removeAbsPositionFix(instance) {\r\n            var marginTop = parseInt(instance.elements.modal.style.marginTop, 10);\r\n            var marginLeft = parseInt(instance.elements.modal.style.marginLeft, 10);\r\n            instance.elements.modal.style.marginTop = '';\r\n            instance.elements.modal.style.marginLeft = '';\r\n            instance.elements.modal.style.marginRight = '';\r\n\r\n            if (instance.isOpen()) {\r\n                var top = 0,\r\n                    left = 0\r\n                ;\r\n                if (instance.elements.dialog.style.top !== '') {\r\n                    top = parseInt(instance.elements.dialog.style.top, 10);\r\n                }\r\n                instance.elements.dialog.style.top = (top + (marginTop - getScrollTop())) + 'px';\r\n\r\n                if (instance.elements.dialog.style.left !== '') {\r\n                    left = parseInt(instance.elements.dialog.style.left, 10);\r\n                }\r\n                instance.elements.dialog.style.left = (left + (marginLeft - getScrollLeft())) + 'px';\r\n            }\r\n        }\r\n        /**\r\n         * Helper: Adds/Removes the absolutly positioned modal div position fix based on its pinned setting.\r\n         *\r\n         * @param {Object} instance The dialog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateAbsPositionFix(instance) {\r\n            // if modeless and unpinned add fix\r\n            if (!instance.get('modal') && !instance.get('pinned')) {\r\n                addAbsPositionFix(instance);\r\n            } else {\r\n                removeAbsPositionFix(instance);\r\n            }\r\n        }\r\n        /**\r\n         * Toggles the dialog position lock | modeless only.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Boolean} on True to make it modal, false otherwise.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updatePinned(instance) {\r\n            if (instance.get('pinned')) {\r\n                removeClass(instance.elements.root, classes.unpinned);\r\n                if (instance.isOpen()) {\r\n                    removeAbsPositionFix(instance);\r\n                }\r\n            } else {\r\n                addClass(instance.elements.root, classes.unpinned);\r\n                if (instance.isOpen() && !instance.isModal()) {\r\n                    addAbsPositionFix(instance);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Show or hide the maximize box.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Boolean} on True to add the behavior, removes it otherwise.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateMaximizable(instance) {\r\n            if (instance.get('maximizable')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.maximizable);\r\n            } else {\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.maximizable);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Show or hide the close box.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Boolean} on True to add the behavior, removes it otherwise.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateClosable(instance) {\r\n            if (instance.get('closable')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.closable);\r\n                bindClosableEvents(instance);\r\n            } else {\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.closable);\r\n                unbindClosableEvents(instance);\r\n            }\r\n        }\r\n\r\n        \r\n        var cancelClick = false,// flag to cancel click event if already handled by end resize event (the mousedown, mousemove, mouseup sequence fires a click event.).\r\n            modalClickHandlerTS=0 // stores last click timestamp to prevent executing the handler twice on double click.\r\n            ;\r\n\r\n        /**\r\n         * Helper: closes the modal dialog when clicking the modal\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function modalClickHandler(event, instance) {\r\n            if(event.timeStamp - modalClickHandlerTS > 200 && (modalClickHandlerTS = event.timeStamp) && !cancelClick){\r\n                var target = event.srcElement || event.target;\r\n                if (instance.get('closableByDimmer') === true && target === instance.elements.modal) {\r\n                    triggerClose(instance);\r\n                }\r\n                cancelClick = false;\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // stores last call timestamp to prevent triggering the callback twice.\r\n        var callbackTS = 0;\r\n        // flag to cancel keyup event if already handled by click event (pressing Enter on a focusted button).\r\n        var cancelKeyup = false;\r\n        /** \r\n         * Helper: triggers a button callback\r\n         *\r\n         * @param {Object}\t\tThe dilog instance.\r\n         * @param {Function}\tCallback to check which button triggered the event.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function triggerCallback(instance, check) {\r\n            if(Date.now() - callbackTS > 200 && (callbackTS = Date.now())){\r\n                for (var idx = 0; idx < instance.__internal.buttons.length; idx += 1) {\r\n                    var button = instance.__internal.buttons[idx];\r\n                    if (!button.element.disabled && check(button)) {\r\n                        var closeEvent = createCloseEvent(idx, button);\r\n                        if (typeof instance.callback === 'function') {\r\n                            instance.callback.apply(instance, [closeEvent]);\r\n                        }\r\n                        //close the dialog only if not canceled.\r\n                        if (closeEvent.cancel === false) {\r\n                            instance.close();\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Clicks event handler, attached to the dialog footer.\r\n         *\r\n         * @param {Event}\t\tDOM event object.\r\n         * @param {Object}\t\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function buttonsClickHandler(event, instance) {\r\n            var target = event.srcElement || event.target;\r\n            triggerCallback(instance, function (button) {\r\n                // if this button caused the click, cancel keyup event\r\n                return button.element === target && (cancelKeyup = true);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Keyup event handler, attached to the document.body\r\n         *\r\n         * @param {Event}\t\tDOM event object.\r\n         * @param {Object}\t\tThe dilog instance.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function keyupHandler(event) {\r\n            //hitting enter while button has focus will trigger keyup too.\r\n            //ignore if handled by clickHandler\r\n            if (cancelKeyup) {\r\n                cancelKeyup = false;\r\n                return;\r\n            }\r\n            var instance = openDialogs[openDialogs.length - 1];\r\n            var keyCode = event.keyCode;\r\n            if (instance.__internal.buttons.length === 0 && keyCode === keys.ESC && instance.get('closable') === true) {\r\n                triggerClose(instance);\r\n                return false;\r\n            }else if (usedKeys.indexOf(keyCode) > -1) {\r\n                triggerCallback(instance, function (button) {\r\n                    return button.key === keyCode;\r\n                });\r\n                return false;\r\n            }\r\n        }\r\n        /**\r\n        * Keydown event handler, attached to the document.body\r\n        *\r\n        * @param {Event}\t\tDOM event object.\r\n        * @param {Object}\t\tThe dilog instance.\r\n        * \r\n        * @return {undefined}\r\n        */\r\n        function keydownHandler(event) {\r\n            var instance = openDialogs[openDialogs.length - 1];\r\n            var keyCode = event.keyCode;\r\n            if (keyCode === keys.LEFT || keyCode === keys.RIGHT) {\r\n                var buttons = instance.__internal.buttons;\r\n                for (var x = 0; x < buttons.length; x += 1) {\r\n                    if (document.activeElement === buttons[x].element) {\r\n                        switch (keyCode) {\r\n                        case keys.LEFT:\r\n                            buttons[(x || buttons.length) - 1].element.focus();\r\n                            return;\r\n                        case keys.RIGHT:\r\n                            buttons[(x + 1) % buttons.length].element.focus();\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }else if (keyCode < keys.F12 + 1 && keyCode > keys.F1 - 1 && usedKeys.indexOf(keyCode) > -1) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                triggerCallback(instance, function (button) {\r\n                    return button.key === keyCode;\r\n                });\r\n                return false;\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Sets focus to proper dialog element\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Node} [resetTarget=undefined] DOM element to reset focus to.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function setFocus(instance, resetTarget) {\r\n            // reset target has already been determined.\r\n            if (resetTarget) {\r\n                resetTarget.focus();\r\n            } else {\r\n                // current instance focus settings\r\n                var focus = instance.__internal.focus;\r\n                // the focus element.\r\n                var element = focus.element;\r\n\r\n                switch (typeof focus.element) {\r\n                // a number means a button index\r\n                case 'number':\r\n                    if (instance.__internal.buttons.length > focus.element) {\r\n                        //in basic view, skip focusing the buttons.\r\n                        if (instance.get('basic') === true) {\r\n                            element = instance.elements.reset[0];\r\n                        } else {\r\n                            element = instance.__internal.buttons[focus.element].element;\r\n                        }\r\n                    }\r\n                    break;\r\n                // a string means querySelector to select from dialog body contents.\r\n                case 'string':\r\n                    element = instance.elements.body.querySelector(focus.element);\r\n                    break;\r\n                // a function should return the focus element.\r\n                case 'function':\r\n                    element = focus.element.call(instance);\r\n                    break;\r\n                }\r\n                \r\n                // if no focus element, default to first reset element.\r\n                if ((typeof element === 'undefined' || element === null) && instance.__internal.buttons.length === 0) {\r\n                    element = instance.elements.reset[0];\r\n                }\r\n                // focus\r\n                if (element && element.focus) {\r\n                    element.focus();\r\n                    // if selectable\r\n                    if (focus.select && element.select) {\r\n                        element.select();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Focus event handler, attached to document.body and dialogs own reset links.\r\n         * handles the focus for modal dialogs only.\r\n         *\r\n         * @param {Event} event DOM focus event object.\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function onReset(event, instance) {\r\n\r\n            // should work on last modal if triggered from document.body \r\n            if (!instance) {\r\n                for (var x = openDialogs.length - 1; x > -1; x -= 1) {\r\n                    if (openDialogs[x].isModal()) {\r\n                        instance = openDialogs[x];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            // if modal\r\n            if (instance && instance.isModal()) {\r\n                // determine reset target to enable forward/backward tab cycle.\r\n                var resetTarget, target = event.srcElement || event.target;\r\n                var lastResetElement = target === instance.elements.reset[1] || (instance.__internal.buttons.length === 0 && target === document.body);\r\n\r\n                // if last reset link, then go to maximize or close\r\n                if (lastResetElement) {\r\n                    if (instance.get('maximizable')) {\r\n                        resetTarget = instance.elements.commands.maximize;\r\n                    } else if (instance.get('closable')) {\r\n                        resetTarget = instance.elements.commands.close;\r\n                    }\r\n                }\r\n                // if no reset target found, try finding the best button\r\n                if (resetTarget === undefined) {\r\n                    if (typeof instance.__internal.focus.element === 'number') {\r\n                        // button focus element, go to first available button\r\n                        if (target === instance.elements.reset[0]) {\r\n                            resetTarget = instance.elements.buttons.auxiliary.firstChild || instance.elements.buttons.primary.firstChild;\r\n                        } else if (lastResetElement) {\r\n                            //restart the cycle by going to first reset link\r\n                            resetTarget = instance.elements.reset[0];\r\n                        }\r\n                    } else {\r\n                        // will reach here when tapping backwards, so go to last child\r\n                        // The focus element SHOULD NOT be a button (logically!).\r\n                        if (target === instance.elements.reset[0]) {\r\n                            resetTarget = instance.elements.buttons.primary.lastChild || instance.elements.buttons.auxiliary.lastChild;\r\n                        }\r\n                    }\r\n                }\r\n                // focus\r\n                setFocus(instance, resetTarget);\r\n            }\r\n        }\r\n        /**\r\n         * Transition in transitionend event handler. \r\n         *\r\n         * @param {Event}\t\tTransitionEnd event object.\r\n         * @param {Object}\t\tThe dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function handleTransitionInEvent(event, instance) {\r\n            // clear the timer\r\n            clearTimeout(instance.__internal.timerIn);\r\n\r\n            // once transition is complete, set focus\r\n            setFocus(instance);\r\n\r\n            //restore scroll to prevent document jump\r\n            restoreScrollPosition();\r\n\r\n            // allow handling key up after transition ended.\r\n            cancelKeyup = false;\r\n\r\n            // allow custom `onfocus` method\r\n            dispatchEvent('onfocus', instance);\r\n\r\n            // unbind the event\r\n            off(instance.elements.dialog, transition.type, instance.__internal.transitionInHandler);\r\n\r\n            removeClass(instance.elements.root, classes.animationIn);\r\n        }\r\n\r\n        /**\r\n         * Transition out transitionend event handler. \r\n         *\r\n         * @param {Event}\t\tTransitionEnd event object.\r\n         * @param {Object}\t\tThe dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function handleTransitionOutEvent(event, instance) {\r\n            // clear the timer\r\n            clearTimeout(instance.__internal.timerOut);\r\n            // unbind the event\r\n            off(instance.elements.dialog, transition.type, instance.__internal.transitionOutHandler);\r\n\r\n            // reset move updates\r\n            resetMove(instance);\r\n            // reset resize updates\r\n            resetResize(instance);\r\n\r\n            // restore if maximized\r\n            if (instance.isMaximized() && !instance.get('startMaximized')) {\r\n                restore(instance);\r\n            }\r\n\r\n            // return focus to the last active element\r\n            if (alertify.defaults.maintainFocus && instance.__internal.activeElement) {\r\n                instance.__internal.activeElement.focus();\r\n                instance.__internal.activeElement = null;\r\n            }\r\n            \r\n            //destory the instance\r\n            if (typeof instance.__internal.destroy === 'function') {\r\n                instance.__internal.destroy.apply(instance);\r\n            }\r\n        }\r\n        /* Controls moving a dialog around */\r\n        //holde the current moving instance\r\n        var movable = null,\r\n            //holds the current X offset when move starts\r\n            offsetX = 0,\r\n            //holds the current Y offset when move starts\r\n            offsetY = 0,\r\n            xProp = 'pageX',\r\n            yProp = 'pageY',\r\n            bounds = null,\r\n            refreshTop = false,\r\n            moveDelegate = null\r\n        ;\r\n\r\n        /**\r\n         * Helper: sets the element top/left coordinates\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * @param {Node} element The element being moved.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function moveElement(event, element) {\r\n            var left = (event[xProp] - offsetX),\r\n                top  = (event[yProp] - offsetY);\r\n\r\n            if(refreshTop){\r\n                top -= document.body.scrollTop;\r\n            }\r\n           \r\n            element.style.left = left + 'px';\r\n            element.style.top = top + 'px';\r\n           \r\n        }\r\n        /**\r\n         * Helper: sets the element top/left coordinates within screen bounds\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * @param {Node} element The element being moved.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function moveElementBounded(event, element) {\r\n            var left = (event[xProp] - offsetX),\r\n                top  = (event[yProp] - offsetY);\r\n\r\n            if(refreshTop){\r\n                top -= document.body.scrollTop;\r\n            }\r\n            \r\n            element.style.left = Math.min(bounds.maxLeft, Math.max(bounds.minLeft, left)) + 'px';\r\n            if(refreshTop){\r\n                element.style.top = Math.min(bounds.maxTop, Math.max(bounds.minTop, top)) + 'px';\r\n            }else{\r\n                element.style.top = Math.max(bounds.minTop, top) + 'px';\r\n            }\r\n        }\r\n            \r\n\r\n        /**\r\n         * Triggers the start of a move event, attached to the header element mouse down event.\r\n         * Adds no-selection class to the body, disabling selection while moving.\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * @param {Object} instance The dilog instance.\r\n         * \r\n         * @return {Boolean} false\r\n         */\r\n        function beginMove(event, instance) {\r\n            if (resizable === null && !instance.isMaximized() && instance.get('movable')) {\r\n                var eventSrc, left=0, top=0;\r\n                if (event.type === 'touchstart') {\r\n                    event.preventDefault();\r\n                    eventSrc = event.targetTouches[0];\r\n                    xProp = 'clientX';\r\n                    yProp = 'clientY';\r\n                } else if (event.button === 0) {\r\n                    eventSrc = event;\r\n                }\r\n\r\n                if (eventSrc) {\r\n\r\n                    var element = instance.elements.dialog;\r\n                    addClass(element, classes.capture);\r\n\r\n                    if (element.style.left) {\r\n                        left = parseInt(element.style.left, 10);\r\n                    }\r\n\r\n                    if (element.style.top) {\r\n                        top = parseInt(element.style.top, 10);\r\n                    }\r\n                    \r\n                    offsetX = eventSrc[xProp] - left;\r\n                    offsetY = eventSrc[yProp] - top;\r\n\r\n                    if(instance.isModal()){\r\n                        offsetY += instance.elements.modal.scrollTop;\r\n                    }else if(instance.isPinned()){\r\n                        offsetY -= document.body.scrollTop;\r\n                    }\r\n                    \r\n                    if(instance.get('moveBounded')){\r\n                        var current = element,\r\n                            offsetLeft = -left,\r\n                            offsetTop = -top;\r\n                        \r\n                        //calc offset\r\n                        do {\r\n                            offsetLeft += current.offsetLeft;\r\n                            offsetTop += current.offsetTop;\r\n                        } while (current = current.offsetParent);\r\n                        \r\n                        bounds = {\r\n                            maxLeft : offsetLeft,\r\n                            minLeft : -offsetLeft,\r\n                            maxTop  : document.documentElement.clientHeight - element.clientHeight - offsetTop,\r\n                            minTop  : -offsetTop\r\n                        };\r\n                        moveDelegate = moveElementBounded;\r\n                    }else{\r\n                        bounds = null;\r\n                        moveDelegate = moveElement;\r\n                    }\r\n                    \r\n                    // allow custom `onmove` method\r\n                    dispatchEvent('onmove', instance);\r\n\r\n                    refreshTop = !instance.isModal() && instance.isPinned();\r\n                    movable = instance;\r\n                    moveDelegate(eventSrc, element);\r\n                    addClass(document.body, classes.noSelection);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * The actual move handler,  attached to document.body mousemove event.\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function move(event) {\r\n            if (movable) {\r\n                var eventSrc;\r\n                if (event.type === 'touchmove') {\r\n                    event.preventDefault();\r\n                    eventSrc = event.targetTouches[0];\r\n                } else if (event.button === 0) {\r\n                    eventSrc = event;\r\n                }\r\n                if (eventSrc) {\r\n                    moveDelegate(eventSrc, movable.elements.dialog);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Triggers the end of a move event,  attached to document.body mouseup event.\r\n         * Removes no-selection class from document.body, allowing selection.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function endMove() {\r\n            if (movable) {\r\n                var instance = movable;\r\n                movable = bounds = null;\r\n                removeClass(document.body, classes.noSelection);\r\n                removeClass(instance.elements.dialog, classes.capture);\r\n                // allow custom `onmoved` method\r\n                dispatchEvent('onmoved', instance);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Resets any changes made by moving the element to its original state,\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function resetMove(instance) {\r\n            movable = null;\r\n            var element = instance.elements.dialog;\r\n            element.style.left = element.style.top = '';\r\n        }\r\n\r\n        /**\r\n         * Updates the dialog move behavior.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Boolean} on True to add the behavior, removes it otherwise.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateMovable(instance) {\r\n            if (instance.get('movable')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.movable);\r\n                if (instance.isOpen()) {\r\n                    bindMovableEvents(instance);\r\n                }\r\n            } else {\r\n\r\n                //reset\r\n                resetMove(instance);\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.movable);\r\n                if (instance.isOpen()) {\r\n                    unbindMovableEvents(instance);\r\n                }\r\n            }\r\n        }\r\n\r\n        /* Controls moving a dialog around */\r\n        //holde the current instance being resized\t\t\r\n        var resizable = null,\r\n            //holds the staring left offset when resize starts.\r\n            startingLeft = Number.Nan,\r\n            //holds the staring width when resize starts.\r\n            startingWidth = 0,\r\n            //holds the initial width when resized for the first time.\r\n            minWidth = 0,\r\n            //holds the offset of the resize handle.\r\n            handleOffset = 0\r\n        ;\r\n\r\n        /**\r\n         * Helper: sets the element width/height and updates left coordinate if neccessary.\r\n         *\r\n         * @param {Event} event\tDOM mousemove event object.\r\n         * @param {Node} element The element being moved.\r\n         * @param {Boolean} pinned A flag indicating if the element being resized is pinned to the screen.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function resizeElement(event, element, pageRelative) {\r\n\r\n            //calculate offsets from 0,0\r\n            var current = element;\r\n            var offsetLeft = 0;\r\n            var offsetTop = 0;\r\n            do {\r\n                offsetLeft += current.offsetLeft;\r\n                offsetTop += current.offsetTop;\r\n            } while (current = current.offsetParent);\r\n\r\n            // determine X,Y coordinates.\r\n            var X, Y;\r\n            if (pageRelative === true) {\r\n                X = event.pageX;\r\n                Y = event.pageY;\r\n            } else {\r\n                X = event.clientX;\r\n                Y = event.clientY;\r\n            }\r\n            // rtl handling\r\n            var isRTL = isRightToLeft();\r\n            if (isRTL) {\r\n                // reverse X \r\n                X = document.body.offsetWidth - X;\r\n                // if has a starting left, calculate offsetRight\r\n                if (!isNaN(startingLeft)) {\r\n                    offsetLeft = document.body.offsetWidth - offsetLeft - element.offsetWidth;\r\n                }\r\n            }\r\n\r\n            // set width/height\r\n            element.style.height = (Y - offsetTop + handleOffset) + 'px';\r\n            element.style.width = (X - offsetLeft + handleOffset) + 'px';\r\n\r\n            // if the element being resized has a starting left, maintain it.\r\n            // the dialog is centered, divide by half the offset to maintain the margins.\r\n            if (!isNaN(startingLeft)) {\r\n                var diff = Math.abs(element.offsetWidth - startingWidth) * 0.5;\r\n                if (isRTL) {\r\n                    //negate the diff, why?\r\n                    //when growing it should decrease left\r\n                    //when shrinking it should increase left\r\n                    diff *= -1;\r\n                }\r\n                if (element.offsetWidth > startingWidth) {\r\n                    //growing\r\n                    element.style.left = (startingLeft + diff) + 'px';\r\n                } else if (element.offsetWidth >= minWidth) {\r\n                    //shrinking\r\n                    element.style.left = (startingLeft - diff) + 'px';\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Triggers the start of a resize event, attached to the resize handle element mouse down event.\r\n         * Adds no-selection class to the body, disabling selection while moving.\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * @param {Object} instance The dilog instance.\r\n         * \r\n         * @return {Boolean} false\r\n         */\r\n        function beginResize(event, instance) {\r\n            if (!instance.isMaximized()) {\r\n                var eventSrc;\r\n                if (event.type === 'touchstart') {\r\n                    event.preventDefault();\r\n                    eventSrc = event.targetTouches[0];\r\n                } else if (event.button === 0) {\r\n                    eventSrc = event;\r\n                }\r\n                if (eventSrc) {\r\n                    // allow custom `onresize` method\r\n                    dispatchEvent('onresize', instance);\r\n                    \r\n                    resizable = instance;\r\n                    handleOffset = instance.elements.resizeHandle.offsetHeight / 2;\r\n                    var element = instance.elements.dialog;\r\n                    addClass(element, classes.capture);\r\n                    startingLeft = parseInt(element.style.left, 10);\r\n                    element.style.height = element.offsetHeight + 'px';\r\n                    element.style.minHeight = instance.elements.header.offsetHeight + instance.elements.footer.offsetHeight + 'px';\r\n                    element.style.width = (startingWidth = element.offsetWidth) + 'px';\r\n\r\n                    if (element.style.maxWidth !== 'none') {\r\n                        element.style.minWidth = (minWidth = element.offsetWidth) + 'px';\r\n                    }\r\n                    element.style.maxWidth = 'none';\r\n                    addClass(document.body, classes.noSelection);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * The actual resize handler,  attached to document.body mousemove event.\r\n         *\r\n         * @param {Event} event\tDOM event object.\r\n         * \r\n         * @return {undefined}\r\n         */\r\n        function resize(event) {\r\n            if (resizable) {\r\n                var eventSrc;\r\n                if (event.type === 'touchmove') {\r\n                    event.preventDefault();\r\n                    eventSrc = event.targetTouches[0];\r\n                } else if (event.button === 0) {\r\n                    eventSrc = event;\r\n                }\r\n                if (eventSrc) {\r\n                    resizeElement(eventSrc, resizable.elements.dialog, !resizable.get('modal') && !resizable.get('pinned'));\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Triggers the end of a resize event,  attached to document.body mouseup event.\r\n         * Removes no-selection class from document.body, allowing selection.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function endResize() {\r\n            if (resizable) {\r\n                var instance = resizable;\r\n                resizable = null;\r\n                removeClass(document.body, classes.noSelection);\r\n                removeClass(instance.elements.dialog, classes.capture);\r\n                cancelClick = true;\r\n                // allow custom `onresized` method\r\n                dispatchEvent('onresized', instance);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Resets any changes made by resizing the element to its original state.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function resetResize(instance) {\r\n            resizable = null;\r\n            var element = instance.elements.dialog;\r\n            if (element.style.maxWidth === 'none') {\r\n                //clear inline styles.\r\n                element.style.maxWidth = element.style.minWidth = element.style.width = element.style.height = element.style.minHeight = element.style.left = '';\r\n                //reset variables.\r\n                startingLeft = Number.Nan;\r\n                startingWidth = minWidth = handleOffset = 0;\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Updates the dialog move behavior.\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         * @param {Boolean} on True to add the behavior, removes it otherwise.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function updateResizable(instance) {\r\n            if (instance.get('resizable')) {\r\n                // add class\r\n                addClass(instance.elements.root, classes.resizable);\r\n                if (instance.isOpen()) {\r\n                    bindResizableEvents(instance);\r\n                }\r\n            } else {\r\n                //reset\r\n                resetResize(instance);\r\n                // remove class\r\n                removeClass(instance.elements.root, classes.resizable);\r\n                if (instance.isOpen()) {\r\n                    unbindResizableEvents(instance);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Reset move/resize on window resize.\r\n         *\r\n         * @param {Event} event\twindow resize event object.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function windowResize(/*event*/) {\r\n            for (var x = 0; x < openDialogs.length; x += 1) {\r\n                var instance = openDialogs[x];\r\n                if (instance.get('autoReset')) {\r\n                    resetMove(instance);\r\n                    resetResize(instance);\r\n                }\r\n            }\r\n        }\r\n        /**\r\n         * Bind dialogs events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function bindEvents(instance) {\r\n            // if first dialog, hook global handlers\r\n            if (openDialogs.length === 1) {\r\n                //global\r\n                on(window, 'resize', windowResize);\r\n                on(document.body, 'keyup', keyupHandler);\r\n                on(document.body, 'keydown', keydownHandler);\r\n                on(document.body, 'focus', onReset);\r\n\r\n                //move\r\n                on(document.documentElement, 'mousemove', move);\r\n                on(document.documentElement, 'touchmove', move);\r\n                on(document.documentElement, 'mouseup', endMove);\r\n                on(document.documentElement, 'touchend', endMove);\r\n                //resize\r\n                on(document.documentElement, 'mousemove', resize);\r\n                on(document.documentElement, 'touchmove', resize);\r\n                on(document.documentElement, 'mouseup', endResize);\r\n                on(document.documentElement, 'touchend', endResize);\r\n            }\r\n\r\n            // common events\r\n            on(instance.elements.commands.container, 'click', instance.__internal.commandsClickHandler);\r\n            on(instance.elements.footer, 'click', instance.__internal.buttonsClickHandler);\r\n            on(instance.elements.reset[0], 'focus', instance.__internal.resetHandler);\r\n            on(instance.elements.reset[1], 'focus', instance.__internal.resetHandler);\r\n\r\n            //prevent handling key up when dialog is being opened by a key stroke.\r\n            cancelKeyup = true;\r\n            // hook in transition handler\r\n            on(instance.elements.dialog, transition.type, instance.__internal.transitionInHandler);\r\n\r\n            // modelss only events\r\n            if (!instance.get('modal')) {\r\n                bindModelessEvents(instance);\r\n            }\r\n\r\n            // resizable\r\n            if (instance.get('resizable')) {\r\n                bindResizableEvents(instance);\r\n            }\r\n\r\n            // movable\r\n            if (instance.get('movable')) {\r\n                bindMovableEvents(instance);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Unbind dialogs events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function unbindEvents(instance) {\r\n            // if last dialog, remove global handlers\r\n            if (openDialogs.length === 1) {\r\n                //global\r\n                off(window, 'resize', windowResize);\r\n                off(document.body, 'keyup', keyupHandler);\r\n                off(document.body, 'keydown', keydownHandler);\r\n                off(document.body, 'focus', onReset);\r\n                //move\r\n                off(document.documentElement, 'mousemove', move);\r\n                off(document.documentElement, 'mouseup', endMove);\r\n                //resize\r\n                off(document.documentElement, 'mousemove', resize);\r\n                off(document.documentElement, 'mouseup', endResize);\r\n            }\r\n\r\n            // common events\r\n            off(instance.elements.commands.container, 'click', instance.__internal.commandsClickHandler);\r\n            off(instance.elements.footer, 'click', instance.__internal.buttonsClickHandler);\r\n            off(instance.elements.reset[0], 'focus', instance.__internal.resetHandler);\r\n            off(instance.elements.reset[1], 'focus', instance.__internal.resetHandler);\r\n\r\n            // hook out transition handler\r\n            on(instance.elements.dialog, transition.type, instance.__internal.transitionOutHandler);\r\n\r\n            // modelss only events\r\n            if (!instance.get('modal')) {\r\n                unbindModelessEvents(instance);\r\n            }\r\n\r\n            // movable\r\n            if (instance.get('movable')) {\r\n                unbindMovableEvents(instance);\r\n            }\r\n\r\n            // resizable\r\n            if (instance.get('resizable')) {\r\n                unbindResizableEvents(instance);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Bind modeless specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function bindModelessEvents(instance) {\r\n            on(instance.elements.dialog, 'focus', instance.__internal.bringToFrontHandler, true);\r\n        }\r\n\r\n        /**\r\n         * Unbind modeless specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function unbindModelessEvents(instance) {\r\n            off(instance.elements.dialog, 'focus', instance.__internal.bringToFrontHandler, true);\r\n        }\r\n\r\n\r\n\r\n        /**\r\n         * Bind movable specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function bindMovableEvents(instance) {\r\n            on(instance.elements.header, 'mousedown', instance.__internal.beginMoveHandler);\r\n            on(instance.elements.header, 'touchstart', instance.__internal.beginMoveHandler);\r\n        }\r\n\r\n        /**\r\n         * Unbind movable specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function unbindMovableEvents(instance) {\r\n            off(instance.elements.header, 'mousedown', instance.__internal.beginMoveHandler);\r\n            off(instance.elements.header, 'touchstart', instance.__internal.beginMoveHandler);\r\n        }\r\n\r\n\r\n\r\n        /**\r\n         * Bind resizable specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function bindResizableEvents(instance) {\r\n            on(instance.elements.resizeHandle, 'mousedown', instance.__internal.beginResizeHandler);\r\n            on(instance.elements.resizeHandle, 'touchstart', instance.__internal.beginResizeHandler);\r\n        }\r\n\r\n        /**\r\n         * Unbind resizable specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function unbindResizableEvents(instance) {\r\n            off(instance.elements.resizeHandle, 'mousedown', instance.__internal.beginResizeHandler);\r\n            off(instance.elements.resizeHandle, 'touchstart', instance.__internal.beginResizeHandler);\r\n        }\r\n\r\n        /**\r\n         * Bind closable events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function bindClosableEvents(instance) {\r\n            on(instance.elements.modal, 'click', instance.__internal.modalClickHandler);\r\n        }\r\n\r\n        /**\r\n         * Unbind closable specific events\r\n         *\r\n         * @param {Object} instance The dilog instance.\r\n         *\r\n         * @return {undefined}\r\n         */\r\n        function unbindClosableEvents(instance) {\r\n            off(instance.elements.modal, 'click', instance.__internal.modalClickHandler);\r\n        }\r\n        // dialog API\r\n        return {\r\n            __init:initialize,\r\n            /**\r\n             * Check if dialog is currently open\r\n             *\r\n             * @return {Boolean}\r\n             */\r\n            isOpen: function () {\r\n                return this.__internal.isOpen;\r\n            },\r\n            isModal: function (){\r\n                return this.elements.root.className.indexOf(classes.modeless) < 0;\r\n            },\r\n            isMaximized:function(){\r\n                return this.elements.root.className.indexOf(classes.maximized) > -1;\r\n            },\r\n            isPinned:function(){\r\n                return this.elements.root.className.indexOf(classes.unpinned) < 0;\r\n            },\r\n            maximize:function(){\r\n                if(!this.isMaximized()){\r\n                    maximize(this);\r\n                }\r\n                return this;\r\n            },\r\n            restore:function(){\r\n                if(this.isMaximized()){\r\n                    restore(this);\r\n                }\r\n                return this;\r\n            },\r\n            pin:function(){\r\n                if(!this.isPinned()){\r\n                    pin(this);\r\n                }\r\n                return this;\r\n            },\r\n            unpin:function(){\r\n                if(this.isPinned()){\r\n                    unpin(this);\r\n                }\r\n                return this;\r\n            },\r\n            bringToFront:function(){\r\n                bringToFront(null, this);\r\n                return this;\r\n            },\r\n            /**\r\n             * Move the dialog to a specific x/y coordinates\r\n             *\r\n             * @param {Number} x    The new dialog x coordinate in pixels.\r\n             * @param {Number} y    The new dialog y coordinate in pixels.\r\n             *\r\n             * @return {Object} The dialog instance.\r\n             */\r\n            moveTo:function(x,y){\r\n                if(!isNaN(x) && !isNaN(y)){\r\n                    // allow custom `onmove` method\r\n                    dispatchEvent('onmove', this);\r\n                    \r\n                    var element = this.elements.dialog,\r\n                        current = element,\r\n                        offsetLeft = 0,\r\n                        offsetTop = 0;\r\n                    \r\n                    //subtract existing left,top\r\n                    if (element.style.left) {\r\n                        offsetLeft -= parseInt(element.style.left, 10);\r\n                    }\r\n                    if (element.style.top) {\r\n                        offsetTop -= parseInt(element.style.top, 10);\r\n                    }\r\n                    //calc offset\r\n                    do {\r\n                        offsetLeft += current.offsetLeft;\r\n                        offsetTop += current.offsetTop;\r\n                    } while (current = current.offsetParent);\r\n\r\n                    //calc left, top\r\n                    var left = (x - offsetLeft);\r\n                    var top  = (y - offsetTop);\r\n\r\n                    //// rtl handling\r\n                    if (isRightToLeft()) {\r\n                        left *= -1;\r\n                    }\r\n\r\n                    element.style.left = left + 'px';\r\n                    element.style.top = top + 'px';\r\n                    \r\n                    // allow custom `onmoved` method\r\n                    dispatchEvent('onmoved', this);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * Resize the dialog to a specific width/height (the dialog must be 'resizable').\r\n             * The dialog can be resized to:\r\n             *  A minimum width equal to the initial display width\r\n             *  A minimum height equal to the sum of header/footer heights.\r\n             *\r\n             *\r\n             * @param {Number or String} width    The new dialog width in pixels or in percent.\r\n             * @param {Number or String} height   The new dialog height in pixels or in percent.\r\n             *\r\n             * @return {Object} The dialog instance.\r\n             */\r\n            resizeTo:function(width,height){\r\n                var w = parseFloat(width),\r\n                    h = parseFloat(height),\r\n                    regex = /(\\d*\\.\\d+|\\d+)%/\r\n                ;\r\n\r\n                if(!isNaN(w) && !isNaN(h) && this.get('resizable') === true){\r\n                    \r\n                    // allow custom `onresize` method\r\n                    dispatchEvent('onresize', this);\r\n                    \r\n                    if(('' + width).match(regex)){\r\n                        w = w / 100 * document.documentElement.clientWidth ;\r\n                    }\r\n\r\n                    if(('' + height).match(regex)){\r\n                        h = h / 100 * document.documentElement.clientHeight;\r\n                    }\r\n\r\n                    var element = this.elements.dialog;\r\n                    if (element.style.maxWidth !== 'none') {\r\n                        element.style.minWidth = (minWidth = element.offsetWidth) + 'px';\r\n                    }\r\n                    element.style.maxWidth = 'none';\r\n                    element.style.minHeight = this.elements.header.offsetHeight + this.elements.footer.offsetHeight + 'px';\r\n                    element.style.width = w + 'px';\r\n                    element.style.height = h + 'px';\r\n                    \r\n                    // allow custom `onresized` method\r\n                    dispatchEvent('onresized', this);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * Gets or Sets dialog settings/options \r\n             *\r\n             * @param {String|Object} key A string specifying a propery name or a collection of key/value pairs.\r\n             * @param {Object} value Optional, the value associated with the key (in case it was a string).\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            setting : function (key, value) {\r\n                var self = this;\r\n                var result = update(this, this.__internal.options, function(k,o,n){ optionUpdated(self,k,o,n); }, key, value);\r\n                if(result.op === 'get'){\r\n                    if(result.found){\r\n                        return result.value;\r\n                    }else if(typeof this.settings !== 'undefined'){\r\n                        return update(this, this.settings, this.settingUpdated || function(){}, key, value).value;\r\n                    }else{\r\n                        return undefined;\r\n                    }\r\n                }else if(result.op === 'set'){\r\n                    if(result.items.length > 0){\r\n                        var callback = this.settingUpdated || function(){};\r\n                        for(var x=0;x<result.items.length;x+=1){\r\n                            var item = result.items[x];\r\n                            if(!item.found && typeof this.settings !== 'undefined'){\r\n                                update(this, this.settings, callback, item.key, item.value);\r\n                            }\r\n                        }\r\n                    }\r\n                    return this;\r\n                }\r\n            },\r\n            /**\r\n             * [Alias] Sets dialog settings/options \r\n             */\r\n            set:function(key, value){\r\n                this.setting(key,value);\r\n                return this;\r\n            },\r\n            /**\r\n             * [Alias] Gets dialog settings/options \r\n             */\r\n            get:function(key){\r\n                return this.setting(key);\r\n            },\r\n            /**\r\n            * Sets dialog header\r\n            * @content {string or element}\r\n            *\r\n            * @return {undefined}\r\n            */\r\n            setHeader:function(content){\r\n                if(typeof content === 'string'){\r\n                    clearContents(this.elements.header);\r\n                    this.elements.header.innerHTML = content;\r\n                }else if (content instanceof window.HTMLElement && this.elements.header.firstChild !== content){\r\n                    clearContents(this.elements.header);\r\n                    this.elements.header.appendChild(content);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n            * Sets dialog contents\r\n            * @content {string or element}\r\n            *\r\n            * @return {undefined}\r\n            */\r\n            setContent:function(content){\r\n                if(typeof content === 'string'){\r\n                    clearContents(this.elements.content);\r\n                    this.elements.content.innerHTML = content;\r\n                }else if (content instanceof window.HTMLElement && this.elements.content.firstChild !== content){\r\n                    clearContents(this.elements.content);\r\n                    this.elements.content.appendChild(content);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * Show the dialog as modal\r\n             *\r\n             * @return {Object} the dialog instance.\r\n             */\r\n            showModal: function(className){\r\n                return this.show(true, className);\r\n            },\r\n            /**\r\n             * Show the dialog\r\n             *\r\n             * @return {Object} the dialog instance.\r\n             */\r\n            show: function (modal, className) {\r\n                \r\n                // ensure initialization\r\n                initialize(this);\r\n\r\n                if ( !this.__internal.isOpen ) {\r\n\r\n                    // add to open dialogs\r\n                    this.__internal.isOpen = true;\r\n                    openDialogs.push(this);\r\n\r\n                    // save last focused element\r\n                    if(alertify.defaults.maintainFocus){\r\n                        this.__internal.activeElement = document.activeElement;\r\n                    }\r\n\r\n                    // set tabindex attribute on body element this allows script to give it focusable\r\n                    if(!document.body.hasAttribute('tabindex')) {\r\n                        document.body.setAttribute( 'tabindex', tabindex = '0');\r\n                    }\r\n\r\n                    //allow custom dom manipulation updates before showing the dialog.\r\n                    if(typeof this.prepare === 'function'){\r\n                        this.prepare();\r\n                    }\r\n\r\n                    bindEvents(this);\r\n\r\n                    if(modal !== undefined){\r\n                        this.set('modal', modal);\r\n                    }\r\n\r\n                    //save scroll to prevent document jump\r\n                    saveScrollPosition();\r\n\r\n                    ensureNoOverflow();\r\n\r\n                    // allow custom dialog class on show\r\n                    if(typeof className === 'string' && className !== ''){\r\n                        this.__internal.className = className;\r\n                        addClass(this.elements.root, className);\r\n                    }\r\n\r\n                    // maximize if start maximized\r\n                    if ( this.get('startMaximized')) {\r\n                        this.maximize();\r\n                    }else if(this.isMaximized()){\r\n                        restore(this);\r\n                    }\r\n\r\n                    updateAbsPositionFix(this);\r\n                    this.elements.root.removeAttribute('style');\r\n                    removeClass(this.elements.root, classes.animationOut);\r\n                    addClass(this.elements.root, classes.animationIn);\r\n\r\n                    // set 1s fallback in case transition event doesn't fire\r\n                    clearTimeout( this.__internal.timerIn);\r\n                    this.__internal.timerIn = setTimeout( this.__internal.transitionInHandler, transition.supported ? 1000 : 100 );\r\n\r\n                    if(isSafari){\r\n                        // force desktop safari reflow\r\n                        var root = this.elements.root;\r\n                        root.style.display  = 'none';\r\n                        setTimeout(function(){root.style.display  = 'block';}, 0);\r\n                    }\r\n\r\n                    //reflow\r\n                    reflow = this.elements.root.offsetWidth;\r\n                  \r\n                    // show dialog\r\n                    removeClass(this.elements.root, classes.hidden);\r\n\r\n                    // internal on show event\r\n                    if(typeof this.hooks.onshow === 'function'){\r\n                        this.hooks.onshow.call(this);\r\n                    }\r\n\r\n                    // allow custom `onshow` method\r\n                    dispatchEvent('onshow', this);\r\n\r\n                }else{\r\n                    // reset move updates\r\n                    resetMove(this);\r\n                    // reset resize updates\r\n                    resetResize(this);\r\n                    // shake the dialog to indicate its already open\r\n                    addClass(this.elements.dialog, classes.shake);\r\n                    var self = this;\r\n                    setTimeout(function(){\r\n                        removeClass(self.elements.dialog, classes.shake);\r\n                    },200);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * Close the dialog\r\n             *\r\n             * @return {Object} The dialog instance\r\n             */\r\n            close: function () {\r\n                if (this.__internal.isOpen ) {\r\n                    // custom `onclosing` event\r\n                    if(dispatchEvent('onclosing', this) !== false){\r\n\r\n                        unbindEvents(this);\r\n\r\n                        removeClass(this.elements.root, classes.animationIn);\r\n                        addClass(this.elements.root, classes.animationOut);\r\n\r\n                        // set 1s fallback in case transition event doesn't fire\r\n                        clearTimeout( this.__internal.timerOut );\r\n                        this.__internal.timerOut = setTimeout( this.__internal.transitionOutHandler, transition.supported ? 1000 : 100 );\r\n                        // hide dialog\r\n                        addClass(this.elements.root, classes.hidden);\r\n                        //reflow\r\n                        reflow = this.elements.modal.offsetWidth;\r\n\r\n                        // remove custom dialog class on hide\r\n                        if (typeof this.__internal.className !== 'undefined' && this.__internal.className !== '') {\r\n                            removeClass(this.elements.root, this.__internal.className);\r\n                        }\r\n\r\n                        // internal on close event\r\n                        if(typeof this.hooks.onclose === 'function'){\r\n                            this.hooks.onclose.call(this);\r\n                        }\r\n\r\n                        // allow custom `onclose` method\r\n                        dispatchEvent('onclose', this);\r\n\r\n                        //remove from open dialogs\r\n                        openDialogs.splice(openDialogs.indexOf(this),1);\r\n                        this.__internal.isOpen = false;\r\n\r\n                        ensureNoOverflow();\r\n                    }\r\n\r\n                }\r\n                // last dialog and tab index was set by us, remove it.\r\n                if(!openDialogs.length && tabindex === '0'){\r\n                    document.body.removeAttribute('tabindex');\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * Close all open dialogs except this.\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            closeOthers:function(){\r\n                alertify.closeAll(this);\r\n                return this;\r\n            },\r\n            /**\r\n             * Destroys this dialog instance\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            destroy:function(){\r\n                if(this.__internal) {\r\n                    if (this.__internal.isOpen ) {\r\n                        //mark dialog for destruction, this will be called on tranistionOut event.\r\n                        this.__internal.destroy = function(){\r\n                            destruct(this, initialize);\r\n                        };\r\n                        //close the dialog to unbind all events.\r\n                        this.close();\r\n                    }else if(!this.__internal.destroy){\r\n                        destruct(this, initialize);\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n        };\r\n\t} () );\r\n    var notifier = (function () {\r\n        var reflow,\r\n            element,\r\n            openInstances = [],\r\n            classes = {\r\n                base: 'alertify-notifier',\r\n                message: 'ajs-message',\r\n                top: 'ajs-top',\r\n                right: 'ajs-right',\r\n                bottom: 'ajs-bottom',\r\n                left: 'ajs-left',\r\n                center: 'ajs-center',\r\n                visible: 'ajs-visible',\r\n                hidden: 'ajs-hidden',\r\n                close: 'ajs-close'\r\n            };\r\n        /**\r\n         * Helper: initializes the notifier instance\r\n         *\r\n         */\r\n        function initialize(instance) {\r\n\r\n            if (!instance.__internal) {\r\n                instance.__internal = {\r\n                    position: alertify.defaults.notifier.position,\r\n                    delay: alertify.defaults.notifier.delay,\r\n                };\r\n\r\n                element = document.createElement('DIV');\r\n\r\n                updatePosition(instance);\r\n            }\r\n\r\n            //add to DOM tree.\r\n            if (element.parentNode !== document.body) {\r\n                document.body.appendChild(element);\r\n            }\r\n        }\r\n\r\n        function pushInstance(instance) {\r\n            instance.__internal.pushed = true;\r\n            openInstances.push(instance);\r\n        }\r\n        function popInstance(instance) {\r\n            openInstances.splice(openInstances.indexOf(instance), 1);\r\n            instance.__internal.pushed = false;\r\n        }\r\n        /**\r\n         * Helper: update the notifier instance position\r\n         *\r\n         */\r\n        function updatePosition(instance) {\r\n            element.className = classes.base;\r\n            switch (instance.__internal.position) {\r\n            case 'top-right':\r\n                addClass(element, classes.top + ' ' + classes.right);\r\n                break;\r\n            case 'top-left':\r\n                addClass(element, classes.top + ' ' + classes.left);\r\n                break;\r\n            case 'top-center':\r\n                addClass(element, classes.top + ' ' + classes.center);\r\n                break;\r\n            case 'bottom-left':\r\n                addClass(element, classes.bottom + ' ' + classes.left);\r\n                break;\r\n            case 'bottom-center':\r\n                addClass(element, classes.bottom + ' ' + classes.center);\r\n                break;\r\n\r\n            default:\r\n            case 'bottom-right':\r\n                addClass(element, classes.bottom + ' ' + classes.right);\r\n                break;\r\n            }\r\n        }\r\n\r\n        /**\r\n        * creates a new notification message\r\n        *\r\n        * @param  {DOMElement} message\tThe notifier message element\r\n        * @param  {Number} wait   Time (in ms) to wait before the message is dismissed, a value of 0 means keep open till clicked.\r\n        * @param  {Function} callback A callback function to be invoked when the message is dismissed.\r\n        *\r\n        * @return {undefined}\r\n        */\r\n        function create(div, callback) {\r\n\r\n            function clickDelegate(event, instance) {\r\n                if(!instance.__internal.closeButton || event.target.getAttribute('data-close') === 'true'){\r\n                    instance.dismiss(true);\r\n                }\r\n            }\r\n\r\n            function transitionDone(event, instance) {\r\n                // unbind event\r\n                off(instance.element, transition.type, transitionDone);\r\n                // remove the message\r\n                element.removeChild(instance.element);\r\n            }\r\n\r\n            function initialize(instance) {\r\n                if (!instance.__internal) {\r\n                    instance.__internal = {\r\n                        pushed: false,\r\n                        delay : undefined,\r\n                        timer: undefined,\r\n                        clickHandler: undefined,\r\n                        transitionEndHandler: undefined,\r\n                        transitionTimeout: undefined\r\n                    };\r\n                    instance.__internal.clickHandler = delegate(instance, clickDelegate);\r\n                    instance.__internal.transitionEndHandler = delegate(instance, transitionDone);\r\n                }\r\n                return instance;\r\n            }\r\n            function clearTimers(instance) {\r\n                clearTimeout(instance.__internal.timer);\r\n                clearTimeout(instance.__internal.transitionTimeout);\r\n            }\r\n            return initialize({\r\n                /* notification DOM element*/\r\n                element: div,\r\n                /*\r\n                 * Pushes a notification message\r\n                 * @param {string or DOMElement} content The notification message content\r\n                 * @param {Number} wait The time (in seconds) to wait before the message is dismissed, a value of 0 means keep open till clicked.\r\n                 *\r\n                 */\r\n                push: function (_content, _wait) {\r\n                    if (!this.__internal.pushed) {\r\n\r\n                        pushInstance(this);\r\n                        clearTimers(this);\r\n\r\n                        var content, wait;\r\n                        switch (arguments.length) {\r\n                        case 0:\r\n                            wait = this.__internal.delay;\r\n                            break;\r\n                        case 1:\r\n                            if (typeof (_content) === 'number') {\r\n                                wait = _content;\r\n                            } else {\r\n                                content = _content;\r\n                                wait = this.__internal.delay;\r\n                            }\r\n                            break;\r\n                        case 2:\r\n                            content = _content;\r\n                            wait = _wait;\r\n                            break;\r\n                        }\r\n                        this.__internal.closeButton = alertify.defaults.notifier.closeButton;\r\n                        // set contents\r\n                        if (typeof content !== 'undefined') {\r\n                            this.setContent(content);\r\n                        }\r\n                        // append or insert\r\n                        if (notifier.__internal.position.indexOf('top') < 0) {\r\n                            element.appendChild(this.element);\r\n                        } else {\r\n                            element.insertBefore(this.element, element.firstChild);\r\n                        }\r\n                        reflow = this.element.offsetWidth;\r\n                        addClass(this.element, classes.visible);\r\n                        // attach click event\r\n                        on(this.element, 'click', this.__internal.clickHandler);\r\n                        return this.delay(wait);\r\n                    }\r\n                    return this;\r\n                },\r\n                /*\r\n                 * {Function} callback function to be invoked before dismissing the notification message.\r\n                 * Remarks: A return value === 'false' will cancel the dismissal\r\n                 *\r\n                 */\r\n                ondismiss: function () { },\r\n                /*\r\n                 * {Function} callback function to be invoked when the message is dismissed.\r\n                 *\r\n                 */\r\n                callback: callback,\r\n                /*\r\n                 * Dismisses the notification message\r\n                 * @param {Boolean} clicked A flag indicating if the dismissal was caused by a click.\r\n                 *\r\n                 */\r\n                dismiss: function (clicked) {\r\n                    if (this.__internal.pushed) {\r\n                        clearTimers(this);\r\n                        if (!(typeof this.ondismiss === 'function' && this.ondismiss.call(this) === false)) {\r\n                            //detach click event\r\n                            off(this.element, 'click', this.__internal.clickHandler);\r\n                            // ensure element exists\r\n                            if (typeof this.element !== 'undefined' && this.element.parentNode === element) {\r\n                                //transition end or fallback\r\n                                this.__internal.transitionTimeout = setTimeout(this.__internal.transitionEndHandler, transition.supported ? 1000 : 100);\r\n                                removeClass(this.element, classes.visible);\r\n\r\n                                // custom callback on dismiss\r\n                                if (typeof this.callback === 'function') {\r\n                                    this.callback.call(this, clicked);\r\n                                }\r\n                            }\r\n                            popInstance(this);\r\n                        }\r\n                    }\r\n                    return this;\r\n                },\r\n                /*\r\n                 * Delays the notification message dismissal\r\n                 * @param {Number} wait The time (in seconds) to wait before the message is dismissed, a value of 0 means keep open till clicked.\r\n                 *\r\n                 */\r\n                delay: function (wait) {\r\n                    clearTimers(this);\r\n                    this.__internal.delay = typeof wait !== 'undefined' && !isNaN(+wait) ? +wait : notifier.__internal.delay;\r\n                    if (this.__internal.delay > 0) {\r\n                        var  self = this;\r\n                        this.__internal.timer = setTimeout(function () { self.dismiss(); }, this.__internal.delay * 1000);\r\n                    }\r\n                    return this;\r\n                },\r\n                /*\r\n                 * Sets the notification message contents\r\n                 * @param {string or DOMElement} content The notification message content\r\n                 *\r\n                 */\r\n                setContent: function (content) {\r\n                    if (typeof content === 'string') {\r\n                        clearContents(this.element);\r\n                        this.element.innerHTML = content;\r\n                    } else if (content instanceof window.HTMLElement && this.element.firstChild !== content) {\r\n                        clearContents(this.element);\r\n                        this.element.appendChild(content);\r\n                    }\r\n                    if(this.__internal.closeButton){\r\n                        var close = document.createElement('span');\r\n                        addClass(close, classes.close);\r\n                        close.setAttribute('data-close', true);\r\n                        this.element.appendChild(close);\r\n                    }\r\n                    return this;\r\n                },\r\n                /*\r\n                 * Dismisses all open notifications except this.\r\n                 *\r\n                 */\r\n                dismissOthers: function () {\r\n                    notifier.dismissAll(this);\r\n                    return this;\r\n                }\r\n            });\r\n        }\r\n\r\n        //notifier api\r\n        return {\r\n            /**\r\n             * Gets or Sets notifier settings.\r\n             *\r\n             * @param {string} key The setting name\r\n             * @param {Variant} value The setting value.\r\n             *\r\n             * @return {Object}\tif the called as a setter, return the notifier instance.\r\n             */\r\n            setting: function (key, value) {\r\n                //ensure init\r\n                initialize(this);\r\n\r\n                if (typeof value === 'undefined') {\r\n                    //get\r\n                    return this.__internal[key];\r\n                } else {\r\n                    //set\r\n                    switch (key) {\r\n                    case 'position':\r\n                        this.__internal.position = value;\r\n                        updatePosition(this);\r\n                        break;\r\n                    case 'delay':\r\n                        this.__internal.delay = value;\r\n                        break;\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * [Alias] Sets dialog settings/options\r\n             */\r\n            set:function(key,value){\r\n                this.setting(key,value);\r\n                return this;\r\n            },\r\n            /**\r\n             * [Alias] Gets dialog settings/options\r\n             */\r\n            get:function(key){\r\n                return this.setting(key);\r\n            },\r\n            /**\r\n             * Creates a new notification message\r\n             *\r\n             * @param {string} type The type of notification message (simply a CSS class name 'ajs-{type}' to be added).\r\n             * @param {Function} callback  A callback function to be invoked when the message is dismissed.\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            create: function (type, callback) {\r\n                //ensure notifier init\r\n                initialize(this);\r\n                //create new notification message\r\n                var div = document.createElement('div');\r\n                div.className = classes.message + ((typeof type === 'string' && type !== '') ? ' ajs-' + type : '');\r\n                return create(div, callback);\r\n            },\r\n            /**\r\n             * Dismisses all open notifications.\r\n             *\r\n             * @param {Object} excpet [optional] The notification object to exclude from dismissal.\r\n             *\r\n             */\r\n            dismissAll: function (except) {\r\n                var clone = openInstances.slice(0);\r\n                for (var x = 0; x < clone.length; x += 1) {\r\n                    var  instance = clone[x];\r\n                    if (except === undefined || except !== instance) {\r\n                        instance.dismiss();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    })();\r\n\r\n    /**\r\n     * Alertify public API\r\n     * This contains everything that is exposed through the alertify object.\r\n     *\r\n     * @return {Object}\r\n     */\r\n    function Alertify() {\r\n\r\n        // holds a references of created dialogs\r\n        var dialogs = {};\r\n\r\n        /**\r\n         * Extends a given prototype by merging properties from base into sub.\r\n         *\r\n         * @sub {Object} sub The prototype being overwritten.\r\n         * @base {Object} base The prototype being written.\r\n         *\r\n         * @return {Object} The extended prototype.\r\n         */\r\n        function extend(sub, base) {\r\n            // copy dialog pototype over definition.\r\n            for (var prop in base) {\r\n                if (base.hasOwnProperty(prop)) {\r\n                    sub[prop] = base[prop];\r\n                }\r\n            }\r\n            return sub;\r\n        }\r\n\r\n\r\n        /**\r\n        * Helper: returns a dialog instance from saved dialogs.\r\n        * and initializes the dialog if its not already initialized.\r\n        *\r\n        * @name {String} name The dialog name.\r\n        *\r\n        * @return {Object} The dialog instance.\r\n        */\r\n        function get_dialog(name) {\r\n            var dialog = dialogs[name].dialog;\r\n            //initialize the dialog if its not already initialized.\r\n            if (dialog && typeof dialog.__init === 'function') {\r\n                dialog.__init(dialog);\r\n            }\r\n            return dialog;\r\n        }\r\n\r\n        /**\r\n         * Helper:  registers a new dialog definition.\r\n         *\r\n         * @name {String} name The dialog name.\r\n         * @Factory {Function} Factory a function resposible for creating dialog prototype.\r\n         * @transient {Boolean} transient True to create a new dialog instance each time the dialog is invoked, false otherwise.\r\n         * @base {String} base the name of another dialog to inherit from.\r\n         *\r\n         * @return {Object} The dialog definition.\r\n         */\r\n        function register(name, Factory, transient, base) {\r\n            var definition = {\r\n                dialog: null,\r\n                factory: Factory\r\n            };\r\n\r\n            //if this is based on an existing dialog, create a new definition\r\n            //by applying the new protoype over the existing one.\r\n            if (base !== undefined) {\r\n                definition.factory = function () {\r\n                    return extend(new dialogs[base].factory(), new Factory());\r\n                };\r\n            }\r\n\r\n            if (!transient) {\r\n                //create a new definition based on dialog\r\n                definition.dialog = extend(new definition.factory(), dialog);\r\n            }\r\n            return dialogs[name] = definition;\r\n        }\r\n\r\n        return {\r\n            /**\r\n             * Alertify defaults\r\n             * \r\n             * @type {Object}\r\n             */\r\n            defaults: defaults,\r\n            /**\r\n             * Dialogs factory \r\n             *\r\n             * @param {string}      Dialog name.\r\n             * @param {Function}    A Dialog factory function.\r\n             * @param {Boolean}     Indicates whether to create a singleton or transient dialog.\r\n             * @param {String}      The name of the base type to inherit from.\r\n             */\r\n            dialog: function (name, Factory, transient, base) {\r\n\r\n                // get request, create a new instance and return it.\r\n                if (typeof Factory !== 'function') {\r\n                    return get_dialog(name);\r\n                }\r\n\r\n                if (this.hasOwnProperty(name)) {\r\n                    throw new Error('alertify.dialog: name already exists');\r\n                }\r\n\r\n                // register the dialog\r\n                var definition = register(name, Factory, transient, base);\r\n\r\n                if (transient) {\r\n\r\n                    // make it public\r\n                    this[name] = function () {\r\n                        //if passed with no params, consider it a get request\r\n                        if (arguments.length === 0) {\r\n                            return definition.dialog;\r\n                        } else {\r\n                            var instance = extend(new definition.factory(), dialog);\r\n                            //ensure init\r\n                            if (instance && typeof instance.__init === 'function') {\r\n                                instance.__init(instance);\r\n                            }\r\n                            instance['main'].apply(instance, arguments);\r\n                            return instance['show'].apply(instance);\r\n                        }\r\n                    };\r\n                } else {\r\n                    // make it public\r\n                    this[name] = function () {\r\n                        //ensure init\r\n                        if (definition.dialog && typeof definition.dialog.__init === 'function') {\r\n                            definition.dialog.__init(definition.dialog);\r\n                        }\r\n                        //if passed with no params, consider it a get request\r\n                        if (arguments.length === 0) {\r\n                            return definition.dialog;\r\n                        } else {\r\n                            var dialog = definition.dialog;\r\n                            dialog['main'].apply(definition.dialog, arguments);\r\n                            return dialog['show'].apply(definition.dialog);\r\n                        }\r\n                    };\r\n                }\r\n            },\r\n            /**\r\n             * Close all open dialogs.\r\n             *\r\n             * @param {Object} excpet [optional] The dialog object to exclude from closing.\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            closeAll: function (except) {\r\n                var clone = openDialogs.slice(0);\r\n                for (var x = 0; x < clone.length; x += 1) {\r\n                    var instance = clone[x];\r\n                    if (except === undefined || except !== instance) {\r\n                        instance.close();\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * Gets or Sets dialog settings/options. if the dialog is transient, this call does nothing.\r\n             *\r\n             * @param {string} name The dialog name.\r\n             * @param {String|Object} key A string specifying a propery name or a collection of key/value pairs.\r\n             * @param {Variant} value Optional, the value associated with the key (in case it was a string).\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            setting: function (name, key, value) {\r\n\r\n                if (name === 'notifier') {\r\n                    return notifier.setting(key, value);\r\n                }\r\n\r\n                var dialog = get_dialog(name);\r\n                if (dialog) {\r\n                    return dialog.setting(key, value);\r\n                }\r\n            },\r\n            /**\r\n             * [Alias] Sets dialog settings/options \r\n             */\r\n            set: function(name,key,value){\r\n                return this.setting(name, key,value);\r\n            },\r\n            /**\r\n             * [Alias] Gets dialog settings/options \r\n             */\r\n            get: function(name, key){\r\n                return this.setting(name, key);\r\n            },\r\n            /**\r\n             * Creates a new notification message.\r\n             * If a type is passed, a class name \"ajs-{type}\" will be added.\r\n             * This allows for custom look and feel for various types of notifications.\r\n             *\r\n             * @param  {String | DOMElement}    [message=undefined]\t\tMessage text\r\n             * @param  {String}                 [type='']\t\t\t\tType of log message\r\n             * @param  {String}                 [wait='']\t\t\t\tTime (in seconds) to wait before auto-close\r\n             * @param  {Function}               [callback=undefined]\tA callback function to be invoked when the log is closed.\r\n             *\r\n             * @return {Object} Notification object.\r\n             */\r\n            notify: function (message, type, wait, callback) {\r\n                return notifier.create(type, callback).push(message, wait);\r\n            },\r\n            /**\r\n             * Creates a new notification message.\r\n             *\r\n             * @param  {String}\t\t[message=undefined]\t\tMessage text\r\n             * @param  {String}     [wait='']\t\t\t\tTime (in seconds) to wait before auto-close\r\n             * @param  {Function}\t[callback=undefined]\tA callback function to be invoked when the log is closed.\r\n             *\r\n             * @return {Object} Notification object.\r\n             */\r\n            message: function (message, wait, callback) {\r\n                return notifier.create(null, callback).push(message, wait);\r\n            },\r\n            /**\r\n             * Creates a new notification message of type 'success'.\r\n             *\r\n             * @param  {String}\t\t[message=undefined]\t\tMessage text\r\n             * @param  {String}     [wait='']\t\t\t\tTime (in seconds) to wait before auto-close\r\n             * @param  {Function}\t[callback=undefined]\tA callback function to be invoked when the log is closed.\r\n             *\r\n             * @return {Object} Notification object.\r\n             */\r\n            success: function (message, wait, callback) {\r\n                return notifier.create('success', callback).push(message, wait);\r\n            },\r\n            /**\r\n             * Creates a new notification message of type 'error'.\r\n             *\r\n             * @param  {String}\t\t[message=undefined]\t\tMessage text\r\n             * @param  {String}     [wait='']\t\t\t\tTime (in seconds) to wait before auto-close\r\n             * @param  {Function}\t[callback=undefined]\tA callback function to be invoked when the log is closed.\r\n             *\r\n             * @return {Object} Notification object.\r\n             */\r\n            error: function (message, wait, callback) {\r\n                return notifier.create('error', callback).push(message, wait);\r\n            },\r\n            /**\r\n             * Creates a new notification message of type 'warning'.\r\n             *\r\n             * @param  {String}\t\t[message=undefined]\t\tMessage text\r\n             * @param  {String}     [wait='']\t\t\t\tTime (in seconds) to wait before auto-close\r\n             * @param  {Function}\t[callback=undefined]\tA callback function to be invoked when the log is closed.\r\n             *\r\n             * @return {Object} Notification object.\r\n             */\r\n            warning: function (message, wait, callback) {\r\n                return notifier.create('warning', callback).push(message, wait);\r\n            },\r\n            /**\r\n             * Dismisses all open notifications\r\n             *\r\n             * @return {undefined}\r\n             */\r\n            dismissAll: function () {\r\n                notifier.dismissAll();\r\n            }\r\n        };\r\n    }\r\n    var alertify = new Alertify();\r\n\r\n    /**\r\n    * Alert dialog definition\r\n    *\r\n    * invoked by:\r\n    *\talertify.alert(message);\r\n    *\talertify.alert(title, message);\r\n    *\talertify.alert(message, onok);\r\n    *\talertify.alert(title, message, onok);\r\n     */\r\n    alertify.dialog('alert', function () {\r\n        return {\r\n            main: function (_title, _message, _onok) {\r\n                var title, message, onok;\r\n                switch (arguments.length) {\r\n                case 1:\r\n                    message = _title;\r\n                    break;\r\n                case 2:\r\n                    if (typeof _message === 'function') {\r\n                        message = _title;\r\n                        onok = _message;\r\n                    } else {\r\n                        title = _title;\r\n                        message = _message;\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    title = _title;\r\n                    message = _message;\r\n                    onok = _onok;\r\n                    break;\r\n                }\r\n                this.set('title', title);\r\n                this.set('message', message);\r\n                this.set('onok', onok);\r\n                return this;\r\n            },\r\n            setup: function () {\r\n                return {\r\n                    buttons: [\r\n                        {\r\n                            text: alertify.defaults.glossary.ok,\r\n                            key: keys.ESC,\r\n                            invokeOnClose: true,\r\n                            className: alertify.defaults.theme.ok,\r\n                        }\r\n                    ],\r\n                    focus: {\r\n                        element: 0,\r\n                        select: false\r\n                    },\r\n                    options: {\r\n                        maximizable: false,\r\n                        resizable: false\r\n                    }\r\n                };\r\n            },\r\n            build: function () {\r\n                // nothing\r\n            },\r\n            prepare: function () {\r\n                //nothing\r\n            },\r\n            setMessage: function (message) {\r\n                this.setContent(message);\r\n            },\r\n            settings: {\r\n                message: undefined,\r\n                onok: undefined,\r\n                label: undefined,\r\n            },\r\n            settingUpdated: function (key, oldValue, newValue) {\r\n                switch (key) {\r\n                case 'message':\r\n                    this.setMessage(newValue);\r\n                    break;\r\n                case 'label':\r\n                    if (this.__internal.buttons[0].element) {\r\n                        this.__internal.buttons[0].element.innerHTML = newValue;\r\n                    }\r\n                    break;\r\n                }\r\n            },\r\n            callback: function (closeEvent) {\r\n                if (typeof this.get('onok') === 'function') {\r\n                    var returnValue = this.get('onok').call(this, closeEvent);\r\n                    if (typeof returnValue !== 'undefined') {\r\n                        closeEvent.cancel = !returnValue;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * Confirm dialog object\r\n     *\r\n     *\talertify.confirm(message);\r\n     *\talertify.confirm(message, onok);\r\n     *\talertify.confirm(message, onok, oncancel);\r\n     *\talertify.confirm(title, message, onok, oncancel);\r\n     */\r\n    alertify.dialog('confirm', function () {\r\n\r\n        var autoConfirm = {\r\n            timer: null,\r\n            index: null,\r\n            text: null,\r\n            duration: null,\r\n            task: function (event, self) {\r\n                if (self.isOpen()) {\r\n                    self.__internal.buttons[autoConfirm.index].element.innerHTML = autoConfirm.text + ' (&#8207;' + autoConfirm.duration + '&#8207;) ';\r\n                    autoConfirm.duration -= 1;\r\n                    if (autoConfirm.duration === -1) {\r\n                        clearAutoConfirm(self);\r\n                        var button = self.__internal.buttons[autoConfirm.index];\r\n                        var closeEvent = createCloseEvent(autoConfirm.index, button);\r\n\r\n                        if (typeof self.callback === 'function') {\r\n                            self.callback.apply(self, [closeEvent]);\r\n                        }\r\n                        //close the dialog.\r\n                        if (closeEvent.close !== false) {\r\n                            self.close();\r\n                        }\r\n                    }\r\n                } else {\r\n                    clearAutoConfirm(self);\r\n                }\r\n            }\r\n        };\r\n\r\n        function clearAutoConfirm(self) {\r\n            if (autoConfirm.timer !== null) {\r\n                clearInterval(autoConfirm.timer);\r\n                autoConfirm.timer = null;\r\n                self.__internal.buttons[autoConfirm.index].element.innerHTML = autoConfirm.text;\r\n            }\r\n        }\r\n\r\n        function startAutoConfirm(self, index, duration) {\r\n            clearAutoConfirm(self);\r\n            autoConfirm.duration = duration;\r\n            autoConfirm.index = index;\r\n            autoConfirm.text = self.__internal.buttons[index].element.innerHTML;\r\n            autoConfirm.timer = setInterval(delegate(self, autoConfirm.task), 1000);\r\n            autoConfirm.task(null, self);\r\n        }\r\n\r\n\r\n        return {\r\n            main: function (_title, _message, _onok, _oncancel) {\r\n                var title, message, onok, oncancel;\r\n                switch (arguments.length) {\r\n                case 1:\r\n                    message = _title;\r\n                    break;\r\n                case 2:\r\n                    message = _title;\r\n                    onok = _message;\r\n                    break;\r\n                case 3:\r\n                    message = _title;\r\n                    onok = _message;\r\n                    oncancel = _onok;\r\n                    break;\r\n                case 4:\r\n                    title = _title;\r\n                    message = _message;\r\n                    onok = _onok;\r\n                    oncancel = _oncancel;\r\n                    break;\r\n                }\r\n                this.set('title', title);\r\n                this.set('message', message);\r\n                this.set('onok', onok);\r\n                this.set('oncancel', oncancel);\r\n                return this;\r\n            },\r\n            setup: function () {\r\n                return {\r\n                    buttons: [\r\n                        {\r\n                            text: alertify.defaults.glossary.ok,\r\n                            key: keys.ENTER,\r\n                            className: alertify.defaults.theme.ok,\r\n                        },\r\n                        {\r\n                            text: alertify.defaults.glossary.cancel,\r\n                            key: keys.ESC,\r\n                            invokeOnClose: true,\r\n                            className: alertify.defaults.theme.cancel,\r\n                        }\r\n                    ],\r\n                    focus: {\r\n                        element: 0,\r\n                        select: false\r\n                    },\r\n                    options: {\r\n                        maximizable: false,\r\n                        resizable: false\r\n                    }\r\n                };\r\n            },\r\n            build: function () {\r\n                //nothing\r\n            },\r\n            prepare: function () {\r\n                //nothing\r\n            },\r\n            setMessage: function (message) {\r\n                this.setContent(message);\r\n            },\r\n            settings: {\r\n                message: null,\r\n                labels: null,\r\n                onok: null,\r\n                oncancel: null,\r\n                defaultFocus: null,\r\n                reverseButtons: null,\r\n            },\r\n            settingUpdated: function (key, oldValue, newValue) {\r\n                switch (key) {\r\n                case 'message':\r\n                    this.setMessage(newValue);\r\n                    break;\r\n                case 'labels':\r\n                    if ('ok' in newValue && this.__internal.buttons[0].element) {\r\n                        this.__internal.buttons[0].text = newValue.ok;\r\n                        this.__internal.buttons[0].element.innerHTML = newValue.ok;\r\n                    }\r\n                    if ('cancel' in newValue && this.__internal.buttons[1].element) {\r\n                        this.__internal.buttons[1].text = newValue.cancel;\r\n                        this.__internal.buttons[1].element.innerHTML = newValue.cancel;\r\n                    }\r\n                    break;\r\n                case 'reverseButtons':\r\n                    if (newValue === true) {\r\n                        this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element);\r\n                    } else {\r\n                        this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);\r\n                    }\r\n                    break;\r\n                case 'defaultFocus':\r\n                    this.__internal.focus.element = newValue === 'ok' ? 0 : 1;\r\n                    break;\r\n                }\r\n            },\r\n            callback: function (closeEvent) {\r\n                clearAutoConfirm(this);\r\n                var returnValue;\r\n                switch (closeEvent.index) {\r\n                case 0:\r\n                    if (typeof this.get('onok') === 'function') {\r\n                        returnValue = this.get('onok').call(this, closeEvent);\r\n                        if (typeof returnValue !== 'undefined') {\r\n                            closeEvent.cancel = !returnValue;\r\n                        }\r\n                    }\r\n                    break;\r\n                case 1:\r\n                    if (typeof this.get('oncancel') === 'function') {\r\n                        returnValue = this.get('oncancel').call(this, closeEvent);\r\n                        if (typeof returnValue !== 'undefined') {\r\n                            closeEvent.cancel = !returnValue;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            },\r\n            autoOk: function (duration) {\r\n                startAutoConfirm(this, 0, duration);\r\n                return this;\r\n            },\r\n            autoCancel: function (duration) {\r\n                startAutoConfirm(this, 1, duration);\r\n                return this;\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * Prompt dialog object\r\n     *\r\n     * invoked by:\r\n     *\talertify.prompt(message);\r\n     *\talertify.prompt(message, value);\r\n     *\talertify.prompt(message, value, onok);\r\n     *\talertify.prompt(message, value, onok, oncancel);\r\n     *\talertify.prompt(title, message, value, onok, oncancel);\r\n     */\r\n    alertify.dialog('prompt', function () {\r\n        var input = document.createElement('INPUT');\r\n        var p = document.createElement('P');\r\n        return {\r\n            main: function (_title, _message, _value, _onok, _oncancel) {\r\n                var title, message, value, onok, oncancel;\r\n                switch (arguments.length) {\r\n                case 1:\r\n                    message = _title;\r\n                    break;\r\n                case 2:\r\n                    message = _title;\r\n                    value = _message;\r\n                    break;\r\n                case 3:\r\n                    message = _title;\r\n                    value = _message;\r\n                    onok = _value;\r\n                    break;\r\n                case 4:\r\n                    message = _title;\r\n                    value = _message;\r\n                    onok = _value;\r\n                    oncancel = _onok;\r\n                    break;\r\n                case 5:\r\n                    title = _title;\r\n                    message = _message;\r\n                    value = _value;\r\n                    onok = _onok;\r\n                    oncancel = _oncancel;\r\n                    break;\r\n                }\r\n                this.set('title', title);\r\n                this.set('message', message);\r\n                this.set('value', value);\r\n                this.set('onok', onok);\r\n                this.set('oncancel', oncancel);\r\n                return this;\r\n            },\r\n            setup: function () {\r\n                return {\r\n                    buttons: [\r\n                        {\r\n                            text: alertify.defaults.glossary.ok,\r\n                            key: keys.ENTER,\r\n                            className: alertify.defaults.theme.ok,\r\n                        },\r\n                        {\r\n                            text: alertify.defaults.glossary.cancel,\r\n                            key: keys.ESC,\r\n                            invokeOnClose: true,\r\n                            className: alertify.defaults.theme.cancel,\r\n                        }\r\n                    ],\r\n                    focus: {\r\n                        element: input,\r\n                        select: true\r\n                    },\r\n                    options: {\r\n                        maximizable: false,\r\n                        resizable: false\r\n                    }\r\n                };\r\n            },\r\n            build: function () {\r\n                input.className = alertify.defaults.theme.input;\r\n                input.setAttribute('type', 'text');\r\n                input.value = this.get('value');\r\n                this.elements.content.appendChild(p);\r\n                this.elements.content.appendChild(input);\r\n            },\r\n            prepare: function () {\r\n                //nothing\r\n            },\r\n            setMessage: function (message) {\r\n                if (typeof message === 'string') {\r\n                    clearContents(p);\r\n                    p.innerHTML = message;\r\n                } else if (message instanceof window.HTMLElement && p.firstChild !== message) {\r\n                    clearContents(p);\r\n                    p.appendChild(message);\r\n                }\r\n            },\r\n            settings: {\r\n                message: undefined,\r\n                labels: undefined,\r\n                onok: undefined,\r\n                oncancel: undefined,\r\n                value: '',\r\n                type:'text',\r\n                reverseButtons: undefined,\r\n            },\r\n            settingUpdated: function (key, oldValue, newValue) {\r\n                switch (key) {\r\n                case 'message':\r\n                    this.setMessage(newValue);\r\n                    break;\r\n                case 'value':\r\n                    input.value = newValue;\r\n                    break;\r\n                case 'type':\r\n                    switch (newValue) {\r\n                    case 'text':\r\n                    case 'color':\r\n                    case 'date':\r\n                    case 'datetime-local':\r\n                    case 'email':\r\n                    case 'month':\r\n                    case 'number':\r\n                    case 'password':\r\n                    case 'search':\r\n                    case 'tel':\r\n                    case 'time':\r\n                    case 'week':\r\n                        input.type = newValue;\r\n                        break;\r\n                    default:\r\n                        input.type = 'text';\r\n                        break;\r\n                    }\r\n                    break;\r\n                case 'labels':\r\n                    if (newValue.ok && this.__internal.buttons[0].element) {\r\n                        this.__internal.buttons[0].element.innerHTML = newValue.ok;\r\n                    }\r\n                    if (newValue.cancel && this.__internal.buttons[1].element) {\r\n                        this.__internal.buttons[1].element.innerHTML = newValue.cancel;\r\n                    }\r\n                    break;\r\n                case 'reverseButtons':\r\n                    if (newValue === true) {\r\n                        this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element);\r\n                    } else {\r\n                        this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);\r\n                    }\r\n                    break;\r\n                }\r\n            },\r\n            callback: function (closeEvent) {\r\n                var returnValue;\r\n                switch (closeEvent.index) {\r\n                case 0:\r\n                    this.settings.value = input.value;\r\n                    if (typeof this.get('onok') === 'function') {\r\n                        returnValue = this.get('onok').call(this, closeEvent, this.settings.value);\r\n                        if (typeof returnValue !== 'undefined') {\r\n                            closeEvent.cancel = !returnValue;\r\n                        }\r\n                    }\r\n                    break;\r\n                case 1:\r\n                    if (typeof this.get('oncancel') === 'function') {\r\n                        returnValue = this.get('oncancel').call(this, closeEvent);\r\n                        if (typeof returnValue !== 'undefined') {\r\n                            closeEvent.cancel = !returnValue;\r\n                        }\r\n                    }\r\n                    if(!closeEvent.cancel){\r\n                        input.value = this.settings.value;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n    // CommonJS\r\n    if ( typeof module === 'object' && typeof module.exports === 'object' ) {\r\n        module.exports = alertify;\r\n    // AMD\r\n    } else if ( typeof define === 'function' && define.amd) {\r\n        define( [], function () {\r\n            return alertify;\r\n        } );\r\n    // window\r\n    } else if ( !window.alertify ) {\r\n        window.alertify = alertify;\r\n    }\r\n\r\n} ( typeof window !== 'undefined' ? window : this ) );\r\n","import Plyr from 'plyr';\r\nimport alertify from 'alertifyjs';\r\n\r\n(() => {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        try {\r\n            const selector = '.wplyr_player';\r\n            const containers = document.getElementsByClassName('wplyr_container');\r\n\r\n            if (window.shr) {\r\n                window.shr.setup({\r\n                    count: {\r\n                        classname: 'button__count',\r\n                    },\r\n                });\r\n            }\r\n\r\n            // Setup tab focus\r\n            const tabClassName = 'tab-focus';\r\n\r\n            // Remove class on blur\r\n            document.addEventListener('focusout', event => {\r\n                var anyContainerContains = false;\r\n                for (var i = 0; i < containers.length; ++i) {\r\n                    var item = containers[i];\r\n                    if (item.contains(event.target)) {\r\n                        anyContainerContains = true;\r\n                        continue\r\n                    }\r\n                }\r\n                if (!event.target.classList || anyContainerContains) {\r\n                    return;\r\n                }\r\n\r\n                event.target.classList.remove(tabClassName);\r\n            });\r\n\r\n            // Add classname to tabbed elements\r\n            document.addEventListener('keydown', event => {\r\n                if (event.keyCode !== 9) {\r\n                    return;\r\n                }\r\n\r\n                // Delay the adding of classname until the focus has changed\r\n                // This event fires before the focusin event\r\n                setTimeout(() => {\r\n                    const focused = document.activeElement;\r\n\r\n                    var anyContainerFocused = false;\r\n                    for (var i = 0; i < containers.length; ++i) {\r\n                        var item = containers[i];\r\n                        if (item.contains(focused)) {\r\n                            anyContainerContains = true;\r\n                            continue\r\n                        }\r\n                    }\r\n\r\n                    if (!focused || !focused.classList || anyContainerFocused) {\r\n                        return;\r\n                    }\r\n\r\n                    focused.classList.add(tabClassName);\r\n                }, 10);\r\n            });\r\n\r\n            const players = Array.from(document.querySelectorAll(selector)).map(p => new Plyr(p, {\r\n                debug: true,\r\n                controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', /*'captions', 'settings',*/ 'airplay', 'fullscreen'],\r\n            }));\r\n            /*\r\n                var player = new Plyr(selector, {\r\n                    debug: true,\r\n                    title: 'ToyStory',\r\n                    keyboard: {\r\n                        global: true,\r\n                    },\r\n                    tooltips: {\r\n                        controls: true,\r\n                    },\r\n                    captions: {\r\n                        active: true,\r\n                    },\r\n                    keys: {\r\n                        google: 'AIzaSyDrNwtN3nLH_8rjCmu5Wq3ZCm4MNAVdc0c',\r\n                    },\r\n                    ads: {\r\n                    },\r\n                });\r\n            */\r\n            // Expose for tinkering in the console\r\n            window.players = players;\r\n\r\n            for (let i = 0; i < players.length; i++) {\r\n                const player = players[i];\r\n                player.once('canplay', () => player.currentTime = 0);\r\n                player.sourceIndex = -1;\r\n                for (let j = 0; j < player.elements.original.classList.length; j++) {\r\n                    var classString = player.elements.original.classList[j];\r\n                    if (/wplyr_video_\\d+/.test(classString)) {\r\n                        var string = classString.replace(\"wplyr_video_\", \"\");\r\n                        player.videoId = parseInt(string, 10);\r\n                    }\r\n                }\r\n                nextSource(player)();\r\n                player.on('ended', nextSource(player));\r\n                player.controls;\r\n            }\r\n\r\n\r\n            // Setup type toggle\r\n            const buttons = document.querySelectorAll('[data-source]');\r\n            const types = {\r\n                video: 'video',\r\n                audio: 'audio',\r\n                youtube: 'youtube',\r\n                vimeo: 'vimeo',\r\n            };\r\n            let currentType = window.location.hash.replace('#', '');\r\n            const historySupport = window.history && window.history.pushState;\r\n\r\n            // Toggle class on an element\r\n            function toggleClass(element, className, state) {\r\n                if (element) {\r\n                    element.classList[state ? 'add' : 'remove'](className);\r\n                }\r\n            }\r\n\r\n            // Set a new source\r\n            function newSource(type, init) {\r\n                // Bail if new type isn't known, it's the current type, or current type is empty (video is default) and new type is video\r\n                if (!(type in types) ||\r\n                    (!init && type === currentType) ||\r\n                    (!currentType.length && type === types.video)\r\n                ) {\r\n                    return;\r\n                }\r\n\r\n                // Set the current type for next time\r\n                currentType = type;\r\n\r\n                // Remove active classes\r\n                Array.from(buttons).forEach(button => toggleClass(button.parentElement, 'active', false));\r\n\r\n                // Set active on parent\r\n                toggleClass(document.querySelector(`[data-source=\"${type}\"]`), 'active', true);\r\n\r\n                // Show cite\r\n                Array.from(document.querySelectorAll('.plyr__cite')).forEach(cite => {\r\n                    cite.setAttribute('hidden', '');\r\n                });\r\n                document.querySelector(`.plyr__cite--${type}`).removeAttribute('hidden');\r\n            }\r\n\r\n            // Bind to each button\r\n            Array.from(buttons).forEach(button => {\r\n                button.addEventListener('click', () => {\r\n                    const type = button.getAttribute('data-source');\r\n\r\n                    newSource(type);\r\n\r\n                    if (historySupport) {\r\n                        window.history.pushState({ type }, '', `#${type}`);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // List for backwards/forwards\r\n            window.addEventListener('popstate', event => {\r\n                if (event.state && 'type' in event.state) {\r\n                    newSource(event.state.type);\r\n                }\r\n            });\r\n\r\n            // On load\r\n            if (historySupport) {\r\n                const video = !currentType.length;\r\n\r\n                // If there's no current type set, assume video\r\n                if (video) {\r\n                    currentType = types.video;\r\n                }\r\n\r\n                // Replace current history state\r\n                if (currentType in types) {\r\n                    window.history.replaceState({\r\n                            type: currentType,\r\n                        },\r\n                        '',\r\n                        video ? '' : `#${currentType}`,\r\n                    );\r\n                }\r\n\r\n                // If it's not video, load the source\r\n                if (currentType !== types.video) {\r\n                    newSource(currentType, true);\r\n                }\r\n            }\r\n\r\n            function isEmpty(str) {\r\n                return (!str || 0 === str.length);\r\n            }\r\n\r\n            function nextSource(player) {\r\n                return function() {\r\n                    if (player.currentTime > 0 || player.sourceIndex == -1) {\r\n\r\n                        console.log(window.videoSourceMap);\r\n                        console.log(player.sourceIndex);\r\n                        if (typeof window.videoSourceMap[player.videoId] !== 'undefined' && window.videoSourceMap[player.videoId].length > player.sourceIndex) {\r\n                            do {\r\n                                console.log(\"do\");\r\n                                player.sourceIndex++;\r\n                            } while (typeof window.videoSourceMap[player.videoId][player.sourceIndex] !== 'undefined' && isEmpty(window.videoSourceMap[player.videoId][player.sourceIndex].source) && window.videoSourceMap[player.videoId].length > player.sourceIndex)\r\n                            if (window.videoSourceMap[player.videoId].length <= player.sourceIndex) {\r\n                                player.sourceIndex = 0;\r\n                            }\r\n                            var source = window.videoSourceMap[player.videoId][player.sourceIndex].source;\r\n                            var type = window.videoSourceMap[player.videoId][player.sourceIndex].type\r\n                            var sources = [];\r\n                            if (type === 'youtube') {\r\n                                sources = [{\r\n                                    src: source,\r\n                                    provider: 'youtube'\r\n                                }];\r\n                            } else if (type === 'video') {\r\n                                sources = [{\r\n                                    src: source,\r\n                                    type: 'video/mp4',\r\n                                }];\r\n                            }\r\n\r\n                            player.source = {\r\n                                type: 'video',\r\n                                sources: sources,\r\n                            }\r\n                            if (player.sourceIndex != 0) {\r\n                                var playPromise = player.play();\r\n                                if (playPromise !== undefined) {\r\n                                    playPromise.then(function() {\r\n                                        console.log(\"Playback started\");\r\n                                    }).catch(function(error) {\r\n                                        alertify.error(\"<b>Video playback might not be working. Please use more modern browser.</b></br>\" + error);\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            alertify.error(\"<b>Video playback might not be working. Please use more modern browser.</b></br>\" + error);\r\n            throw error;\r\n        }\r\n    });\r\n\r\n})();"]}